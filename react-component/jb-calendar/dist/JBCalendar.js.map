{"version":3,"file":"JBCalendar.js","sources":["../../../common/hooks/use-event.ts","../lib/JBCalendar.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\n\r\nexport function useEvent(dom:HTMLElement, event:any, handler:any, passive = false) {\r\n  useEffect(() => {\r\n    if (dom) {\r\n      // initiate the event handler\r\n      dom.addEventListener(event, handler, passive); \r\n    }\r\n    // this will clean up the event every time the component is re-rendered\r\n    return function cleanup() {\r\n      if(dom){\r\n        dom.removeEventListener(event, handler, passive);\r\n      }\r\n    };\r\n  });\r\n}","import React, { useRef, useEffect, useState, useImperativeHandle } from 'react';\r\nimport 'jb-calendar';\r\n// eslint-disable-next-line no-duplicate-imports\r\nimport { JBCalendarWebComponent } from 'jb-calendar';\r\nimport { useEvent } from '../../../common/hooks/use-event';\r\nimport PropTypes from 'prop-types';\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line @typescript-eslint/no-namespace\r\n  namespace JSX {\r\n    interface IntrinsicElements {\r\n      'jb-calendar': JBCalendarType;\r\n    }\r\n    interface JBCalendarType extends React.DetailedHTMLProps<React.HTMLAttributes<JBCalendarWebComponent>, JBCalendarWebComponent> {\r\n      \"class\"?: string,\r\n      \"type\"?: string,\r\n      \"label\"?:string,\r\n      \"message\"?:string,\r\n      \"placeholder\"?:string,\r\n    }\r\n  }\r\n}\r\n// eslint-disable-next-line react/display-name\r\nconst JBCalendar = React.forwardRef((props:any, ref) => {\r\n  const element = useRef<JBCalendarWebComponent>(null);\r\n  const [refChangeCount, refChangeCountSetter] = useState(0);\r\n  useImperativeHandle(\r\n    ref,\r\n    () => (element ? element.current : {}),\r\n    [element],\r\n  );\r\n  useEffect(() => {\r\n    refChangeCountSetter(refChangeCount + 1);\r\n  }, [element.current]);\r\n  useEffect(() => {\r\n    if (props.inputType) {\r\n      element.current.inputType = props.inputType;\r\n    }\r\n  }, [props.inputType]);\r\n  useEffect(()=>{\r\n    element.current.setAttribute('direction', props.direction);\r\n  },[props.direction]);\r\n  useEffect(()=>{\r\n    if(props.jalaliMonthList){\r\n      element.current.setMonthList('JALALI',props.jalaliMonthList);\r\n    }\r\n  },[props.jalaliMonthList]);\r\n  function onSelect(e) {\r\n    if (props.onSelect && e instanceof CustomEvent) {\r\n      props.onSelect(e);\r\n    }\r\n  }\r\n  useEvent(element.current, 'select', onSelect);\r\n  return (\r\n    <jb-calendar ref={element}></jb-calendar>\r\n  );\r\n});\r\nJBCalendar.propTypes = {\r\n  onSelect: PropTypes.func,\r\n  value: PropTypes.string,\r\n  jalaliMonthList: PropTypes.array,\r\n  inputType: PropTypes.oneOf(['GREGORIAN', 'JALALI'])\r\n};\r\nexport {JBCalendar};\r\n"],"names":[],"mappings":";;;;AAEM,SAAU,QAAQ,CAAC,GAAe,EAAE,KAAS,EAAE,OAAW,EAAE,OAAO,GAAG,KAAK,EAAA;IAC/E,SAAS,CAAC,MAAK;QACb,IAAI,GAAG,EAAE;;YAEP,GAAG,CAAC,gBAAgB,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;SAC/C;;AAED,QAAA,OAAO,SAAS,OAAO,GAAA;YACrB,IAAG,GAAG,EAAC;gBACL,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;aAClD;AACH,SAAC,CAAC;AACJ,KAAC,CAAC,CAAC;AACL;;ACOA;AACM,MAAA,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,KAAS,EAAE,GAAG,KAAI;AACrD,IAAA,MAAM,OAAO,GAAG,MAAM,CAAyB,IAAI,CAAC,CAAC;IACrD,MAAM,CAAC,cAAc,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC3D,mBAAmB,CACjB,GAAG,EACH,OAAO,OAAO,GAAG,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC,EACtC,CAAC,OAAO,CAAC,CACV,CAAC;IACF,SAAS,CAAC,MAAK;AACb,QAAA,oBAAoB,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;AAC3C,KAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IACtB,SAAS,CAAC,MAAK;AACb,QAAA,IAAI,KAAK,CAAC,SAAS,EAAE;YACnB,OAAO,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;SAC7C;AACH,KAAC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;IACtB,SAAS,CAAC,MAAI;QACZ,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC;AAC7D,KAAC,EAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;IACrB,SAAS,CAAC,MAAI;AACZ,QAAA,IAAG,KAAK,CAAC,eAAe,EAAC;YACvB,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAC,KAAK,CAAC,eAAe,CAAC,CAAC;SAC9D;AACH,KAAC,EAAC,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;IAC3B,SAAS,QAAQ,CAAC,CAAC,EAAA;QACjB,IAAI,KAAK,CAAC,QAAQ,IAAI,CAAC,YAAY,WAAW,EAAE;AAC9C,YAAA,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SACnB;KACF;IACD,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAC9C,IAAA,QACE,KAAa,CAAA,aAAA,CAAA,aAAA,EAAA,EAAA,GAAG,EAAE,OAAO,EAAA,CAAgB,EACzC;AACJ,CAAC,EAAE;AACH,UAAU,CAAC,SAAS,GAAG;IACrB,QAAQ,EAAE,SAAS,CAAC,IAAI;IACxB,KAAK,EAAE,SAAS,CAAC,MAAM;IACvB,eAAe,EAAE,SAAS,CAAC,KAAK;IAChC,SAAS,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;CACpD;;;;"}