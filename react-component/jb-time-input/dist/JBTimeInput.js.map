{"version":3,"file":"JBTimeInput.js","sources":["../../../common/hooks/use-event.ts","../lib/JBTimeInput.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\n\r\nexport function useEvent(dom:HTMLElement, event:any, handler:any, passive = false) {\r\n  useEffect(() => {\r\n    if (dom) {\r\n      // initiate the event handler\r\n      dom.addEventListener(event, handler, passive); \r\n    }\r\n    // this will clean up the event every time the component is re-rendered\r\n    return function cleanup() {\r\n      if(dom){\r\n        dom.removeEventListener(event, handler, passive);\r\n      }\r\n    };\r\n  });\r\n}","import React, {useRef, useEffect, useImperativeHandle, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'jb-time-input';\r\n// eslint-disable-next-line no-duplicate-imports\r\nimport {JBTimeInputWebComponent} from 'jb-time-input';\r\nimport {useEvent} from '../../../common/hooks/use-event';\r\nimport { ValidationItem } from 'jb-validation/types';\r\nimport { JBTimeInputValidationValue, TimeUnits } from 'jb-time-input/types';\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line @typescript-eslint/no-namespace\r\n  namespace JSX {\r\n    interface IntrinsicElements {\r\n      'jb-time-input': JBTimeInputType;\r\n    }\r\n    interface JBTimeInputType extends React.DetailedHTMLProps<React.HTMLAttributes<JBTimeInputWebComponent>, JBTimeInputWebComponent> {\r\n      \"class\"?: string,\r\n      \"type\"?: string,\r\n      \"label\"?:string,\r\n      \"message\"?:string,\r\n      \"placeholder\"?:string,\r\n    }\r\n  }\r\n}\r\n// eslint-disable-next-line react/display-name\r\nconst JBTimeInput = React.forwardRef((props:JBTimeInputProps, ref)=>{\r\n  const element = useRef<JBTimeInputWebComponent>(null);\r\n  const [refChangeCount, refChangeCountSetter] = useState(0);\r\n  useImperativeHandle(\r\n    ref,\r\n    () => (element?element.current:{}),\r\n    [element],\r\n  );\r\n  useEffect(() => {\r\n    refChangeCountSetter(refChangeCount + 1);\r\n  }, [element.current]);\r\n  function onChange(e:JBTimeInputEventType<Event>) {\r\n    if (typeof props.onChange == \"function\") {\r\n      props.onChange(e);\r\n    }\r\n  }\r\n  function onKeydown(e:JBTimeInputEventType<KeyboardEvent>) {\r\n    if (typeof props.onKeyDown == \"function\") {\r\n      props.onKeyDown(e);\r\n    }\r\n  }\r\n  function onKeyup(e:JBTimeInputEventType<KeyboardEvent>) {\r\n    if (typeof props.onKeyUp == \"function\") {\r\n      props.onKeyUp(e);\r\n    }\r\n  }\r\n  function onKeyPress(e:JBTimeInputEventType<KeyboardEvent>) {\r\n    if (typeof props.onKeyPress == \"function\") {\r\n      props.onKeyPress(e);\r\n    }\r\n  }\r\n  function onEnter(e:JBTimeInputEventType<KeyboardEvent>) {\r\n    if (typeof props.onEnter == \"function\") {\r\n      props.onEnter(e);\r\n    }\r\n  }\r\n  function onInput(e:JBTimeInputEventType<InputEvent>) {\r\n    if (typeof props.onInput == \"function\") {\r\n      props.onInput(e);\r\n    }\r\n  }\r\n  function onBeforeinput(e:JBTimeInputEventType<InputEvent>) {\r\n    if ( typeof props.onInput == \"function\") {\r\n      props.onInput(e);\r\n    }\r\n  }\r\n  function onFocus(e:JBTimeInputEventType<FocusEvent>) {\r\n    if (props.onFocus && e instanceof FocusEvent) {\r\n      props.onFocus(e);\r\n    }\r\n  }\r\n  function onBlur(e:JBTimeInputEventType<FocusEvent>) {\r\n    if (props.onBlur && e instanceof FocusEvent) {\r\n      props.onBlur(e);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    let value = props.value;\r\n    if(props.value == null || props.value === undefined){\r\n      value = '00:00:00';\r\n    }\r\n    element.current.value = value;\r\n  }, [props.value]);\r\n  useEffect(()=>{\r\n    element.current?.setAttribute('direction',props.direction);\r\n  },[props.direction]);\r\n  useEffect(()=>{\r\n    if(Array.isArray( props.validationList) && element.current){\r\n      element.current.validation.list = props.validationList;\r\n    }\r\n  },[props.validationList]);\r\n  useEffect(()=>{\r\n    if(element.current,props.secondEnabled !== null && props.secondEnabled !== undefined){\r\n      element.current.secondEnabled = props.secondEnabled;\r\n    }\r\n  },[props.secondEnabled]);\r\n  useEffect(() => {\r\n    if(typeof props.frontalZero == \"boolean\"){\r\n      element.current.frontalZero = props.frontalZero;\r\n    }\r\n  }, [props.frontalZero]);\r\n  useEffect(() => {\r\n    if(Array.isArray(props.optionalUnits)){\r\n      element.current.optionalUnits = props.optionalUnits;\r\n    }\r\n  }, [props.optionalUnits]);\r\n  useEffect(() => {\r\n    if(props.showPersianNumber !== null && props.showPersianNumber !== undefined){\r\n      element.current.showPersianNumber = props.showPersianNumber;\r\n    }\r\n  }, [props.showPersianNumber]);\r\n  useEvent(element.current, 'change', onChange);\r\n  useEvent(element.current, 'keydown', onKeydown);\r\n  useEvent(element.current, 'keypress', onKeyPress);\r\n  useEvent(element.current, 'keyup', onKeyup);\r\n  useEvent(element.current, 'focus', onFocus);\r\n  useEvent(element.current, 'blur', onBlur);\r\n  useEvent(element.current, 'input', onInput);\r\n  useEvent(element.current, 'beforeinput', onBeforeinput);\r\n  useEvent(element.current, 'enter', onEnter);\r\n  return (\r\n    <jb-time-input placeholder={props.placeholder} ref={element} class={props.className} label={props.label} message={props.message} close-button-text={props.closeButtonText}></jb-time-input>\r\n  );\r\n});\r\n\r\nexport type JBTimeInputEventType<T> = T & {\r\n  target: JBTimeInputWebComponent\r\n}\r\n\r\nexport type JBTimeInputProps = {\r\n  label?: string | null,\r\n  closeButtonText?: string | null,\r\n  value?: string | null,\r\n  onChange?: (e: JBTimeInputEventType<Event>) => void,\r\n  onKeyUp?: (e: JBTimeInputEventType<KeyboardEvent>) => void,\r\n  onKeyDown?: (e: JBTimeInputEventType<KeyboardEvent>) => void,\r\n  onKeyPress?: (e: JBTimeInputEventType<KeyboardEvent>) => void,\r\n  onEnter?: (e: JBTimeInputEventType<KeyboardEvent>) => void,\r\n  onInput?: (e: JBTimeInputEventType<InputEvent>) => void,\r\n  onBeforeInput?: (e: JBTimeInputEventType<InputEvent>) => void,\r\n  onFocus:(e: JBTimeInputEventType<FocusEvent>) => void\r\n  onBlur:(e: JBTimeInputEventType<FocusEvent>) => void\r\n  className: string,\r\n  placeholder: string,\r\n  message:string\r\n  //TODO: remove this and handle internally\r\n  direction: 'ltr' | 'rtl',\r\n  validationList: ValidationItem<JBTimeInputValidationValue>[],\r\n  secondEnabled: boolean,\r\n  frontalZero: boolean,\r\n  optionalUnits: TimeUnits[],\r\n  showPersianNumber:true\r\n}\r\nexport default JBTimeInput;\r\n\r\n"],"names":[],"mappings":"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"}