{"version":3,"file":"JBEditor.umd.js","sources":["../lib/ParserHelper.js","../lib/inputs/paragraph-input/ParagraphInput.js","../lib/inputs/InputFactory.js","../lib/JBEditor.js"],"sourcesContent":["class ParserHelper {\r\n    /**\r\n    * @param {string} string\r\n    * @return {object}\r\n    */\r\n    textToValueObject(string) {\r\n        const returnObj = {\r\n            type: 'PARAGRAPH',\r\n            value: string\r\n        };\r\n        return returnObj;\r\n    }\r\n    /**\r\n    * @param {string} html\r\n    * @return {object}\r\n    */\r\n    htmlStringToValueObject(html) {\r\n        const elem = document.createRange().createContextualFragment(html);\r\n        const res = this.getStandardObjectFromDom(elem);\r\n        return res;\r\n    }\r\n    /**\r\n    * @param {HTMLElement} dom\r\n    * @return {object}\r\n    */\r\n    htmlDomToValueObject(dom) {\r\n        const obj = {\r\n            type: this.extractType(dom),\r\n            value: []\r\n        };\r\n        if (dom.children.length > 0) {\r\n            dom.children.forEach(element => {\r\n                const elementValue = this.htmlDomToValueObject(element);\r\n                //TODO://make flat function smart base on type\r\n                obj.value.push(elementValue);\r\n            });\r\n        } else {\r\n            obj.value = dom.innerText;\r\n        }\r\n        return obj;\r\n    }\r\n    /**\r\n    * @param {HTMLElement} dom\r\n    * @return {object}\r\n    */\r\n    getStandardObjectFromDom(dom) {\r\n        const obj = this.htmlDomToValueObject(dom);\r\n        const returnObj = this.standardFlatValueObject(obj);\r\n        return returnObj;\r\n    }\r\n    /**\r\n    * @param {HTMLElement} dom\r\n    * @return {string}\r\n    */\r\n    extractType(dom) {\r\n        switch(dom.nodeName.toUpperCase()){\r\n            case 'SPAN':\r\n            case 'EM':\r\n            case 'B':\r\n                console.log(dom.nodeName);\r\n                return 'INLINE_TEXT';\r\n            default:\r\n                return 'PARAGRAPH';  \r\n        }\r\n        \r\n    }\r\n    standardFlatValueObject(valueObject) {\r\n        const standardObj = {\r\n            type: valueObject.type,\r\n            value: []\r\n        };\r\n        if (Array.isArray(valueObject.value)) {\r\n            valueObject.value.forEach((item) => {\r\n                if (Array.isArray(item.value)) {\r\n                    const standaredArr = this.standardFlatValueObject(item).value;\r\n                    standardObj.value = [...standardObj.value, ...standaredArr];\r\n                } else {\r\n                    standardObj.value = [...standardObj.value, item];\r\n                }\r\n\r\n            });\r\n        } else {\r\n            standardObj.value = valueObject.value;\r\n        }\r\n\r\n        return standardObj;\r\n    }\r\n}\r\nexport { ParserHelper };","\r\nimport CSS from './ParagraphInput.scss';\r\nimport { ParserHelper } from '../../ParserHelper';\r\nimport { element } from 'prop-types';\r\nclass JBButtonWebComponent extends HTMLElement {\r\n    get value(){\r\n        return this.editableElement.innerText;\r\n    }\r\n    set value(value){\r\n        this.editableElement.innerText = value;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.initWebComponent();\r\n    }\r\n    initWebComponent() {\r\n        this._shadowRoot = this.attachShadow({ mode: 'open' });\r\n        this._html = `<style>${CSS}</style>` + '\\n';\r\n        this._element = document.createElement('template');\r\n        this._element.innerHTML = this._html;\r\n        this._shadowRoot.appendChild(this._element.content.cloneNode(true));\r\n        this.parserHelper = new ParserHelper(); \r\n        this.initElement();\r\n    }\r\n    initElement() {\r\n        const inputElem = document.createElement('p');\r\n        inputElem.classList.add('paragraph-input');\r\n        inputElem.addEventListener('keypress', this.onKeyPress.bind(this));\r\n        inputElem.addEventListener('paste', this.onPaste.bind(this));\r\n        inputElem.addEventListener('click', ()=>{this.focus();});\r\n        inputElem.addEventListener('blur',()=>{this.onBlur();});\r\n        this.editableElement = inputElem;\r\n        //this.editableElement.contentEditable = true;\r\n        this._shadowRoot.appendChild(inputElem);\r\n    }\r\n    onKeyPress(e) {\r\n        if (e.key == \"Enter\") {\r\n            e.preventDefault();\r\n            this.callOnEnter();\r\n        }\r\n    }\r\n    onPaste(e) {\r\n        console.log('b');\r\n        const clipboardData = e.clipboardData || window.clipboardData;\r\n        let pastedData = null;\r\n        let valueObj = null;\r\n        if(clipboardData.types.findIndex(x=>x==\"text/html\") !== -1){\r\n            pastedData = clipboardData.getData('text/html');\r\n            valueObj = this.parserHelper.htmlStringToValueObject(pastedData);\r\n        }else if(clipboardData.types.findIndex(x=>x==\"text/plain\") !== -1){\r\n            pastedData = clipboardData.getData('text/plain');\r\n            valueObj = this.parserHelper.textToValueObject(pastedData);\r\n        }\r\n        const selection = this._shadowRoot.getSelection();\r\n        this.setPasteValue(valueObj, selection);\r\n        e.preventDefault();\r\n    }\r\n    setPasteValue(valueObj,selection){\r\n        let currentBlockHTML = \"\";\r\n\r\n        if(typeof valueObj.value == \"string\"){\r\n            currentBlockHTML = valueObj.value;\r\n        }else{\r\n            currentBlockHTML = valueObj.value[0].value;\r\n        }\r\n        if(selection.anchorNode.nodeType === 3){\r\n            // user may select from start to end or end to start so we standrad it.\r\n            let selectionStart = Math.min(selection.anchorOffset, selection.extentOffset);\r\n            let selectionEnd = Math.max(selection.anchorOffset, selection.extentOffset);\r\n            //if selection part is pure text\r\n            const text = this.editableElement.innerText;\r\n            let newText = \"\";\r\n            if(valueObj.value.length > 1){\r\n                //if we have more than one line to paste we cut tail of text and add it to the last item or creae new item for it\r\n                const tailText = text.substr(selectionEnd, text.length-1);\r\n                valueObj.value.push({\r\n                    type:'PARAGRAPH',\r\n                    value:tailText\r\n                });\r\n                newText = text.substr(0,selectionStart)+currentBlockHTML;\r\n            }else{\r\n                newText = text.substr(0,selectionStart)+currentBlockHTML+text.substr(selectionEnd, text.length-1);\r\n            }\r\n            \r\n            this.editableElement.innerText = newText;\r\n            this.callExtraDataEvent(valueObj.value.slice(1,valueObj.value.length),'APPEND_AFTER'); \r\n        }\r\n    }\r\n    callExtraDataEvent(extraData,action){\r\n        debugger;\r\n        //on paste or enter event or etc we have data that wont place in current block and we want editor to place them in a useful manner\r\n        // in this case we send extra data to the editor so editor do the proper action\r\n        const event = new CustomEvent('extraData',{detail:{\r\n            action:action,\r\n            data:extraData\r\n        }});\r\n        this.dispatchEvent(event);\r\n\r\n    }\r\n    callOnEnter() {\r\n        const event = new CustomEvent('enter');\r\n        this.dispatchEvent(event);\r\n    }\r\n    static get observedAttributes() {\r\n        return [];\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        // do something when an attribute has changed\r\n        this.onAttributeChange(name, newValue);\r\n    }\r\n\r\n    onAttributeChange(name, value) {\r\n        // switch (name) {\r\n\r\n        // }\r\n    }\r\n    focus() {\r\n        this.editableElement.contentEditable = true;\r\n        this.editableElement.focus();\r\n    }\r\n    onBlur(){\r\n        this.editableElement.contentEditable = false;\r\n    }\r\n}\r\nconst myElementNotExists = !customElements.get('jb-editor-paragraph-input');\r\nif (myElementNotExists) {\r\n    window.customElements.define('jb-editor-paragraph-input', JBButtonWebComponent);\r\n}\r\n\r\n","import './paragraph-input/ParagraphInput';\r\nclass InputFactory {\r\n    constructor({ createInput, handleExtraData}) {\r\n        this.createInput = createInput;\r\n        this.handleExtraData =handleExtraData;\r\n    }\r\n    getElementIndex(node) {\r\n        var index = 0;\r\n        while ((node = node.previousElementSibling)) {\r\n            index++;\r\n        }\r\n        return index;\r\n    }\r\n    createParagraphInput(value) {\r\n        const inputElem = document.createElement('jb-editor-paragraph-input');\r\n        if(value){\r\n            inputElem.value = value;\r\n        }\r\n        inputElem.addEventListener('enter', (e) => {\r\n            const newIndex = this.getElementIndex(inputElem);\r\n            const createdElement = this.createInput('PARAGRAPH', null, newIndex);\r\n            createdElement.focus();\r\n        });\r\n        inputElem.addEventListener('extraData',(e)=>{\r\n            this.handleExtraData(e);\r\n        });\r\n        return inputElem;\r\n    }\r\n}\r\nexport { InputFactory };","import { InputFactory } from './inputs/InputFactory';\r\nimport HTML from './JBEditor.html';\r\nimport CSS from './JBEditor.scss';\r\nimport { ParserHelper } from './ParserHelper';\r\nclass JBInputWebComponent extends HTMLElement {\r\n    static get formAssociated() { return true; }\r\n    get value() {\r\n        const value = this._elements.content.inputs.map(x=>x.value);\r\n        return this.value;\r\n    }\r\n    constructor() {\r\n        super();\r\n        if(typeof this.attachInternals == \"function\"){\r\n            //some browser dont support attachInternals\r\n            this.internals_ = this.attachInternals();\r\n        }\r\n        this.inputFactory = new InputFactory({\r\n            createInput:this.createInput.bind(this),\r\n            handleExtraData: this.handleExtraData.bind(this)\r\n        });\r\n        this.parserHelper = new ParserHelper();\r\n        this.initWebComponent();\r\n    }\r\n    connectedCallback() {\r\n        // standard web component event that called when all of dom is binded\r\n        this.callOnLoadEvent();\r\n        this.initProp();\r\n        this.callOnInitEvent();\r\n        \r\n    }\r\n    callOnLoadEvent() {\r\n        var event = new CustomEvent('load', { bubbles: true, composed: true });\r\n        this.dispatchEvent(event);\r\n    }\r\n    callOnInitEvent() {\r\n        var event = new CustomEvent('init', { bubbles: true, composed: true });\r\n        this.dispatchEvent(event);\r\n    }\r\n    initWebComponent() {\r\n        this._shadowRoot = this.attachShadow({\r\n            mode: 'open'\r\n        });\r\n        this._html = `<style>${CSS}</style>` + '\\n' + HTML;\r\n        this._element = document.createElement('template');\r\n        this._element.innerHTML = this._html;\r\n        this._shadowRoot.appendChild(this._element.content.cloneNode(true));\r\n        this._elements = {\r\n            content:{\r\n                wrapper:this._shadowRoot.querySelector('.content-wrapper'),\r\n                inputs:[]\r\n            }\r\n        };\r\n        this.initEditor();\r\n        this.registerEventListener();\r\n    }\r\n    initEditor(){\r\n        this._elements.content.wrapper.addEventListener('paste',this.onPaste.bind(this));\r\n        this.createInput();\r\n    }\r\n    onPaste(e){\r\n        const clipboardData = e.clipboardData || window.clipboardData;\r\n        let pastedData = null;\r\n        let valueObj = null;\r\n        if(clipboardData.types.findIndex(x=>x==\"text/html\") !== -1){\r\n            pastedData = clipboardData.getData('text/html');\r\n            valueObj = this.parserHelper.htmlStringToValueObject(pastedData);\r\n        }else if(clipboardData.types.findIndex(x=>x==\"text/plain\") !== -1){\r\n            pastedData = clipboardData.getData('text/plain');\r\n            valueObj = this.parserHelper.textToValueObject(pastedData);\r\n        }\r\n        const selection = this._shadowRoot.getSelection();\r\n        if(selection.type == \"Caret\"){\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        console.log('a');\r\n        debugger;\r\n        e.preventDefault();\r\n    }\r\n    createInput(type,value,index){\r\n        //create element and add it to wrapper\r\n        const newIndex = index||this._elements.content.inputs.length;\r\n        const inputElem = this.inputFactory.createParagraphInput(value);\r\n        //we add a uniq symbil to every input element so we can find them later by symbol\r\n        inputElem._JBEditorDetail = {\r\n            uniqSymbol: Symbol(),\r\n        };\r\n        if(newIndex == this._elements.content.inputs.length){\r\n            this._elements.content.wrapper.appendChild(inputElem);\r\n        }else{\r\n            this._elements.content.wrapper.insertBefore(inputElem,this._elements.content.wrapper.children[newIndex+1]);\r\n        }\r\n        this._elements.content.inputs.splice(newIndex, 0, inputElem);\r\n\r\n        return inputElem;\r\n    }\r\n    handleExtraData(e){\r\n        debugger;\r\n        const {action, data} = e.detail;\r\n        if(action == \"APPEND_AFTER\"){\r\n            const elemIndex = this.inputFactory.getElementIndex(e.target);\r\n            data.forEach((item)=>{\r\n                this.createInput(item.type,item.value,elemIndex);\r\n            });\r\n        }\r\n    }\r\n    registerEventListener() {\r\n    }\r\n    initProp() {\r\n    }\r\n    static get observedAttributes() {\r\n        return [];\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        // do something when an attribute has changed\r\n        this.onAttributeChange(name, newValue);\r\n    }\r\n    onAttributeChange(name, value) {\r\n        // switch (name) {\r\n        // }\r\n    }\r\n\r\n}\r\nconst myElementNotExists = !customElements.get('jb-editor');\r\nif(myElementNotExists){\r\n    window.customElements.define('jb-editor', JBInputWebComponent);\r\n}\r\n"],"names":["CSS","myElementNotExists"],"mappings":"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"}