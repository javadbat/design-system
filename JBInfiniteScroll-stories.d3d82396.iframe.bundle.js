(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[772],{"../../web-component/jb-core/react/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_q:()=>r});var react=__webpack_require__("./node_modules/react/index.js");function r(n,u,c,l=!1){let o=(0,react.useCallback)((e=>{n.current&&"function"==typeof c&&c(e)}),[n,c]);(0,react.useEffect)((()=>{let e=n.current;return e&&e.addEventListener(u,o,{passive:l,capture:!1}),function(){e&&e.removeEventListener(u,o,{passive:l,capture:!1})}}),[n,u,c,l])}},"../../web-component/jb-loading/dist/JBLoading.js":()=>{var t=class extends HTMLElement{constructor(){super(),this.initWebComponent()}connectedCallback(){this.callOnLoadEvent(),this.initProp(),this.callOnInitEvent()}callOnLoadEvent(){var t=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(t)}callOnInitEvent(){var t=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(t)}initWebComponent(){const t=this.attachShadow({mode:"open"}),e=document.createElement("template");e.innerHTML='<style>:host{display:block;width:var(--jb-loading-width, 100%);height:var(--jb-loading-height, 100%)}.jb-loading-web-component .spin .spin-loading{width:100%;height:100%;fill:rgba(0,0,0,0)}.jb-loading-web-component .spin .spin-loading circle{stroke:var(--jb-loading-color, #000);stroke-width:8px;stroke-linecap:round;stroke-dasharray:1px 50px;animation:loading 1s infinite ease-in-out;transform-box:center;transform-origin:center}@keyframes loading{0%{stroke-dasharray:1px 50px;transform:rotate(0deg)}50%{stroke-dasharray:50px 1px;transform:rotate(180deg)}100%{stroke-dasharray:1px 50px;transform:rotate(359deg)}}</style>\n<div class="jb-loading-web-component">\n    <div class="spin">\n        <svg viewbox="0 0 100 100" class="spin-loading">\n            <circle cx="50" cy="50" r="40"></circle>\n        </svg>\n    </div>\n    \n</div>',t.appendChild(e.content.cloneNode(!0)),this.registerEventListener()}registerEventListener(){}initProp(){}static get observedAttributes(){return["type"]}attributeChangedCallback(t,e,n){this.onAttributeChange(t,n)}onAttributeChange(t,e){"type"===t&&(this.inputElement.setAttribute("type",e),"password"==e&&this.initPassword())}};!customElements.get("jb-loading")&&window.customElements.define("jb-loading",t)},"../../web-component/jb-loading/index.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("../../web-component/jb-loading/dist/JBLoading.js")},"./stories/JBInfiniteScroll.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ActionTemplate:()=>ActionTemplate,Empty:()=>Empty,Normal:()=>Normal,__namedExportsOrder:()=>__namedExportsOrder,default:()=>JBInfiniteScroll_stories});var i,s,n,a,o,l,r,c,h,p,d,m,f,u,w,g,y,v,b,W,E,L,react=__webpack_require__("./node_modules/react/index.js");__webpack_require__("../../web-component/jb-loading/index.js");function t(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)}function e(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i}(s=i||(i={})).forceWait="FORCE_WAIT",s.noWait="NO_WAIT";var k=class extends HTMLElement{constructor(){super(),n.add(this),a.set(this,!1),o.set(this,0),l.set(this,!1),r.set(this,!1),c.set(this,!1),h.set(this,null),p.set(this,void 0),m.set(this,i.forceWait),"function"==typeof this.attachInternals&&e(this,p,this.attachInternals(),"f"),t(this,n,"m",w).call(this)}set stateChangeWaitingBehavior(i){e(this,m,t(this,n,"m",f).call(this,i),"f")}get stateChangeWaitingBehavior(){return t(this,m,"f")}get disableCaptureScroll(){return t(this,c,"f")}set disableCaptureScroll(i){e(this,c,i,"f"),t(this,n,"m",E).call(this,!1)}get isListEnded(){return t(this,l,"f")}set isListEnded(i){e(this,l,i,"f"),t(this,n,"m",E).call(this,!1)}get isLoading(){return t(this,a,"f")}set isLoading(i){e(this,a,i,"f"),t(this,n,"m",E).call(this,!1),i?(this.elements?.loading.classList.add("--show"),t(this,p,"f").states?.add("loading")):(this.elements?.loading.classList.remove("--show"),t(this,p,"f").states?.delete("loading"),t(this,n,"m",u).call(this),t(this,n,"m",v).call(this))}get isListEmpty(){return t(this,h,"f")}set isListEmpty(i){e(this,h,i,"f"),i?t(this,p,"f").states?.add("empty"):t(this,p,"f").states?.delete("empty"),t(this,n,"m",E).call(this,!1),t(this,n,"m",u).call(this)}connectedCallback(){this.callOnLoadEvent(),t(this,n,"m",y).call(this),this.callOnInitEvent()}callOnLoadEvent(){const t=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(t)}callOnInitEvent(){const t=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(t)}get canCaptureScroll(){return!(t(this,a,"f")||t(this,n,"a",d)||t(this,l,"f")||t(this,r,"f")||t(this,c,"f"))}static get observedAttributes(){return["is-loading","is-list-empty","is-list-ended","disable-capture-scroll","state-change-waiting-behavior"]}attributeChangedCallback(e,i,s){t(this,n,"m",L).call(this,e,s)}};a=new WeakMap,o=new WeakMap,l=new WeakMap,r=new WeakMap,c=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,n=new WeakSet,d=function(){if(null!==t(this,h,"f"))return t(this,h,"f")},f=function(t){switch(t){case"FORCE_WAIT":default:return i.forceWait;case"NO_WAIT":return i.noWait}},u=function(){t(this,n,"a",d)?(this.elements?.emptyListWrapper.classList.add("--show"),this.elements?.contentWrapper.classList.remove("--show")):(this.elements?.contentWrapper.classList.add("--show"),this.elements?.emptyListWrapper.classList.remove("--show"))},w=function(){const t=this.attachShadow({mode:"open"}),e=document.createElement("template");e.innerHTML='<style>:host{width:100%;height:100%;display:block}.infinite-scroll-component{height:100%}.infinite-scroll-component .content-wrapper{width:100%;height:100%;display:none;overflow:auto}.infinite-scroll-component .content-wrapper.--show{display:block}.infinite-scroll-component .content-wrapper ::slotted([slot=content]){height:auto}.infinite-scroll-component .loading-wrapper{display:none}.infinite-scroll-component .loading-wrapper .default-loading{width:40px;height:40px;margin:0 auto}.infinite-scroll-component .loading-wrapper.--show{display:block}.infinite-scroll-component .empty-list-wrapper{width:100%;height:100%;display:none}.infinite-scroll-component .empty-list-wrapper.--show{display:flex;justify-content:center;align-items:center}.infinite-scroll-component .empty-list-wrapper ::slotted([slot=empty]){height:100%;width:100%;display:flex;justify-content:center;align-items:center;max-height:100%;overflow-y:hidden;background-color:rgba(0,0,0,0);padding:1rem;box-sizing:border-box}</style>\n<div class="infinite-scroll-component">\n    <div class="content-wrapper" part="content-wrapper">\n        <slot name="content"></slot>\n        <div class="loading-wrapper" part="loading-wrapper">\n            <slot name="loading">\n                <div class="default-loading">\n                    <jb-loading part="default-loading"></jb-loading>\n                </div>\n            </slot>\n        </div>\n    </div>\n    <div class="empty-list-wrapper" part="empty-list-wrapper">\n        <slot name="empty">\n        </slot>\n    </div>\n    \n</div>',t.appendChild(e.content.cloneNode(!0)),this.elements={loading:t.querySelector(".loading-wrapper"),componentWrapper:t.querySelector(".Infinite-scroll-component"),contentWrapper:t.querySelector(".content-wrapper"),loadingWrapper:t.querySelector(".loading-wrapper"),emptyListWrapper:t.querySelector(".empty-list-wrapper")}},g=function(){this.elements.contentWrapper.addEventListener("scroll",t(this,n,"m",W).bind(this),{passive:!0})},y=function(){t(this,n,"m",g).call(this),t(this,n,"m",v).call(this)},v=function(){const{scrollHeight:e,clientHeight:i}=this.elements.contentWrapper;e<=i&&this.canCaptureScroll&&t(this,n,"m",b).call(this)},b=function(){t(this,n,"m",E).call(this,!0);const e=new CustomEvent("scrollEnd");this.dispatchEvent(e)},W=function(){const{scrollTop:e,scrollHeight:i,clientHeight:s}=this.elements.contentWrapper;e+s+t(this,o,"f")>=i&&this.canCaptureScroll&&t(this,n,"m",b).call(this)},E=function(s){if(s)if(t(this,m,"f")===i.forceWait)e(this,r,!0,"f");else if(t(this,m,"f")===i.noWait)return;e(this,r,!1,"f")},L=function(i,s){switch(i){case"is-loading":this.isLoading="true"===s;break;case"is-list-empty":this.isListEmpty="true"===s;break;case"is-list-ended":e(this,l,"true"===s,"f");break;case"disable-capture-scroll":e(this,c,"true"===s,"f");break;case"state-change-waiting-behavior":e(this,m,t(this,n,"m",f).call(this,s),"f")}},!customElements.get("jb-infinite-scroll")&&window.customElements.define("jb-infinite-scroll",k);var jb_core_react=__webpack_require__("../../web-component/jb-core/react/index.js");let JBInfiniteScroll_l=react.forwardRef(((n,l)=>{let a=(0,react.useRef)(null);return(0,react.useImperativeHandle)(l,(()=>a?a.current:null),[a]),(0,react.useEffect)((()=>{a.current&&"boolean"==typeof n.isLoading&&(n.isLoading?a.current.setAttribute("is-loading","true"):a.current.setAttribute("is-loading","false"))}),[a.current,n.isLoading]),(0,react.useEffect)((()=>{a.current,"boolean"==typeof n.isListEmpty&&(n.isListEmpty?a.current.setAttribute("is-list-empty","true"):a.current.setAttribute("is-list-empty","false"))}),[a.current,n.isListEmpty]),(0,react.useEffect)((()=>{a.current&&"boolean"==typeof n.isListEnded&&(n.isListEnded?a.current?.setAttribute("is-list-ended","true"):a.current?.setAttribute("is-list-ended","false"))}),[a.current,n.isListEnded]),(0,react.useEffect)((()=>{a.current&&"boolean"==typeof n.disableCaptureScroll&&(n.disableCaptureScroll?a.current?.setAttribute("disable-capture-scroll","true"):a.current?.setAttribute("disable-capture-scroll","false"))}),[a.current,n.disableCaptureScroll]),(0,react.useEffect)((()=>{n.stateChangeWaitingBehavior&&a.current&&a.current?.setAttribute("state-change-waiting-behavior",n.stateChangeWaitingBehavior)}),[a.current,n.stateChangeWaitingBehavior]),(0,jb_core_react._q)(a,"load",n.onLoad,!0),(0,jb_core_react._q)(a,"init",n.onInit,!0),(0,jb_core_react._q)(a,"scroll",n.onScroll),(0,jb_core_react._q)(a,"scrollEnd",n.onScrollEnd,!0),react.createElement("jb-infinite-scroll",{class:n.className,ref:a},n.children)}));JBInfiniteScroll_l.displayName="JBInfiniteScroll";const JBInfiniteScroll_stories={title:"Example/JBInfiniteScroll",component:JBInfiniteScroll_l},Normal={args:{}},ActionTemplate={render:args=>{const ref=(0,react.useRef)(null),[list,setList]=(0,react.useState)([1,2,3,4,5,6,7,8,9]),[isLoading,setIsLoading]=(0,react.useState)(!1),[isListEnded,setIsListEnded]=(0,react.useState)(!1);return react.createElement("div",{style:{height:"10rem",border:"solid 1px #666",overflow:"hidden"}},react.createElement(JBInfiniteScroll_l,{...args,ref,onScrollEnd:()=>{const i=list.at(-1);i>100&&setIsListEnded(!0),setIsLoading(!0),setTimeout((()=>{setList([...list,i+1,i+2,i+3,i+4,i+5,i+6,i+7,i+8,i+9]),setIsLoading(!1)}),1e3)},isLoading,isListEnded,disableCaptureScroll:isLoading},react.createElement("div",{slot:"content"},list.map((item=>react.createElement("div",{key:item,style:{border:"solid 1px #black",fontSize:"3rem",textAlign:"center",padding:"2rem"}},item))))))}},Empty={args:{isListEmpty:!0,children:react.createElement("div",{slot:"empty"},"list is empty")}},__namedExportsOrder=["Normal","ActionTemplate","Empty"];Normal.parameters={...Normal.parameters,docs:{...Normal.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Normal.parameters?.docs?.source}}},ActionTemplate.parameters={...ActionTemplate.parameters,docs:{...ActionTemplate.parameters?.docs,source:{originalSource:"{\n  render: args => {\n    const ref = useRef(null);\n    const [list, setList] = useState([1, 2, 3, 4, 5, 6, 7, 8, 9]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [isListEnded, setIsListEnded] = useState(false);\n    const onScrollEnd = () => {\n      const i = list.at(-1)!;\n      if (i > 100) {\n        setIsListEnded(true);\n      }\n      setIsLoading(true);\n      setTimeout(() => {\n        setList([...list, ...[i + 1, i + 2, i + 3, i + 4, i + 5, i + 6, i + 7, i + 8, i + 9]]);\n        setIsLoading(false);\n      }, 1000);\n    };\n    return <div style={{\n      height: \"10rem\",\n      border: \"solid 1px #666\",\n      overflow: \"hidden\"\n    }}>\n          {/* 👇 Decorators in Storybook also accept a function. Replace <Story/> with Story() to enable it  */}\n          <JBInfiniteScroll {...args} ref={ref} onScrollEnd={onScrollEnd} isLoading={isLoading} isListEnded={isListEnded} disableCaptureScroll={isLoading}>\n            <div slot=\"content\">\n              {list.map(item => {\n            return <div key={item} style={{\n              border: 'solid 1px #black',\n              fontSize: '3rem',\n              textAlign: 'center',\n              padding: '2rem'\n            }}>{item}</div>;\n          })}\n            </div>\n          </JBInfiniteScroll>\n        </div>;\n  }\n}",...ActionTemplate.parameters?.docs?.source}}},Empty.parameters={...Empty.parameters,docs:{...Empty.parameters?.docs,source:{originalSource:'{\n  args: {\n    isListEmpty: true,\n    children: <div slot="empty">list is empty</div>\n  }\n}',...Empty.parameters?.docs?.source}}}}}]);