"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[74],{"../../web-component/jb-validation/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function t(t,i,s,e){if("a"===s&&!e)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!e:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?e:"a"===s?e.call(t):e?e.value:i.get(t)}function i(t,i,s,e,a){if("m"===e)throw new TypeError("Private method is not writable");if("a"===e&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!a:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===e?a.call(t,s):a?a.value=s:i.set(t,s),s}function a(t,i,s){const e={validationList:[],isAllValid:!0},a=t=>{e.validationList.push(t),t.isValid||(e.isAllValid=!1)},r=t.filter((t=>!0===t.defer)),o=t.filter((t=>!0!==t.defer)),l=[];for(const t of o){const e=n(i,t,s);e instanceof Promise?l.push(e):a(e)}if(e.isAllValid)for(const t of r){const e=n(i,t,s);e instanceof Promise?l.push(e):a(e)}return{syncValidationResult:e,asyncList:l}}function n(t,i,s){let e,a=i.message;if(i.validator instanceof RegExp){const a="string"==typeof t?t:s(t);e=i.validator.test(a),i.validator.lastIndex=0}if("function"==typeof i.validator){const s=function r(t,i){function s(t){let i=null;return"string"==typeof t&&t.length>0&&(i=t),{isValid:"string"==typeof t?0==t.length:t,message:i}}const e=t(i);return e instanceof Promise?new Promise((t=>{e.then((i=>{t(s(i))}))})):s(e)}(i.validator,t);if(s instanceof Promise)return new Promise((t=>{s.then((s=>{t({isValid:s.isValid,message:s.message,validation:i})}))}));e=s.isValid,a=s.message??a}return e?{isValid:!0,message:"",validation:i}:{isValid:!1,message:a,validation:i}}__webpack_require__.d(__webpack_exports__,{EQ:()=>g});var o,l,c,f,h,u,d,V,m,g=class{get resultSummary(){return t(this,c,"f")}constructor(t){o.add(this),l.set(this,[]),c.set(this,{isValid:null,message:null}),this.result=null,f.set(this,{clearValidationError:[],getValue:()=>null,getValidations:[],getValueString:()=>"",setValidationResult:[],showValidationError:[]}),this.setCallbacks(t)}setCallbacks(i){Object.keys(i).forEach((s=>{"function"==typeof i[s]&&void 0!==t(this,f,"f")[s]&&(Array.isArray(t(this,f,"f")[s])?t(this,f,"f")[s].push(i[s]):t(this,f,"f")[s]=i[s])}))}get list(){return t(this,l,"f")}set list(t){i(this,l,t,"f"),this.checkValidity({showError:!1})}async checkValidity(i){const s=i?.value||await Promise.resolve(t(this,f,"f").getValue()),e=await t(this,o,"m",V).call(this,s);return t(this,o,"m",u).call(this,e,i),e}checkValiditySync(i){const s=i?.value||t(this,f,"f").getValue(),e=t(this,o,"m",m).call(this,s);return t(this,o,"m",u).call(this,e,i),e}addValidationListGetter(i){t(this,f,"f").getValidations.push(i)}};l=new WeakMap,c=new WeakMap,f=new WeakMap,o=new WeakSet,h=function(){return[...t(this,o,"m",d).call(this),...t(this,l,"f")]},u=function(s,e){if(i(this,c,{isValid:s.isAllValid,message:null},"f"),s.isAllValid)t(this,f,"f").clearValidationError.forEach((t=>t()));else{const i=s.validationList.find((t=>!t.isValid));this.resultSummary.message=i.message,!1!==e?.showError&&t(this,f,"f").showValidationError.forEach((t=>t({message:i.message})))}this.result=s,t(this,f,"f").setValidationResult.forEach((t=>t(s)))},d=function(){const i=[];return t(this,f,"f").getValidations.forEach((t=>{"function"==typeof t&&i.push(...t())})),i.flat()},V=async function(i){return await async function e(t,i,s){const{syncValidationResult:e,asyncList:n}=a(t,i,s);for(const t of n){const i=await t;e.isAllValid=e.isAllValid&&i.isValid,e.validationList.push(i)}return e}(t(this,o,"a",h),i,t(this,f,"f").getValueString)},m=function(i){return function s(t,i,s){const{syncValidationResult:e}=a(t,i,s);return e}(t(this,o,"a",h),i,t(this,f,"f").getValueString)}},"./stories/JBImageInput.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ActionTest:()=>ActionTest,Normal:()=>Normal,WithPlaceHolder:()=>WithPlaceHolder,__namedExportsOrder:()=>__namedExportsOrder,default:()=>JBImageInput_stories});var react=__webpack_require__("./node_modules/react/index.js"),jb_image_input_react=__webpack_require__("../../web-component/jb-image-input/react/index.js"),axios=__webpack_require__("./node_modules/axios/index.js"),axios_default=__webpack_require__.n(axios);const bridge={uploader:(file,config)=>new Promise(((resolve,reject)=>{var formData=new FormData;formData.append("image",file),axios_default().post("http://localhost:3200/image/upload",formData,{headers:{"Content-Type":"multipart/form-data"}}).then((response=>{resolve(response.data.fileName.path)})).catch((err=>{console.error(err)}))})),downloader:(value,config)=>new Promise(((resolve,reject)=>{axios_default().get("http://localhost:3200/image/download",{params:{imagePath:value},responseType:"blob"}).then((response=>{var reader=new window.FileReader;reader.readAsDataURL(response.data),reader.onload=function(){var imageDataUrl=reader.result;resolve(imageDataUrl)}})).catch((err=>{console.error(err)}))}))};function JBImageInputActionTest(props){function onchange(e){console.log("image changed")}return react.createElement("div",null,react.createElement(jb_image_input_react.a,{bridge,onChange:onchange,config:{}}),react.createElement("h3",null,"with 2MB max size limit"),react.createElement(jb_image_input_react.a,{bridge,onChange:onchange,config:{},maxFileSize:2097152,onMaxSizeExceed:function onMaxSizeExceed(e){console.error(`your file size   is not valid your size is:${e.detail.file.size}`)}}))}JBImageInputActionTest.propTypes={};const pages_JBImageInputActionTest=JBImageInputActionTest;JBImageInputActionTest.__docgenInfo={description:"",methods:[],displayName:"JBImageInputActionTest"};const JBImageInput_stories={title:"Example/form elements/JBImageInput",component:jb_image_input_react.a},Normal={args:{acceptTypes:"image/jpeg,image/jpg,image/png,image/svg+xml",message:"extra message"}},ActionTest={render:args=>react.createElement(pages_JBImageInputActionTest,args)},WithPlaceHolder={render:args=>react.createElement(jb_image_input_react.a,args,react.createElement("div",{slot:"placeholder",style:{width:"100%",height:"100%"}},react.createElement("div",{style:{width:"100%",height:"100%",background:"red",display:"flex",justifyContent:"center",alignItems:"center"}},"custom placeholder")))},__namedExportsOrder=["Normal","ActionTest","WithPlaceHolder"];Normal.parameters={...Normal.parameters,docs:{...Normal.parameters?.docs,source:{originalSource:'{\n  args: {\n    acceptTypes: "image/jpeg,image/jpg,image/png,image/svg+xml",\n    message: "extra message"\n  }\n}',...Normal.parameters?.docs?.source}}},ActionTest.parameters={...ActionTest.parameters,docs:{...ActionTest.parameters?.docs,source:{originalSource:"{\n  render: args => <JBImageInputActionTest {...args}></JBImageInputActionTest>\n}",...ActionTest.parameters?.docs?.source}}},WithPlaceHolder.parameters={...WithPlaceHolder.parameters,docs:{...WithPlaceHolder.parameters?.docs,source:{originalSource:"{\n  render: args => <JBImageInput {...args}>\n      <div slot=\"placeholder\" style={{\n      width: '100%',\n      height: '100%'\n    }}>\n        <div style={{\n        width: '100%',\n        height: '100%',\n        background: 'red',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }}>custom placeholder</div>\n      </div>\n    </JBImageInput>\n}",...WithPlaceHolder.parameters?.docs?.source}}}}}]);