"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[543],{"../../web-component/jb-core/react/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_q:()=>r});var react=__webpack_require__("./node_modules/react/index.js");function r(n,u,c,l=!1){let o=(0,react.useCallback)((e=>{n.current&&"function"==typeof c&&c(e)}),[n,c]);(0,react.useEffect)((()=>{let e=n.current;return e&&e.addEventListener(u,o,{passive:l,capture:!1}),function(){e&&e.removeEventListener(u,o,{passive:l,capture:!1})}}),[n,u,c,l])}},"../../web-component/jb-validation/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function t(t,i,s,e){if("a"===s&&!e)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!e:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?e:"a"===s?e.call(t):e?e.value:i.get(t)}function i(t,i,s,e,a){if("m"===e)throw new TypeError("Private method is not writable");if("a"===e&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!a:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===e?a.call(t,s):a?a.value=s:i.set(t,s),s}function a(t,i,s){const e={validationList:[],isAllValid:!0},a=t=>{e.validationList.push(t),t.isValid||(e.isAllValid=!1)},r=t.filter((t=>!0===t.defer)),o=t.filter((t=>!0!==t.defer)),l=[];for(const t of o){const e=n(i,t,s);e instanceof Promise?l.push(e):a(e)}if(e.isAllValid)for(const t of r){const e=n(i,t,s);e instanceof Promise?l.push(e):a(e)}return{syncValidationResult:e,asyncList:l}}function n(t,i,s){let e,a=i.message;if(i.validator instanceof RegExp){const a="string"==typeof t?t:s(t);e=i.validator.test(a),i.validator.lastIndex=0}if("function"==typeof i.validator){const s=function r(t,i){function s(t){let i=null;return"string"==typeof t&&t.length>0&&(i=t),{isValid:"string"==typeof t?0==t.length:t,message:i}}const e=t(i);return e instanceof Promise?new Promise((t=>{e.then((i=>{t(s(i))}))})):s(e)}(i.validator,t);if(s instanceof Promise)return new Promise((t=>{s.then((s=>{t({isValid:s.isValid,message:s.message,validation:i})}))}));e=s.isValid,a=s.message??a}return e?{isValid:!0,message:"",validation:i}:{isValid:!1,message:a,validation:i}}__webpack_require__.d(__webpack_exports__,{EQ:()=>g});var o,l,c,f,h,u,d,V,m,g=class{get resultSummary(){return t(this,c,"f")}constructor(t){o.add(this),l.set(this,[]),c.set(this,{isValid:null,message:null}),this.result=null,f.set(this,{clearValidationError:[],getValue:()=>null,getValidations:[],getValueString:()=>"",setValidationResult:[],showValidationError:[]}),this.setCallbacks(t)}setCallbacks(i){Object.keys(i).forEach((s=>{"function"==typeof i[s]&&void 0!==t(this,f,"f")[s]&&(Array.isArray(t(this,f,"f")[s])?t(this,f,"f")[s].push(i[s]):t(this,f,"f")[s]=i[s])}))}get list(){return t(this,l,"f")}set list(t){i(this,l,t,"f"),this.checkValidity({showError:!1})}async checkValidity(i){const s=i?.value||await Promise.resolve(t(this,f,"f").getValue()),e=await t(this,o,"m",V).call(this,s);return t(this,o,"m",u).call(this,e,i),e}checkValiditySync(i){const s=i?.value||t(this,f,"f").getValue(),e=t(this,o,"m",m).call(this,s);return t(this,o,"m",u).call(this,e,i),e}addValidationListGetter(i){t(this,f,"f").getValidations.push(i)}};l=new WeakMap,c=new WeakMap,f=new WeakMap,o=new WeakSet,h=function(){return[...t(this,o,"m",d).call(this),...t(this,l,"f")]},u=function(s,e){if(i(this,c,{isValid:s.isAllValid,message:null},"f"),s.isAllValid)t(this,f,"f").clearValidationError.forEach((t=>t()));else{const i=s.validationList.find((t=>!t.isValid));this.resultSummary.message=i.message,!1!==e?.showError&&t(this,f,"f").showValidationError.forEach((t=>t({message:i.message})))}this.result=s,t(this,f,"f").setValidationResult.forEach((t=>t(s)))},d=function(){const i=[];return t(this,f,"f").getValidations.forEach((t=>{"function"==typeof t&&i.push(...t())})),i.flat()},V=async function(i){return await async function e(t,i,s){const{syncValidationResult:e,asyncList:n}=a(t,i,s);for(const t of n){const i=await t;e.isAllValid=e.isAllValid&&i.isValid,e.validationList.push(i)}return e}(t(this,o,"a",h),i,t(this,f,"f").getValueString)},m=function(i){return function s(t,i,s){const{syncValidationResult:e}=a(t,i,s);return e}(t(this,o,"a",h),i,t(this,f,"f").getValueString)}},"./stories/JBFileInput.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Normal:()=>Normal,__namedExportsOrder:()=>__namedExportsOrder,default:()=>JBFileInput_stories});var react=__webpack_require__("./node_modules/react/index.js"),jb_validation=__webpack_require__("../../web-component/jb-validation/index.js");function t(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)}function i(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i}var n,s,r,l,a,o,c,p,h,d,f,u,w,m=class extends HTMLElement{set required(e){i(this,l,e,"f"),t(this,p,"f").checkValidity({showError:!1})}get required(){return t(this,l,"f")}get acceptTypes(){return t(this,c,"f")}set acceptTypes(e){e&&(i(this,c,e,"f"),t(this,r,"f").virtualInput.accept=e)}get value(){return t(this,s,"f")}set value(e){null==e?this.resetValue():i(this,s,e,"f")}get status(){return t(this,s,"f")}get selectedFileType(){return t(this,s,"f")?(t(this,s,"f").type,null):null}get validation(){return t(this,p,"f")}get isAutoValidationDisabled(){return t(this,h,"f")}set isAutoValidationDisabled(e){i(this,h,e,"f")}constructor(){super(),n.add(this),s.set(this,null),r.set(this,void 0),l.set(this,!1),a.set(this,void 0),o.set(this,"empty"),c.set(this,"application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf, image/*"),p.set(this,new jb_validation.EQ({clearValidationError:this.clearValidationError.bind(this),getValue:()=>({file:t(this,s,"f")}),getValidations:t(this,n,"m",u).bind(this),getValueString:e=>e.file.name,setValidationResult:t(this,n,"m",w).bind(this),showValidationError:this.showValidationError.bind(this)})),h.set(this,!1),"function"==typeof this.attachInternals&&i(this,a,this.attachInternals(),"f"),this.initWebComponent(),this.initProp(),this.registerEventListener()}initWebComponent(){const e=this.attachShadow({mode:"open",delegatesFocus:!0,slotAssignment:"named"}),s=document.createElement("template");s.innerHTML='<style>.jb-file-input-web-component{background-color:#f7f6f6;width:100%;height:100%;border-radius:24px;display:flex;justify-content:center;align-items:center;overflow:hidden;box-sizing:border-box}.jb-file-input-web-component.--has-error{border:solid 1px #ff1229;border-bottom:solid 3px #ff1229;background-color:#fdf1f1}.jb-file-input-web-component[status=empty] .placeholder-wrapper{display:flex}.jb-file-input-web-component .placeholder-wrapper{width:100%;height:100%;display:none;cursor:pointer;justify-content:center;align-items:center;flex-direction:column;padding:32px}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg{width:64px;height:64px;fill:#1e2832}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st0{fill:none;stroke:#1e2832;stroke-width:3;stroke-miterlimit:10}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st1{fill:none;stroke:#1e2832;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st2{fill:#ff1229}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st3{fill:none;stroke:#1e2832;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .placeholder-wrapper .placeholder-title{color:#1e2832;font-variation-settings:"wght" 600}.jb-file-input-web-component[status=selected] .file-wrapper{display:flex}.jb-file-input-web-component .file-wrapper{width:100%;height:100%;display:none;cursor:pointer;justify-content:center;align-items:center;flex-direction:column;padding:32px}.jb-file-input-web-component .file-wrapper .icon-wrapper svg{width:64px;height:64px;fill:#1e2832}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st0{fill:none;stroke:#1e2832;stroke-width:3;stroke-miterlimit:10}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st1{fill:none;stroke:#1e2832;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st2{fill:#ff1229}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st3{fill:none;stroke:#1e2832;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .file-wrapper .file-name{color:#1e2832;font-variation-settings:"wght" 600}</style>\n<div class="jb-file-input-web-component">\n    <div class="placeholder-wrapper">\n        <div class="icon-wrapper">\n            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve">\n                <style type="text/css">\n\n                </style>\n                <path class="st0" d="M46.5,60.4H17.5c-4.4,0-8-3.6-8-8V11.6c0-4.4,3.6-8,8-8h29.1c4.4,0,8,3.6,8,8v40.8  C54.5,56.8,50.9,60.4,46.5,60.4z"/>\n                <path class="st1" d="M46.7,43.7"/>\n                <path class="st1" d="M18.4,43.7"/>\n                <line class="st1" x1="18.1" y1="43.7" x2="46.5" y2="43.7"/>\n                <line class="st1" x1="18.1" y1="50.7" x2="46.5" y2="50.7"/>\n                <line class="st1" x1="18.1" y1="36.7" x2="46.5" y2="36.7"/>\n                <path class="st2" d="M44.7,28.6c-2.2,0-4.2-0.8-5.8-2.4c-1.5-1.5-2.4-3.6-2.4-5.8c0-2.2,0.8-4.2,2.4-5.8L52.1,2.5   c1.2-1.2,2.8-1.9,4.6-1.9c1.7,0,3.4,0.7,4.6,1.9c2.5,2.5,2.5,6.7,0,9.2L49.8,22.4c-1.9,1.9-5,1.9-6.9,0c-0.9-0.9-1.4-2.2-1.4-3.5   c0-1.3,0.5-2.5,1.4-3.5l0,0l6.4-5.5c0.3-0.3,0.9-0.3,1.2,0.1c0.3,0.3,0.3,0.9-0.1,1.2l-6.4,5.5c-0.6,0.6-0.9,1.4-0.9,2.3   c0,0.9,0.3,1.7,0.9,2.3c1.3,1.3,3.3,1.3,4.6,0l11.6-10.6c1.9-1.9,1.9-4.9,0-6.8c-0.9-0.9-2.1-1.4-3.4-1.4c-1.3,0-2.5,0.5-3.4,1.4   L40.2,15.9c-1.2,1.2-1.9,2.8-1.9,4.6c0,1.7,0.7,3.4,1.9,4.6c1.2,1.2,2.8,1.9,4.6,1.9c1.7,0,3.4-0.7,4.6-1.9l11.8-11   c0.3-0.3,0.9-0.3,1.2,0c0.3,0.3,0.3,0.9,0,1.2l-11.8,11C49,27.8,46.9,28.6,44.7,28.6z"/>\n                <path class="st0" d="M29.2,30.2h-8.9c-1.2,0-2.1-1-2.1-2.1v-9.6c0-1.2,1-2.1,2.1-2.1h8.9c1.2,0,2.1,1,2.1,2.1v9.6  C31.3,29.3,30.3,30.2,29.2,30.2z"/>\n                <line class="st3" x1="54.5" y1="25.1" x2="54.5" y2="19.3"/>\n            </svg>\n        </div>\n        <div class="placeholder-title">انتخاب فایل</div>\n    </div>\n    <div class="file-wrapper">\n        <div class="icon-wrapper">\n            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve">\n                <style type="text/css">\n\n                </style>\n                <path class="st0" d="M46.5,60.4H17.5c-4.4,0-8-3.6-8-8V11.6c0-4.4,3.6-8,8-8h29.1c4.4,0,8,3.6,8,8v40.8  C54.5,56.8,50.9,60.4,46.5,60.4z"/>\n                <path class="st1" d="M46.7,43.7"/>\n                <path class="st1" d="M18.4,43.7"/>\n                <line class="st1" x1="18.1" y1="43.7" x2="46.5" y2="43.7"/>\n                <line class="st1" x1="18.1" y1="50.7" x2="46.5" y2="50.7"/>\n                <line class="st1" x1="18.1" y1="36.7" x2="46.5" y2="36.7"/>\n                <path class="st2" d="M44.7,28.6c-2.2,0-4.2-0.8-5.8-2.4c-1.5-1.5-2.4-3.6-2.4-5.8c0-2.2,0.8-4.2,2.4-5.8L52.1,2.5   c1.2-1.2,2.8-1.9,4.6-1.9c1.7,0,3.4,0.7,4.6,1.9c2.5,2.5,2.5,6.7,0,9.2L49.8,22.4c-1.9,1.9-5,1.9-6.9,0c-0.9-0.9-1.4-2.2-1.4-3.5   c0-1.3,0.5-2.5,1.4-3.5l0,0l6.4-5.5c0.3-0.3,0.9-0.3,1.2,0.1c0.3,0.3,0.3,0.9-0.1,1.2l-6.4,5.5c-0.6,0.6-0.9,1.4-0.9,2.3   c0,0.9,0.3,1.7,0.9,2.3c1.3,1.3,3.3,1.3,4.6,0l11.6-10.6c1.9-1.9,1.9-4.9,0-6.8c-0.9-0.9-2.1-1.4-3.4-1.4c-1.3,0-2.5,0.5-3.4,1.4   L40.2,15.9c-1.2,1.2-1.9,2.8-1.9,4.6c0,1.7,0.7,3.4,1.9,4.6c1.2,1.2,2.8,1.9,4.6,1.9c1.7,0,3.4-0.7,4.6-1.9l11.8-11   c0.3-0.3,0.9-0.3,1.2,0c0.3,0.3,0.3,0.9,0,1.2l-11.8,11C49,27.8,46.9,28.6,44.7,28.6z"/>\n                <path class="st0" d="M29.2,30.2h-8.9c-1.2,0-2.1-1-2.1-2.1v-9.6c0-1.2,1-2.1,2.1-2.1h8.9c1.2,0,2.1,1,2.1,2.1v9.6  C31.3,29.3,30.3,30.2,29.2,30.2z"/>\n                <line class="st3" x1="54.5" y1="25.1" x2="54.5" y2="19.3"/>\n            </svg>\n        </div>\n        <div class="file-name"></div>\n    </div>\n</div>',e.appendChild(s.content.cloneNode(!0)),i(this,r,{componentWrapper:e.querySelector(".jb-file-input-web-component"),placeholderWrapper:e.querySelector(".placeholder-wrapper"),virtualInput:t(this,n,"m",d).call(this),placeholderTitle:e.querySelector(".placeholder-title"),fileNameWrapper:e.querySelector(".file-wrapper .file-name")},"f")}initProp(){this.setStatus("empty"),i(this,s,null,"f"),i(this,l,!1,"f")}registerEventListener(){t(this,r,"f").placeholderWrapper.addEventListener("click",this.openFileSelector.bind(this))}openFileSelector(){t(this,r,"f").virtualInput.click()}static get observedAttributes(){return["required","placeholder-title","accept"]}attributeChangedCallback(e,t,i){this.onAttributeChange(e,i)}onAttributeChange(e,n){switch(e){case"required":i(this,l,""==n||"true"==n,"f");break;case"placeholder-title":t(this,r,"f").placeholderTitle.innerHTML=n;break;case"accept":this.acceptTypes=n}}setStatus(e){t(this,r,"f").componentWrapper.setAttribute("status",e),i(this,o,e,"f")}triggerInputValidation(e=!0){let i=null,n=!0;t(this,l,"f")&&(n=null!=this.value,n||(i="REQUIRED"));const s=n;return s?this.clearValidationError():e&&i&&this.showValidationError(i),{isAllValid:s}}showValidationError(e){t(this,r,"f").componentWrapper.classList.add("--has-error")}clearValidationError(){t(this,r,"f").componentWrapper.classList.remove("--has-error")}resetValue(){i(this,s,null,"f"),this.setStatus("empty"),t(this,r,"f").virtualInput.value=""}_triggerOnChangeEvent(){const e=new Event("change");this.dispatchEvent(e)}checkValidity(){const e=t(this,p,"f").checkValiditySync({showError:!1});if(!e.isAllValid){const e=new CustomEvent("invalid");this.dispatchEvent(e)}return e.isAllValid}reportValidity(){const e=t(this,p,"f").checkValiditySync({showError:!0});if(!e.isAllValid){const e=new CustomEvent("invalid");this.dispatchEvent(e)}return e.isAllValid}get validationMessage(){return t(this,a,"f").validationMessage}};s=new WeakMap,r=new WeakMap,l=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,p=new WeakMap,h=new WeakMap,n=new WeakSet,d=function(){const e=document.createElement("input");return e.type="file",e.accept=this.acceptTypes,e.addEventListener("change",(e=>t(this,n,"m",f).call(this,e))),e},f=function(e){const n=e.target;if(n.files&&n.files.length>0){const e=n.files[0];i(this,s,e,"f"),t(this,r,"f").fileNameWrapper.innerHTML=e.name,this.setStatus("selected"),this._triggerOnChangeEvent()}},u=function(){const e=[];if(t(this,l,"f")){const t="فایل حتما باید انتخاب شود";e.push({validator:({file:e})=>null!==e,message:t,stateType:"valueMissing"})}return e},w=function(e){if(e.isAllValid)t(this,a,"f").setValidity({},"");else{const i={};let n="";e.validationList.forEach((e=>{e.isValid||(e.validation.stateType&&(i[e.validation.stateType]=!0),""==n&&(n=e.message))})),t(this,a,"f").setValidity(i,n)}},!customElements.get("jb-file-input")&&window.customElements.define("jb-file-input",m);var jb_core_react=__webpack_require__("../../web-component/jb-core/react/index.js");let JBFileInput_a=(0,react.forwardRef)(((r,a)=>{let n=(0,react.useRef)(null);return(0,react.useImperativeHandle)(a,(()=>n?n.current:void 0),[n]),(0,react.useEffect)((()=>{n.current&&r.acceptTypes&&(n.current.acceptTypes=r.acceptTypes)}),[r.acceptTypes]),(0,react.useEffect)((()=>{n.current&&r.placeholderTitle&&n.current.setAttribute("placeholder-title",r.placeholderTitle)}),[r.placeholderTitle]),(0,react.useEffect)((()=>{n.current&&r.required&&n.current.setAttribute("required",r.required?"true":"false")}),[r.required]),(0,jb_core_react._q)(n,"load",r.onLoad,!0),(0,jb_core_react._q)(n,"init",r.onInit,!0),(0,jb_core_react._q)(n,"change",r.onChange,!0),react.createElement("jb-file-input",{ref:n,class:r.className})}));JBFileInput_a.displayName="JBFileInput";const JBFileInput_stories={title:"Example/form elements/JBFileInput",component:JBFileInput_a},Normal={args:{}},__namedExportsOrder=["Normal"];Normal.parameters={...Normal.parameters,docs:{...Normal.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Normal.parameters?.docs?.source}}}}}]);