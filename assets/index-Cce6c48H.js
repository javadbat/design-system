var Q=Object.defineProperty;var E=a=>{throw TypeError(a)};var W=(a,o,t)=>o in a?Q(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t;var j=(a,o,t)=>W(a,typeof o!="symbol"?o+"":o,t),y=(a,o,t)=>o.has(a)||E("Cannot "+t);var s=(a,o,t)=>(y(a,o,"read from private field"),t?t.call(a):o.get(a)),b=(a,o,t)=>o.has(a)?E("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(a):o.set(a,t),c=(a,o,t,e)=>(y(a,o,"write to private field"),e?e.call(a,t):o.set(a,t),t),n=(a,o,t)=>(y(a,o,"access private method"),t);import{e as X}from"./jb-validation-BFHHOeHY.js";import{e as x,t as w,n as V}from"./index-BHpGtycm.js";import{j as Y}from"./index-C1o-zhIV.js";import{n as Z,a as $}from"./index-B9NHg_Qw.js";var u,v,g,l,i,m,p,h,A,S,L,q,T,f,C,D,P,z,M,H,B,I,R,U,F,N,_,G,J,K,k,tt=(k=class extends HTMLElement{constructor(){super();b(this,i);b(this,u,{displayValue:"",value:""});j(this,"elements");b(this,v,!1);b(this,g,!1);b(this,l);b(this,p,new X({clearValidationError:()=>this.clearValidationError(),showValidationError:this.showValidationError.bind(this),getValue:()=>s(this,u),getValidations:n(this,i,J).bind(this),getValueString:()=>s(this,u).displayValue,setValidationResult:n(this,i,K).bind(this)}));j(this,"initialValue","");b(this,f,[]);typeof this.attachInternals=="function"&&c(this,l,this.attachInternals()),n(this,i,q).call(this)}static get formAssociated(){return!0}get disabled(){return s(this,v)}set disabled(t){var e,r;c(this,v,t),this.elements.input.disabled=t,t?((e=s(this,l).states)==null||e.add("disabled"),s(this,l).ariaDisabled="true"):((r=s(this,l).states)==null||r.delete("disabled"),s(this,l).ariaDisabled="false")}set required(t){c(this,g,t),n(this,i,m).call(this,!1)}get required(){return s(this,g)}hasState(t){return s(this,l).states.has(t)}get isAutoValidationDisabled(){return this.getAttribute("disable-auto-validation")===""||this.getAttribute("disable-auto-validation")==="true"}get validation(){return s(this,p)}get displayValue(){return s(this,u).displayValue}get value(){return s(this,u).value}set value(t){n(this,i,h).call(this,t,"SET_VALUE")}get isDirty(){return s(this,u).value!==this.initialValue}get selectionStart(){return this.elements.input.selectionStart}set selectionStart(t){this.elements.input.selectionStart=t}get selectionEnd(){return this.elements.input.selectionEnd}set selectionEnd(t){this.elements.input.selectionEnd=t}get selectionDirection(){return this.elements.input.selectionDirection}set selectionDirection(t){this.elements.input.selectionDirection=t}get name(){return this.getAttribute("name")||""}connectedCallback(){n(this,i,S).call(this),this.initProp(),n(this,i,L).call(this)}addStandardValueCallback(t){s(this,f).push(t)}standardValue(t,e){let r={displayValue:t.toString(),value:t.toString()};return r=s(this,f).reduce((d,O)=>O(t.toString(),s(this,u),d,e),r),r}initProp(){n(this,i,h).call(this,this.getAttribute("value")||"","SET_VALUE")}static get observedAttributes(){return["label","type","message","value","name","autocomplete","placeholder","disabled","inputmode","readonly","disable-auto-validation","virtualkeyboardpolicy","required","error"]}attributeChangedCallback(t,e,r){this.onAttributeChange(t,r)}onAttributeChange(t,e){switch(t){case"name":case"autocomplete":case"inputmode":case"readonly":case"virtualkeyboardpolicy":this.elements.input.setAttribute(t,e);break;case"label":this.elements.labelValue.innerHTML=e,s(this,l).ariaLabel=e,e==null||e===void 0||e===""?this.elements.label.classList.add("--hide"):this.elements.label.classList.remove("--hide");break;case"type":this.elements.input.setAttribute("type",e),e=="number"&&this.getAttribute("inputmode")==null&&this.setAttribute("inputmode","numeric");break;case"message":s(this,l).ariaDescription=e,this.elements.messageBox.classList.contains("error")||(this.elements.messageBox.innerHTML=e);break;case"value":n(this,i,h).call(this,e,"SET_VALUE");break;case"placeholder":this.elements.input.placeholder=e,s(this,l).ariaPlaceholder=e;break;case"disabled":e===""||e==="true"?this.disabled=!0:e!=="false"&&e!=null&&e!==void 0||(this.disabled=!1,this.elements.input.removeAttribute("disabled"));break;case"required":this.required=(e||e==="")&&e!=="false";break;case"error":this.reportValidity()}}showValidationError(t){var e;this.elements.messageBox.innerHTML=t.message,(e=s(this,l).states)==null||e.add("invalid"),s(this,l).ariaInvalid="true"}clearValidationError(){var e;const t=this.getAttribute("message")||"";this.elements.messageBox.innerHTML=t,(e=s(this,l).states)==null||e.delete("invalid"),s(this,l).ariaInvalid="false"}focus(){this.elements.input.focus()}setSelectionRange(t,e,r){this.elements.input.setSelectionRange(t,e,r)}checkValidity(){const t=s(this,p).checkValiditySync({showError:!1});if(!t.isAllValid){const e=new CustomEvent("invalid");this.dispatchEvent(e)}return t.isAllValid}reportValidity(){const t=s(this,p).checkValiditySync({showError:!0});if(!t.isAllValid){const e=new CustomEvent("invalid");this.dispatchEvent(e)}return t.isAllValid}get validationMessage(){return s(this,l).validationMessage}},u=new WeakMap,v=new WeakMap,g=new WeakMap,l=new WeakMap,i=new WeakSet,m=function(t){if(!this.isAutoValidationDisabled)return s(this,p).checkValidity({showError:t})},p=new WeakMap,h=function(t,e){t==null&&(t="");const r=this.standardValue(t,e);n(this,i,A).call(this,r)},A=function(t){c(this,u,t),s(this,l)&&typeof s(this,l).setFormValue=="function"&&s(this,l).setFormValue(t.value),this.elements.input.value=t.displayValue},S=function(){const t=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(t)},L=function(){const t=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(t)},q=function(){const t=this.attachShadow({mode:"open",delegatesFocus:!0});Y(),n(this,i,T).call(this),this.elements={input:t.querySelector(".input-box input"),inputBox:t.querySelector(".input-box"),label:t.querySelector("label"),labelValue:t.querySelector("label .label-value"),messageBox:t.querySelector(".message-box"),slots:{startSection:t.querySelector(".jb-input-start-section-wrapper slot"),endSection:t.querySelector(".jb-input-end-section-wrapper slot")}},n(this,i,C).call(this)},T=function(){const t=document.createElement("template");t.innerHTML=`<style>:host{display:block}:host(:focus),:host(:focus-visible){outline:none}.jb-input-web-component{width:100%;margin:var(--jb-input-margin,0 0)}.jb-input-web-component:focus-visible{outline:none}.jb-input-web-component label{width:100%;margin:var(--jb-input-label-margin,.25rem 0px);font-size:var(--jb-input-label-font-size,.8em);color:var(--label-color);margin:var(--jb-input-label-margin,0);font-weight:var(--jb-input-label-font-weight,300);display:block}.jb-input-web-component label.--hide{display:none}.jb-input-web-component .input-box{box-sizing:border-box;width:100%;height:var(--jb-input-height,40px);border:solid var(--jb-input-border-width,1px)var(--border-color);background-color:var(--input-box-bg-color);border-bottom:solid var(--jb-input-border-bottom-width,3px)var(--border-color);border-radius:var(--border-radius);overflow:var(--jb-input-box-overflow,hidden);box-shadow:var(--jb-input-box-shadow,none);grid-template-columns:auto 1fr auto;margin:4px 0;transition:all .3s;display:grid}.jb-input-web-component .input-box:focus-within{border-width:var(--jb-input-border-width-focus,var(--jb-input-border-width,1px));border-bottom-width:var(--jb-input-border-bottom-width-focus,var(--jb-input-border-bottom-width,3px));box-shadow:var(--jb-input-box-shadow-focus,none)}.jb-input-web-component .input-box input{box-sizing:border-box;width:100%;height:100%;padding:var(--jb-input-input-padding,.125rem .75rem 0 .75rem);font-family:inherit;font-size:var(--jb-input-value-font-size,1.1rem);color:var(--value-color);text-align:var(--jb-input-input-text-align,initial);direction:var(--jb-input-input-direction,inherit);font-weight:var(--jb-input-input-font-weight,initial);background-color:#0000;border:none;border-radius:0;margin:0;display:block}.jb-input-web-component .input-box input:focus{outline:none}.jb-input-web-component .input-box input::placeholder{color:var(--placeholder-color);font-size:var(--jb-input-placeholder-font-size,1.1rem)}.jb-input-web-component .input-box input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.jb-input-web-component .input-box input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.jb-input-web-component .input-box input[type=number]{-moz-appearance:textfield}.jb-input-web-component .input-box .jb-input-start-section-wrapper{justify-content:center;align-items:center;width:auto;height:100%;display:flex}.jb-input-web-component .input-box ::slotted([slot=start-section]),.jb-input-web-component .input-box ::slotted([slot=end-section]){box-sizing:border-box;background-color:#0000;justify-content:center;align-items:center;width:auto;height:100%;max-height:100%;padding:8px 16px;display:flex;overflow-y:hidden}.jb-input-web-component .message-box{font-size:var(--jb-input-message-font-size,.7rem);color:var(--message-color);display:var(--jb-input-message-box-display,block);padding:.125rem .5rem}.jb-input-web-component .message-box:empty{padding:0} :host{--border-radius:var(--jb-input-border-radius,var(--jb-radius));--border-color:var(--jb-input-border-color,var(--jb-neutral-10));--message-color:var(--jb-input-message-color,var(--jb-text-secondary));--label-color:var(--jb-input-label-color,var(--jb-text-primary));--value-color:var(--jb-input-value-color,var(--jb-text-primary));--placeholder-color:var(--jb-input-placeholder-color,var(--jb-neutral-6));--input-box-bg-color:var(--jb-input-bgcolor,var(--jb-neutral-10))}:host(:state(invalid)){--message-color:var(--jb-input-message-error-color,var(--jb-red))}:host(:focus-within){--border-color:var(--jb-input-border-color-focus,var(--jb-neutral))}</style>

    <div class="jb-input-web-component">
    <label class="--hide"><span class="label-value" part="label"></span></label>
    <div class="input-box" part="input-box">
        <div class="jb-input-start-section-wrapper">
            <slot name="start-section"></slot>
        </div>
        <input part="input"/>
        <div class="jb-input-end-section-wrapper">
            <slot name="end-section"></slot>
        </div>
    </div>
    <div class="message-box" part="message"></div>
</div>
  `,this.shadowRoot.appendChild(t.content.cloneNode(!0))},f=new WeakMap,C=function(){this.elements.input.addEventListener("change",t=>n(this,i,_).call(this,t),{capture:!1}),this.elements.input.addEventListener("beforeinput",n(this,i,F).bind(this),{capture:!1}),this.elements.input.addEventListener("input",t=>n(this,i,R).call(this,t),{capture:!1}),this.elements.input.addEventListener("blur",t=>n(this,i,D).call(this),{capture:!1,passive:!0}),x(this.elements.input,"keyup",n(this,i,H).bind(this)),x(this.elements.input,"keydown",n(this,i,P).bind(this)),x(this.elements.input,"keypress",n(this,i,M).bind(this)),this.elements.label.addEventListener("click",t=>this.focus(),{capture:!1,passive:!0})},D=function(){n(this,i,m).call(this,!0)},P=function(t){n(this,i,z).call(this,t)},z=function(t){t.stopPropagation();const e=w("keydown",t,{cancelable:!0});this.dispatchEvent(e)||t.preventDefault()},M=function(t){t.stopPropagation();const e=w("keypress",t,{cancelable:!1});this.dispatchEvent(e)},H=function(t){n(this,i,B).call(this,t),t.keyCode==13&&n(this,i,I).call(this,t)},B=function(t){t.stopPropagation();const e=w("keyup",t,{cancelable:!1});this.dispatchEvent(e)},I=function(t){const e=w("enter",t,{cancelable:!1});this.dispatchEvent(e)},R=function(t){const e=t.target.selectionEnd||0;t.target.selectionStart;const r=t.target.value,d=t.target;n(this,i,h).call(this,r,"INPUT"),e!==r.length&&(["number"].includes(this.getAttribute("type"))||d.setSelectionRange(e,e)),n(this,i,m).call(this,!1),n(this,i,U).call(this,t)},U=function(t){t.stopPropagation();const e=V("input",t,{cancelable:!0});this.dispatchEvent(e)},F=function(t){n(this,i,N).call(this,t)},N=function(t){t.stopPropagation();const e=V("beforeinput",t,{cancelable:!0});return this.dispatchEvent(e),e.defaultPrevented&&t.preventDefault(),e.defaultPrevented},_=function(t){const e=t.target.value,r=s(this,u);n(this,i,h).call(this,e,"CHANGE"),n(this,i,m).call(this,!0),n(this,i,G).call(this,t)&&(c(this,u,r),t.preventDefault())},G=function(t){t.stopPropagation();const e={bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed},r=new Event("change",e);return this.dispatchEvent(r),!!r.defaultPrevented},J=function(){const t=[];if(this.required){const e=this.getAttribute("required").length>0?this.getAttribute("required"):Z($,this.getAttribute("label"));t.push({validator:/.{1}/g,message:e,stateType:"valueMissing"})}return this.getAttribute("error")!==null&&this.getAttribute("error").trim().length>0&&t.push({validator:void 0,message:this.getAttribute("error"),stateType:"customError"}),t},K=function(t){if(t.isAllValid)s(this,l).setValidity({},"");else{const e={};let r="";t.validationList.forEach(d=>{d.isValid||(d.validation.stateType&&(e[d.validation.stateType]=!0),r==""&&(r=d.message))}),s(this,l).setValidity(e,r)}},k);customElements.get("jb-input")||window.customElements.define("jb-input",tt);export{tt as o};
