var A=e=>{throw TypeError(e)};var m=(e,r,t)=>r.has(e)||A("Cannot "+t);var l=(e,r,t)=>(m(e,r,"read from private field"),t?t.call(e):r.get(e)),h=(e,r,t)=>r.has(e)?A("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),g=(e,r,t,s)=>(m(e,r,"write to private field"),s?s.call(e,t):r.set(e,t),t),o=(e,r,t)=>(m(e,r,"access private method"),t);import{R as b,r as n}from"./index-D4lIrffr.js";import{x as E}from"./index-Bvsa8z4z.js";import{i as R}from"./index-BEepDcv4.js";const T={validator:({value:e})=>e.length==16||e.length==0,message:"لطفا شماره کارت را کامل وارد کنید"},k={validator:({value:e})=>e.length==26||e.length==0,message:"لطفا شماره شبا را کامل وارد کنید"},D={validator:/(?:(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2}))?/g,message:"شماره شبا وارد شده نامعتبر است"},H=["CARD","SHABA"];var p,d,f,u,C,S,y,v,$,w,x,I,N=(I=class extends E{constructor(){super();h(this,u);h(this,p,this.getAttribute("input-type")||"CARD");h(this,d," ");h(this,f,/\s/g);o(this,u,C).call(this)}get paymentInputType(){return l(this,p)}set paymentInputType(t){H.includes(t)&&g(this,p,t||"CARD")}get separatorString(){return l(this,d)}set separatorString(t){g(this,d,t),g(this,f,RegExp(l(this,d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\s/g,"\\s"),"g"));const s=this.standardValue(this.value,"SET_VALUE");this.elements.input.value=s.displayValue}static get observedAttributes(){return[...E.observedAttributes,"input-type","separator"]}attributeChangedCallback(t,s,i){["input-type","separator"].includes(t)?o(this,u,S).call(this,t,i):this.onAttributeChange(t,i)}},p=new WeakMap,d=new WeakMap,f=new WeakMap,u=new WeakSet,C=function(){const t=document.createElement("template");t.innerHTML="<style>.jb-input-web-component{--jb-input-input-direction: ltr}</style>",this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.validation.addValidationListGetter(o(this,u,x).bind(this)),o(this,u,w).call(this),this.addStandardValueCallback(o(this,u,$).bind(this))},S=function(t,s){switch(t){case"input-type":this.paymentInputType=s;break;case"separator":this.separatorString=s}},y=function(t){if(l(this,p)=="CARD"){let s=R(o(this,u,v).call(this,t)).replace(/[^0-9]/g,"");return s=s.substring(0,16),s}if(l(this,p)=="SHABA"){const s=/(?<ir>(IR|ir|Ir|I|i)?)(?<other>.{0,})/g.exec(t);if(s&&s.groups){let i=R(o(this,u,v).call(this,s.groups.other)).replace(/[^0-9]/g,"");i=i.substring(0,24);let a="";if(s.groups.ir)a=s.groups.ir.toUpperCase();else{if(!(i.length>0))return"";a="IR"}if(a.length==1){if(!(i.length>0))return a;a="IR"}return a+i}return""}return t},v=function(t){return t.replace(l(this,f),"")},$=function(t){let s="",i="";if(l(this,p)=="CARD"){i=o(this,u,y).call(this,t);const a=RegExp(`(.*)(${l(this,f).source})$`,"g");s=i.replace(/([0-9]{4})/g,`$1${l(this,d)}`).replace(a,"$1")}if(l(this,p)=="SHABA"){i=o(this,u,y).call(this,t);const a=/(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2})/g.exec(i);s=a&&a.length>0?a.slice(1).filter(L=>L!=="").join(l(this,d)):i}return{value:i,displayValue:s}},w=function(){},x=function(){return l(this,p)=="CARD"?[T]:[k,D]},I);!customElements.get("jb-payment-input")&&window.customElements.define("jb-payment-input",N);function c(e,r,t,s=!1){let i=n.useCallback(a=>{e.current&&typeof t=="function"&&t(a)},[e,t]);n.useEffect(()=>{let a=e.current;return a&&a.addEventListener(r,i,{passive:s,capture:!1}),function(){a&&a.removeEventListener(r,i,{passive:s,capture:!1})}},[e,r,t,s])}function j(e,r){c(e,"enter",r.onEnter),c(e,"input",r.onInput),c(e,"beforeinput",r.onBeforeinput),c(e,"change",r.onChange),c(e,"keydown",r.onKeydown),c(e,"keyup",r.onKeyup),c(e,"focus",r.onFocus),c(e,"blur",r.onBlur)}function B(e,r){n.useEffect(()=>{let t=r.value;(r.value==null||r.value===void 0)&&(t=""),e&&e.current&&e.current&&(e.current.value=(t==null?void 0:t.toString())||"")},[r.value]),n.useEffect(()=>{var t;r.type&&((t=e==null?void 0:e.current)==null||t.setAttribute("type",r.type))},[r.type]),n.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("name",r.name||"")},[r.name]),n.useEffect(()=>{e&&e.current&&(e.current.validation.list=r.validationList||[])},[r.validationList]),n.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("label",r.label||"")},[r.label]),n.useEffect(()=>{var t;typeof r.disabled=="boolean"&&((t=e==null?void 0:e.current)==null||t.setAttribute("disabled",`${r.disabled}`))},[r.disabled]),n.useEffect(()=>{var t;typeof r.required=="boolean"&&((t=e==null?void 0:e.current)==null||t.setAttribute("required",`${r.required}`))},[r.required]),n.useEffect(()=>{var t,s;r.inputmode?(t=e.current)==null||t.setAttribute("inputmode",r.inputmode):(s=e.current)==null||s.removeAttribute("inputmode")},[r.inputmode]),n.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("message",r.message||"")},[r.message]),n.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("placeholder",r.placeholder||"")},[r.placeholder]),n.useEffect(()=>{var t,s;r.error?(t=e==null?void 0:e.current)==null||t.setAttribute("error",r.error):(s=e==null?void 0:e.current)==null||s.removeAttribute("error")},[r.error])}n.forwardRef((e,r)=>{let t=n.useRef(null),[s,i]=n.useState(0);return n.useImperativeHandle(r,()=>t?t.current:{},[t]),n.useEffect(()=>{i(s+1)},[t.current]),j(t,e),B(t,e),b.createElement("jb-input",{ref:t,class:e.className},e.children)}).displayName="JBInput";let V=b.forwardRef((e,r)=>{let t=n.useRef(null);return n.useImperativeHandle(r,()=>t?t.current:{},[t]),B(t,e),j(t,e),n.useEffect(()=>{t.current.setAttribute("input-type",e.inputType)},[e.inputType]),n.useEffect(()=>{e.separator&&typeof e.separator=="string"&&e.separator!==""&&(t.current.separatorString=e.separator)},[e.separator]),b.createElement("jb-payment-input",{placeholder:e.placeholder?e.placeholder:"",ref:t,class:e.className?e.className:"",label:e.label?e.label:"",message:e.message?e.message:""},e.children)});V.displayName="JBPaymentInput";export{V as s};
