var se=Object.defineProperty;var D=r=>{throw TypeError(r)};var ce=(r,i,e)=>i in r?se(r,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[i]=e;var y=(r,i,e)=>ce(r,typeof i!="symbol"?i+"":i,e),z=(r,i,e)=>i.has(r)||D("Cannot "+e);var a=(r,i,e)=>(z(r,i,"read from private field"),e?e.call(r):i.get(r)),h=(r,i,e)=>i.has(r)?D("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(r):i.set(r,e),d=(r,i,e,t)=>(z(r,i,"write to private field"),t?t.call(r,e):i.set(r,e),e),s=(r,i,e)=>(z(r,i,"access private method"),e);import{R as Z,r as p}from"./index-0yr9KlQE.js";import{e as de}from"./jb-validation-BFHHOeHY.js";import{r as A}from"./index-Dsu68ezD.js";var u=class{constructor(r,i){y(this,"lightness");y(this,"chroma");y(this,"hue");y(this,"variableName");this.variableName=i,this.lightness=r.lightness,this.chroma=r.chroma,this.hue=r.hue}get value(){return`oklch(${this.lightness} ${this.chroma} ${this.hue})`}};function b(r){return new u({lightness:6*(3+1.3*r)*.01,chroma:.001*(14+.09*r),hue:258.36},`--jb-neutral-${r}`)}function he(r){return new u({lightness:r.lightness-.1,chroma:r.chroma-.05,hue:r.hue},`${r.variableName}-pressed`)}function ue(r){const i=Math.min(r.lightness+.12*(1-r.lightness),.985),e=r.chroma*(1-.15*(i-r.lightness));return new u({lightness:i,chroma:Number(e.toFixed(3)),hue:r.hue},`${r.variableName}-l`)}function pe(r){const i=Math.max(r.lightness-.12*r.lightness,.02),e=r.chroma*(1-.15*(i-r.lightness));return new u({lightness:i,chroma:e,hue:r.hue},`${r.variableName}-d`)}function me(r){const i=Math.min(r.lightness+.65*(1-r.lightness),.93),e=.55*r.chroma*(1-.08*(i-r.lightness)),t=r.hue>=70&&r.hue<=162?5:-3,o=r.hue+t;return new u({lightness:i,chroma:Number(e.toFixed(3)),hue:o},`${r.variableName}-subtle`)}function ge(r){const i=Math.max(r.lightness-.35,.22),e=Math.min(1.6*r.chroma,.28);return new u({lightness:Number(i.toFixed(3)),chroma:Number(e.toFixed(3)),hue:r.hue},`${r.variableName}-contrast`)}function M(r){return{main:r,hover:(i=r,new u({lightness:i.lightness+.07,chroma:i.chroma+.07,hue:i.hue},`${i.variableName}-hover`)),pressed:he(r),light:ue(r),dark:pe(r),subtle:me(r),contrast:ge(r)};var i}const be=new u({lightness:.6,chroma:.26,hue:256},"--jb-primary"),ve=new u({lightness:.6,chroma:.26,hue:286},"--jb-secondary"),we=new u({lightness:.75,chroma:.18,hue:70},"--jb-yellow"),ye=new u({lightness:.68,chroma:.1484,hue:162.1},"--jb-green"),fe=new u({lightness:.6,chroma:.22,hue:23.21},"--jb-red"),O={single:{black:new u({lightness:.14,chroma:0,hue:0},"--jb-black"),white:new u({lightness:1,chroma:0,hue:0},"--jb-white"),highlight:new u({lightness:.93,chroma:.2302,hue:125.18},"--jb-highlight")},neutral:[b(0),b(1),b(2),b(3),b(4),b(5),b(6),b(7),b(8),b(9),b(10)],primary:M(be),secondary:M(ve),yellow:M(we),green:M(ye),red:M(fe)};function L(r){try{const{value:i,...e}=r;window.CSS.registerProperty({...e}),(function(t,o){try{o&&(document.documentElement.style.getPropertyValue(t)||document.documentElement.style.setProperty(t,o))}catch{}})(r.name,i)}catch{}}function m(r,i){L({name:i??r.variableName,syntax:"<color>",inherits:!0,initialValue:r.value})}function je(){var r;L({name:"--jb-radius",inherits:!0,value:"1rem",initialValue:"16px",syntax:"<length-percentage>"}),L({name:"--jb-radius-xs",inherits:!0,value:"0.5rem",initialValue:"8px",syntax:"<length-percentage>"}),L({name:"--jb-radius-sm",inherits:!0,value:"0.75rem",initialValue:"12px",syntax:"<length-percentage>"}),L({name:"--jb-radius-lg",inherits:!0,value:"1.25rem",initialValue:"20px",syntax:"<length-percentage>"}),L({name:"--jb-radius-xl",inherits:!0,value:"1.5rem",initialValue:"24px",syntax:"<length-percentage>"}),(function(i){m(i.neutral[0],"--jb-neutral"),m(i.primary.main),m(i.secondary.main),m(i.single.black),m(i.single.white),m(i.single.highlight),m(i.yellow.main),m(i.green.main),m(i.red.main),m(i.red.main);for(let e=1;e<=10;e++)m(i.neutral[e])})(O),m((r=O).single.black,"--jb-text-primary"),m(r.neutral[7],"--jb-text-secondary"),m(r.single.white,"--jb-text-contrast")}var S,B,g,c,T,j,x,w,N,F,H,v,C,n,U,V,W,J,G,K,Q,X,Y,_,ee,te,q,re,$,f,ie,ae,ne,oe,le,P,k,xe=(k=class extends HTMLElement{constructor(){super();h(this,n);h(this,S,!1);h(this,B,null);h(this,g);h(this,c);h(this,T,"image/jpeg,image/jpg,image/png,image/svg+xml");h(this,j,null);h(this,x,null);h(this,w,null);h(this,N,null);y(this,"imageBase64Value",null);h(this,F,!1);h(this,H,!1);h(this,v);h(this,C,new de({showValidationError:this.showValidationError.bind(this),clearValidationError:this.clearValidationError.bind(this),getValue:()=>({file:a(this,w),value:a(this,x)}),getValidations:s(this,n,ae).bind(this),setValidationResult:s(this,n,ne).bind(this),getValueString:()=>this.fileName}));y(this,"initialValue",null);h(this,V,!1);y(this,"config",{uploadUrl:"",downloadUrl:""});y(this,"bridge",{uploader:function(e){return new Promise(t=>{t(e)})},downloader:function(e){return new Promise((t,o)=>{typeof e=="string"&&fetch(e).then(l=>l.blob()).then(l=>{const E=new window.FileReader;E.readAsDataURL(l),E.onload=function(){const I=E.result;t(I)}}).catch(o),e instanceof File&&k.ExtractBase64ImageFromFile(e).then(l=>{t(l)})})}});typeof this.attachInternals=="function"&&d(this,v,this.attachInternals()),s(this,n,U).call(this),s(this,n,W).call(this),s(this,n,J).call(this)}static get formAssociated(){return!0}get value(){return a(this,x)}set value(e){s(this,n,P).call(this,e)}get isAutoValidationDisabled(){return a(this,S)}set isAutoValidationDisabled(e){d(this,S,e)}get selectedImageType(){return a(this,w).type}get status(){return a(this,B)}get multiple(){return a(this,V)}set multiple(e){d(this,V,e),a(this,V)?a(this,g).setAttribute("multiple","multiple"):a(this,g).removeAttribute("multiple")}get acceptTypes(){return a(this,T)}set acceptTypes(e){d(this,T,e),a(this,g)&&(a(this,g).accept=e)}get file(){return a(this,w)}get maxFileSize(){return a(this,j)}set maxFileSize(e){e==null?d(this,j,null):isNaN(e)||typeof e!="number"||d(this,j,e)}get disabled(){return a(this,F)}set disabled(e){var t,o;d(this,F,e),e?(t=a(this,v).states)==null||t.add("disabled"):(o=a(this,v).states)==null||o.delete("disabled")}set required(e){d(this,H,e),a(this,C).checkValidity({showError:!1})}get required(){return a(this,H)}get validation(){return a(this,C)}get name(){return this.getAttribute("name")||""}get isDirty(){return a(this,x)!==this.initialValue}get fileName(){return a(this,w).name}openImageSelector(){a(this,g).click()}static get observedAttributes(){return["required","label","multiple","message"]}attributeChangedCallback(e,t,o){s(this,n,K).call(this,e,o)}async selectImageByFile(e){const t=await this.validation.checkValidity({showError:!0,value:{file:e,value:null}});this.maxFileSize&&e.size>this.maxFileSize&&s(this,n,_).call(this,e),t.isAllValid&&(s(this,n,Y).call(this,e),s(this,n,ee).call(this,e))}static ExtractBase64ImageFromFile(e){return new Promise((t,o)=>{const l=new FileReader;l.onload=E=>{var R;const I=(R=E.target)==null?void 0:R.result;I?t(I):o(E)},l.readAsDataURL(e)})}onProgressImageUpload(e){d(this,N,e)}showValidationError(e){const t=typeof e=="string"?e:e.message;a(this,c).webComponent.classList.add("--has-error"),a(this,x)?s(this,n,ie).call(this,t):(a(this,c).placeHolderMessageBox.innerHTML=t,a(this,c).placeHolderMessageBox.classList.add("error"))}clearValidationError(){a(this,c).webComponent.classList.remove("--has-error"),a(this,c).placeHolderMessageBox.innerHTML=this.getAttribute("message")||"",a(this,c).placeHolderMessageBox.classList.remove("error")}checkValidity(){const e=a(this,C).checkValiditySync({showError:!1});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}reportValidity(){const e=a(this,C).checkValiditySync({showError:!0});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}get validationMessage(){return a(this,v).validationMessage}},S=new WeakMap,B=new WeakMap,g=new WeakMap,c=new WeakMap,T=new WeakMap,j=new WeakMap,x=new WeakMap,w=new WeakMap,N=new WeakMap,F=new WeakMap,H=new WeakMap,v=new WeakMap,C=new WeakMap,n=new WeakSet,U=function(){const e=this.attachShadow({mode:"open",delegatesFocus:!0});je();const t=document.createElement("template");t.innerHTML=`<style>:host{--border-radius: var(--jb-image-input-border-radius, var(--jb-radius-xl));--button-border-radius: var(--jb-image-input-button-border-radius, var(--jb-radius));--bg-color:var(--jb-image-input-bg-color, var(--jb-neutral-10));--placeholder-neutral-color: var(--jb-image-input-placeholder-p-color, var(--jb-neutral));--placeholder-primary-color: var(--jb-image-input-placeholder-sec-color, var(--jb-primary));--placeholder-title-color:var(--jb-image-input-placeholder-title-color, var(--jb-neutral));--message-color:var(--jb-image-input-message-color, var(--jb-text-secondary));--message-error-color:var(--jb-image-input-message-error-color, var(--jb-red));--overlay-bg-color:oklch(from var(--jb-neutral) l c h / calc(alpha - 0.5));--delete-button-color:var(--jb-red);--delete-button-bg-color:var(--jb-white);--delete-icon-color:var(--jb-red);--download-button-color:var(--jb-white);--download-button--bg-color-hover:var(--jb-white);--download-button-color-hover:var(--jb-neutral);--reselect-button-color:var(--jb-white);--error-overlay-bg-color:oklch(from var(--jb-red) l c h / calc(alpha - 0.5));--error-overlay-color:var(--jb-white);--error-overlay-icon-color:var(--jb-white);--error-overlay-outline:var(--jb-black)}:host{width:var(--jb-image-input-width, 100%);height:var(--jb-image-input-height, 100%)}.jb-image-input-web-component{position:relative;background-color:var(--bg-color);width:100%;height:100%;border-radius:var(--border-radius);display:flex;justify-content:center;align-items:center;overflow:hidden;box-sizing:border-box}.jb-image-input-web-component[status=empty] .placeholder-wrapper{display:flex}.jb-image-input-web-component .placeholder-wrapper{width:100%;height:100%;display:none;cursor:pointer;background-color:var(--jb-image-input-placeholder-bg-color, transparent)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:.25rem;padding:.5rem}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .icon-wrapper svg{width:64px;height:64px;fill:var(--placeholder-neutral-color)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .icon-wrapper svg .cls-1{fill:var(--placeholder-primary-color)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .placeholder-title{color:var(--placeholder-title-color);font-variation-settings:"wght" 600}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box{font-size:var(--jb-image-input-message-font-size, 0.7rem);padding:2px 8px;color:var(--message-color);display:var(--jb-image-input-message-box-display, block)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box:empty{padding:0}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box.error{color:var(--message-error-color)}.jb-image-input-web-component[status=uploading] .upload-loading-wrapper{display:flex}.jb-image-input-web-component .upload-loading-wrapper{display:none}.jb-image-input-web-component[status=uploaded] .download-loading-wrapper{display:flex}.jb-image-input-web-component .download-loading-wrapper{display:none}.jb-image-input-web-component[status=downloaded] .image-wrapper{display:block}.jb-image-input-web-component[status=downloaded] .image-wrapper img{object-fit:contain;width:100%;height:100%}.jb-image-input-web-component .image-wrapper{position:relative;display:none;width:100%;height:100%;object-fit:contain}.jb-image-input-web-component .image-wrapper:hover .image-overlay{opacity:1}.jb-image-input-web-component .image-wrapper .image-overlay{cursor:pointer;opacity:0;transition:all .3s 0s ease;position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--overlay-bg-color);backdrop-filter:blur(8px);z-index:1;overflow:hidden;border-radius:var(--border-radius);display:flex;justify-content:center;align-items:center;gap:1rem;flex-wrap:wrap}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button{background-color:rgba(0,0,0,0);color:var(--delete-button-color);border-radius:var(--button-border-radius);width:2.5rem;height:2.5rem;display:flex;justify-content:center;align-items:center}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button:hover{background-color:var(--delete-button-bg-color)}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button #DeleteIcon{object-fit:contain;stroke-width:1.5;stroke:var(--delete-icon-color);width:80%;height:80%}.jb-image-input-web-component .image-wrapper .image-overlay .download-button{background-color:rgba(0,0,0,0);color:var(--download-button-color);border-radius:var(--button-border-radius);stroke:var(--download-button-color);width:2.5rem;height:2.5rem;display:flex;justify-content:center;align-items:center}.jb-image-input-web-component .image-wrapper .image-overlay .download-button:hover{background-color:var(--download-button--bg-color-hover);stroke:var(--download-button-color-hover)}.jb-image-input-web-component .image-wrapper .image-overlay .download-button #DownloadIcon{object-fit:contain;stroke-width:1.5;width:80%;height:80%}.jb-image-input-web-component .image-wrapper .image-overlay .reselect-button{background-color:rgba(0,0,0,0);border-radius:1rem;padding:.25rem .5rem;color:var(--reselect-button-color)}.jb-image-input-web-component .error-overlay{display:none;transition:all .3s 0s ease;position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--error-overlay-bg-color);backdrop-filter:blur(8px);z-index:1;overflow:hidden;border-radius:var(--border-radius);justify-content:center;align-items:center}.jb-image-input-web-component .error-overlay .error-content{display:flex;justify-content:center;align-items:center;gap:1rem}.jb-image-input-web-component .error-overlay .error-content .error-icon{fill:var(--error-overlay-icon-color);width:4rem;height:4rem}.jb-image-input-web-component .error-overlay .error-content .error-message{color:var(--error-overlay-color);outline:var(--error-overlay-outline);font-size:1.3rem}</style>

  <div class="jb-image-input-web-component">
  <div class="placeholder-wrapper">
    <slot name="placeholder">
      <div class="default-placeholder">
        <div class="icon-wrapper">
          <svg viewBox="0 0 59.19 47.06">
            <g id="Layer_2" data-name="Layer 2">
              <g id="Layer_1-2" data-name="Layer 1">
                <g>
                  <path class="cls-1"
                    d="M27.45,14.85A5.65,5.65,0,1,0,21.8,20.5,5.66,5.66,0,0,0,27.45,14.85ZM21.8,17.5a2.65,2.65,0,1,1,2.65-2.65A2.65,2.65,0,0,1,21.8,17.5Z" />
                  <path class="cls-2"
                    d="M58.7,31.38c.46-5.51.87-11.91-.15-18.18-.75-4.61-2.74-7.85-5.92-9.62C48.77,1.43,44.45,1,40.26.6L39.43.52a97.08,97.08,0,0,0-25.09.65A30.45,30.45,0,0,0,8.68,2.51,12.08,12.08,0,0,0,3.27,6.08C1.16,8.63.7,11.94.45,14.83A88.28,88.28,0,0,0,0,25.12c0,1.38.09,3,.23,4.59.26,3.1.84,7.08,3,10.38,2.87,4.4,7.65,5.44,11,5.83a130.41,130.41,0,0,0,14.84,1.14h.32a101.76,101.76,0,0,0,14.85-1.22C48.06,45.28,52,44.43,54.74,42a10.24,10.24,0,0,0,2.86-4.45,1.43,1.43,0,0,0,.08-.24A26.47,26.47,0,0,0,58.7,31.38ZM43.8,42.87a102.62,102.62,0,0,1-14.72,1.19,128.34,128.34,0,0,1-14.5-1.12c-3.91-.46-6.49-1.6-8.2-3.65l8.08-8.08a2.62,2.62,0,0,1,3.57,0c.68.72,6.72,7.06,7.72,8a1.5,1.5,0,1,0,2-2.23C27,36.22,22,31,20.18,29.09a5.54,5.54,0,0,0-7.83,0L4.8,36.63a23.31,23.31,0,0,1-1.56-7.18C3.11,27.93,3.06,26.37,3,25a85.56,85.56,0,0,1,.41-9.94C3.66,12.54,4,9.88,5.58,8A9.2,9.2,0,0,1,9.7,5.33h0A27.68,27.68,0,0,1,14.8,4.14,95.81,95.81,0,0,1,29.42,3a93.76,93.76,0,0,1,9.7.51l.85.08c3.88.38,7.88.77,11.2,2.62C53.51,7.51,55,10,55.59,13.68c1,5.93.57,12.11.12,17.44-.08.95-.18,1.88-.32,2.78L40.93,19.42A5.5,5.5,0,0,0,37,17.79h0a5.5,5.5,0,0,0-3.92,1.62l-8.88,8.88a1.5,1.5,0,0,0,2.12,2.12l8.88-8.88a2.53,2.53,0,0,1,1.8-.74h0a2.52,2.52,0,0,1,1.8.75L54.49,37.25a7,7,0,0,1-1.74,2.49C50.48,41.76,46.94,42.41,43.8,42.87Z" />
                </g>
              </g>
            </g>
          </svg>
        </div>
        <div class="placeholder-title">انتخاب تصویر</div>
        <div class="message-box" part="message"></div>
      </div>
      
    </slot>

  </div>
  <div class="upload-loading-wrapper">
    <span>در حال آپلود</span>
  </div>
  <div class="download-loading-wrapper">
    <span>در حال آماده سازی</span>
  </div>
  <div class="image-wrapper">
    <img src="">
    <div class="image-overlay">
      <div class="reselect-button">انتخاب مجدد تصویر</div>
      <div class="download-button">
        <svg id="DownloadIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path id="S1" d="M15.0382 12.5084L12.1222 15.4364L9.20621 12.5084"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path id="S3" d="M12.1222 15.4361L12.1222 3.39508"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path id="S2" d="M16.7549 8.12799H17.6879C19.7229 8.12799 21.3719 9.77699 21.3719 11.813V16.697C21.3719 18.727 19.7269 20.372 17.6969 20.372L6.55695 20.372C4.52195 20.372 2.87195 18.722 2.87195 16.687V11.802C2.87195 9.77299 4.51795 8.12799 6.54695 8.12799L7.48895 8.12799" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="delete-button">
        <svg id="DeleteIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path id="BinBody" d="M19.325 9.4682C19.325 9.4682 18.782 16.2032 18.467 19.0402C18.317 20.3952 17.48 21.1892 16.109 21.2142C13.5 21.2612 10.888 21.2642 8.28003 21.2092C6.96103 21.1822 6.13803 20.3782 5.99103 19.0472C5.67403 16.1852 5.13403 9.4682 5.13403 9.4682" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path id="BinLine" d="M20.7082 6.23969H3.75024" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path id="BinHead" d="M17.4406 6.23967C16.6556 6.23967 15.9796 5.68467 15.8256 4.91567L15.5826 3.69967C15.4326 3.13867 14.9246 2.75067 14.3456 2.75067H10.1126C9.53358 2.75067 9.02558 3.13867 8.87558 3.69967L8.63258 4.91567C8.47858 5.68467 7.80258 6.23967 7.01758 6.23967" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
  </div>
  <div class="error-overlay">
    <!-- this container used to show flashed error and disappear after -->
     <div class="error-content">
          <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 14.75C11.59 14.75 11.25 14.41 11.25 14V9C11.25 8.59 11.59 8.25 12 8.25C12.41 8.25 12.75 8.59 12.75 9V14C12.75 14.41 12.41 14.75 12 14.75Z" />
            <path d="M12 18C11.94 18 11.87 17.99 11.8 17.98C11.74 17.97 11.68 17.95 11.62 17.92C11.56 17.9 11.5 17.87 11.44 17.83C11.39 17.79 11.34 17.75 11.29 17.71C11.11 17.52 11 17.26 11 17C11 16.74 11.11 16.48 11.29 16.29C11.34 16.25 11.39 16.21 11.44 16.17C11.5 16.13 11.56 16.1 11.62 16.08C11.68 16.05 11.74 16.03 11.8 16.02C11.93 15.99 12.07 15.99 12.19 16.02C12.26 16.03 12.32 16.05 12.38 16.08C12.44 16.1 12.5 16.13 12.56 16.17C12.61 16.21 12.66 16.25 12.71 16.29C12.89 16.48 13 16.74 13 17C13 17.26 12.89 17.52 12.71 17.71C12.66 17.75 12.61 17.79 12.56 17.83C12.5 17.87 12.44 17.9 12.38 17.92C12.32 17.95 12.26 17.97 12.19 17.98C12.13 17.99 12.06 18 12 18Z" />
            <path d="M18.06 22.16H5.94001C3.99001 22.16 2.50001 21.45 1.74001 20.17C0.990006 18.89 1.09001 17.24 2.04001 15.53L8.10001 4.63C9.10001 2.83 10.48 1.84 12 1.84C13.52 1.84 14.9 2.83 15.9 4.63L21.96 15.54C22.91 17.25 23.02 18.89 22.26 20.18C21.5 21.45 20.01 22.16 18.06 22.16ZM12 3.34C11.06 3.34 10.14 4.06 9.41001 5.36L3.36001 16.27C2.68001 17.49 2.57001 18.61 3.04001 19.42C3.51001 20.23 4.55001 20.67 5.95001 20.67H18.07C19.47 20.67 20.5 20.23 20.98 19.42C21.46 18.61 21.34 17.5 20.66 16.27L14.59 5.36C13.86 4.06 12.94 3.34 12 3.34Z" />
            </svg>
            <span class="error-message"></span>            
     </div>
  </div>
</div>
`,e.appendChild(t.content.cloneNode(!0)),d(this,c,{webComponent:e.querySelector(".jb-image-input-web-component"),placeHolderWrapper:e.querySelector(".placeholder-wrapper"),placeHolderTitle:e.querySelector(".placeholder-title"),placeHolderMessageBox:e.querySelector(".message-box"),image:e.querySelector(".image-wrapper img"),overlay:{container:e.querySelector(".image-overlay"),deleteButton:e.querySelector(".image-overlay .delete-button"),downloadButton:e.querySelector(".image-overlay .download-button")},errorOverlay:{container:e.querySelector(".error-overlay"),message:e.querySelector(".error-overlay .error-message")}})},V=new WeakMap,W=function(){this.acceptTypes="image/jpeg,image/jpg,image/png,image/svg+xml",s(this,n,f).call(this,"empty"),s(this,n,G).call(this)},J=function(){a(this,c).placeHolderWrapper.addEventListener("click",this.openImageSelector.bind(this)),a(this,c).image.addEventListener("click",this.openImageSelector.bind(this)),a(this,c).overlay.container.addEventListener("click",this.openImageSelector.bind(this)),a(this,c).overlay.deleteButton.addEventListener("click",s(this,n,oe).bind(this)),a(this,c).overlay.downloadButton.addEventListener("click",s(this,n,le).bind(this))},G=function(){d(this,g,document.createElement("input")),a(this,g).type="file",a(this,g).accept=this.acceptTypes,a(this,g).addEventListener("change",e=>s(this,n,X).call(this,e))},K=function(e,t){switch(e){case"required":t===""||t=="true"?(this.required=!0,this.ariaRequired="true"):(this.required=!1,this.ariaRequired="false");break;case"label":a(this,v).ariaLabel=t,a(this,c).placeHolderTitle&&(a(this,c).placeHolderTitle.innerHTML=t);break;case"multiple":this.multiple=t==="true";break;case"message":a(this,c).placeHolderMessageBox.innerHTML=t,a(this,v).ariaDescription=t}},Q=function(e){const t=new CustomEvent("imageSelected",{detail:{files:e}});this.dispatchEvent(t)},X=function(e){const t=e.target.files;if(t&&(t==null?void 0:t.length)>0){s(this,n,Q).call(this,t);const o=t[0];a(this,g).value=null,this.selectImageByFile(o)}},Y=function(e){d(this,w,e),s(this,n,q).call(this)},_=function(e){const t=new CustomEvent("maxSizeExceed",{detail:{file:e},cancelable:!1});this.dispatchEvent(t)},ee=function(e){s(this,n,f).call(this,"uploading"),this.bridge.uploader(e,this.config,this.onProgressImageUpload.bind(this)).then(t=>s(this,n,te).call(this,t)).catch(()=>s(this,n,re).call(this))},te=function(e){const t=this.value;s(this,n,f).call(this,"uploaded"),this.value=e,s(this,n,q).call(this).defaultPrevented&&(this.value=t)},q=function(){const e=new Event("change",{bubbles:!0,composed:!0,cancelable:!1});return this.dispatchEvent(e),e},re=function(){this.value?s(this,n,f).call(this,"downloaded"):s(this,n,f).call(this,"empty"),a(this,g).value=""},$=function(e){s(this,n,f).call(this,"downloaded"),this.imageBase64Value=e,a(this,c).image.setAttribute("src",e)},f=function(e){a(this,c).webComponent.setAttribute("status",e),d(this,B,e)},ie=function(e){a(this,c).errorOverlay.message.innerHTML=e,a(this,c).errorOverlay.container.style.display="flex",setTimeout(()=>{a(this,c).errorOverlay.message.innerHTML="",a(this,c).errorOverlay.container.style.display="none"},2e3)},ae=function(){const e=[];return this.required&&e.push({validator:({file:t,value:o})=>t!==null||o!=null,message:"تصویر حتما باید انتخاب شود",stateType:"valueMissing"}),a(this,j)&&e.push({validator:({file:t})=>t==null||t.size<=a(this,j),message:"حجم فایل بیشتر از حد مجاز است",stateType:"rangeOverflow"}),e},ne=function(e){if(e.isAllValid)a(this,v).setValidity({},"");else{const t={};let o="";e.validationList.forEach(l=>{l.isValid||(l.validation.stateType&&(t[l.validation.stateType]=!0),o==""&&(o=l.message))}),a(this,v).setValidity(t,o)}},oe=function(e){e.stopPropagation(),s(this,n,P).call(this,null),s(this,n,q).call(this)},le=function(e){e.stopPropagation();const t=a(this,c).image.getAttribute("src"),o=t.match(/[^:/]\w+(?=;|,)/)[0],l=document.createElement("a");l.href=t,l.download="Image."+o,l.click()},P=function(e){d(this,x,e),e!=null?e instanceof File?(d(this,w,e),k.ExtractBase64ImageFromFile(e).then(s(this,n,$).bind(this))):this.bridge.downloader(e,this.config).then(s(this,n,$).bind(this)):(d(this,w,null),s(this,n,f).call(this,"empty"))},k);customElements.get("jb-image-input")||window.customElements.define("jb-image-input",xe);let Ce=Z.forwardRef((r,i)=>{var e;let t=p.useRef(null);return p.useImperativeHandle(i,()=>t?t.current:void 0,[t]),p.useEffect(()=>{e.config&&t.current&&(t.current.config=e.config)},[(e=r).config]),p.useEffect(()=>{e.bridge&&t.current&&(t.current.bridge=e.bridge)},[e.bridge]),p.useEffect(()=>{e.validationList&&t.current&&(t.current.validation.list=e.validationList)},[e.validationList]),p.useEffect(()=>{var o,l;e.multiple?(o=t.current)==null||o.setAttribute("multiple","true"):(l=t.current)==null||l.removeAttribute("multiple")},[e.multiple]),p.useEffect(()=>{e.value!==void 0&&t.current&&(t.current.value=e.value)},[e.value]),p.useEffect(()=>{var o;e.file&&((o=t.current)==null||o.selectImageByFile(e.file))},[e.file]),p.useEffect(()=>{e.acceptTypes&&t.current&&(t.current.acceptTypes=e.acceptTypes)},[e.acceptTypes]),p.useEffect(()=>{e.maxFileSize!==void 0&&t.current&&(t.current.maxFileSize=e.maxFileSize)},[e.maxFileSize]),p.useEffect(()=>{var o,l;e.name?(o=t==null?void 0:t.current)==null||o.setAttribute("name",e.name||""):(l=t==null?void 0:t.current)==null||l.removeAttribute("name")},[e.name]),p.useEffect(()=>{var o,l;e.label?(o=t==null?void 0:t.current)==null||o.setAttribute("label",e.label||""):(l=t==null?void 0:t.current)==null||l.removeAttribute("label")},[e.label]),p.useEffect(()=>{var o,l;e.message?(o=t==null?void 0:t.current)==null||o.setAttribute("message",e.message||""):(l=t==null?void 0:t.current)==null||l.removeAttribute("message")},[e.message]),p.useEffect(()=>{var o,l;e.required?(o=t==null?void 0:t.current)==null||o.setAttribute("required","true"):(l=t==null?void 0:t.current)==null||l.removeAttribute("required")},[e.required]),A(t,"load",r.onLoad,!0),A(t,"init",r.onInit,!0),A(t,"change",r.onChange),A(t,"imageSelected",r.onImageSelected),A(t,"maxSizeExceed",r.onMaxSizeExceed),Z.createElement("jb-image-input",{ref:t,class:r.className||"","upload-type":r.uploadType||"AUTO"},r.children)});Ce.displayName="JBImageInput";export{Ce as u};
