var k=r=>{throw TypeError(r)};var x=(r,e,t)=>e.has(r)||k("Cannot "+t);var i=(r,e,t)=>(x(r,e,"read from private field"),t?t.call(r):e.get(r)),a=(r,e,t)=>e.has(r)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),l=(r,e,t,n)=>(x(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),m=(r,e,t)=>(x(r,e,"access private method"),t);import{r as h,R as H}from"./index-DhY--VwN.js";import{e as N}from"./jb-validation-BFHHOeHY.js";import{j as _}from"./index-DA-aheCX.js";import{a as B,t as E}from"./index-NH_qbYOC.js";import{r as j}from"./index-BMrwitbN.js";const V=new B({fa:{requiredMessage:"فایل حتما باید انتخاب شود",chooseFile:"انتخاب فایل"},en:{requiredMessage:"you must select a file",chooseFile:"Choose File"}});var o,s,d,c,y,f,u,v,p,F,I,W,R,T,O=(T=class extends HTMLElement{constructor(){super();a(this,p);a(this,o,null);a(this,s);a(this,d,!1);a(this,c);a(this,y,"empty");a(this,f,"application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf, image/*");a(this,u,new N({clearValidationError:this.clearValidationError.bind(this),getValue:()=>({file:i(this,o)}),getValidations:m(this,p,W).bind(this),getValueString:e=>e.file.name,setValidationResult:m(this,p,R).bind(this),showValidationError:this.showValidationError.bind(this)}));a(this,v,!1);typeof this.attachInternals=="function"&&l(this,c,this.attachInternals()),this.initWebComponent(),this.initProp(),this.registerEventListener()}set required(e){l(this,d,e),i(this,u).checkValidity({showError:!1})}get required(){return i(this,d)}get acceptTypes(){return i(this,f)}set acceptTypes(e){e&&(l(this,f,e),i(this,s).virtualInput.accept=e)}get value(){return i(this,o)}set value(e){e==null?this.resetValue():l(this,o,e)}get status(){return i(this,o)}get selectedFileType(){return i(this,o)&&i(this,o).type,null}get validation(){return i(this,u)}get isAutoValidationDisabled(){return i(this,v)}set isAutoValidationDisabled(e){l(this,v,e)}initWebComponent(){const e=this.attachShadow({mode:"open",delegatesFocus:!0,slotAssignment:"named"});_();const t=`<style>.jb-file-input-web-component{background-color:var(--bg-color);border-radius:var(--border-radius);box-sizing:border-box;justify-content:center;align-items:center;width:100%;height:100%;display:flex;overflow:hidden}.jb-file-input-web-component.--has-error{border:solid 1px var(--border-color-error);border-bottom:solid 3px var(--border-color-error);background-color:var(--bg-color-error)}.jb-file-input-web-component[status=empty] .placeholder-wrapper{display:flex}.jb-file-input-web-component .placeholder-wrapper{cursor:pointer;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;padding:32px;display:none}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg{width:64px;height:64px;fill:var(--icon-neutral-color)}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st0{fill:none;stroke:var(--icon-neutral-color);stroke-width:3px;stroke-miterlimit:10}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st1{fill:none;stroke:var(--icon-neutral-color);stroke-width:3px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st2{fill:var(--icon-primary-color)}.jb-file-input-web-component .placeholder-wrapper .icon-wrapper svg .st3{fill:none;stroke:var(--icon-neutral-color);stroke-width:3px;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .placeholder-wrapper .placeholder-title{color:var(--placeholder-title-color);font-variation-settings:"wght"600}.jb-file-input-web-component[status=selected] .file-wrapper{display:flex}.jb-file-input-web-component .file-wrapper{cursor:pointer;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;padding:32px;display:none}.jb-file-input-web-component .file-wrapper .icon-wrapper svg{width:64px;height:64px;fill:var(--icon-neutral-color)}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st0{fill:none;stroke:var(--icon-neutral-color);stroke-width:3px;stroke-miterlimit:10}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st1{fill:none;stroke:var(--icon-neutral-color);stroke-width:3px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st2{fill:var(--icon-primary-color)}.jb-file-input-web-component .file-wrapper .icon-wrapper svg .st3{fill:none;stroke:var(--icon-neutral-color);stroke-width:3px;stroke-linejoin:round;stroke-miterlimit:10}.jb-file-input-web-component .file-wrapper .file-name{color:var(--file-name-color);font-variation-settings:"wght"600} :host{--border-radius:var(--jb-file-input-border-radius,var(--jb-radius-xl));--bg-color:var(--jb-file-input-bg-color,var(--jb-neutral-10));--border-color-error:var(--jb-file-input-border-color-error,var(--jb-error));--bg-color-error:var(--jb-file-input-bg-color-error,var(--jb-neutral-10));--icon-neutral-color:var(--jb-file-input-icon-neutral-color,var(--jb-neutral));--icon-primary-color:var(--jb-file-input-icon-primary-color,var(--jb-primary));--placeholder-title-color:var(--jb-file-input-placeholder-title-color,var(--jb-neutral));--file-name-color:var(--jb-file-input-file-name-color,var(--jb-neutral))}</style>

  <div class="jb-file-input-web-component">
    <div class="placeholder-wrapper">
        <div class="icon-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                id="Layer_1" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;"
                xml:space="preserve">
                <style type="text/css">

                </style>
                <path class="st0"
                    d="M46.5,60.4H17.5c-4.4,0-8-3.6-8-8V11.6c0-4.4,3.6-8,8-8h29.1c4.4,0,8,3.6,8,8v40.8  C54.5,56.8,50.9,60.4,46.5,60.4z" />
                <path class="st1" d="M46.7,43.7" />
                <path class="st1" d="M18.4,43.7" />
                <line class="st1" x1="18.1" y1="43.7" x2="46.5" y2="43.7" />
                <line class="st1" x1="18.1" y1="50.7" x2="46.5" y2="50.7" />
                <line class="st1" x1="18.1" y1="36.7" x2="46.5" y2="36.7" />
                <path class="st2"
                    d="M44.7,28.6c-2.2,0-4.2-0.8-5.8-2.4c-1.5-1.5-2.4-3.6-2.4-5.8c0-2.2,0.8-4.2,2.4-5.8L52.1,2.5   c1.2-1.2,2.8-1.9,4.6-1.9c1.7,0,3.4,0.7,4.6,1.9c2.5,2.5,2.5,6.7,0,9.2L49.8,22.4c-1.9,1.9-5,1.9-6.9,0c-0.9-0.9-1.4-2.2-1.4-3.5   c0-1.3,0.5-2.5,1.4-3.5l0,0l6.4-5.5c0.3-0.3,0.9-0.3,1.2,0.1c0.3,0.3,0.3,0.9-0.1,1.2l-6.4,5.5c-0.6,0.6-0.9,1.4-0.9,2.3   c0,0.9,0.3,1.7,0.9,2.3c1.3,1.3,3.3,1.3,4.6,0l11.6-10.6c1.9-1.9,1.9-4.9,0-6.8c-0.9-0.9-2.1-1.4-3.4-1.4c-1.3,0-2.5,0.5-3.4,1.4   L40.2,15.9c-1.2,1.2-1.9,2.8-1.9,4.6c0,1.7,0.7,3.4,1.9,4.6c1.2,1.2,2.8,1.9,4.6,1.9c1.7,0,3.4-0.7,4.6-1.9l11.8-11   c0.3-0.3,0.9-0.3,1.2,0c0.3,0.3,0.3,0.9,0,1.2l-11.8,11C49,27.8,46.9,28.6,44.7,28.6z" />
                <path class="st0"
                    d="M29.2,30.2h-8.9c-1.2,0-2.1-1-2.1-2.1v-9.6c0-1.2,1-2.1,2.1-2.1h8.9c1.2,0,2.1,1,2.1,2.1v9.6  C31.3,29.3,30.3,30.2,29.2,30.2z" />
                <line class="st3" x1="54.5" y1="25.1" x2="54.5" y2="19.3" />
            </svg>
        </div>
        <div class="placeholder-title">${V.get(E,"chooseFile")}</div>
    </div>
    <div class="file-wrapper">
        <div class="icon-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                id="Layer_1" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;"
                xml:space="preserve">
                <style type="text/css">

                </style>
                <path class="st0"
                    d="M46.5,60.4H17.5c-4.4,0-8-3.6-8-8V11.6c0-4.4,3.6-8,8-8h29.1c4.4,0,8,3.6,8,8v40.8  C54.5,56.8,50.9,60.4,46.5,60.4z" />
                <path class="st1" d="M46.7,43.7" />
                <path class="st1" d="M18.4,43.7" />
                <line class="st1" x1="18.1" y1="43.7" x2="46.5" y2="43.7" />
                <line class="st1" x1="18.1" y1="50.7" x2="46.5" y2="50.7" />
                <line class="st1" x1="18.1" y1="36.7" x2="46.5" y2="36.7" />
                <path class="st2"
                    d="M44.7,28.6c-2.2,0-4.2-0.8-5.8-2.4c-1.5-1.5-2.4-3.6-2.4-5.8c0-2.2,0.8-4.2,2.4-5.8L52.1,2.5   c1.2-1.2,2.8-1.9,4.6-1.9c1.7,0,3.4,0.7,4.6,1.9c2.5,2.5,2.5,6.7,0,9.2L49.8,22.4c-1.9,1.9-5,1.9-6.9,0c-0.9-0.9-1.4-2.2-1.4-3.5   c0-1.3,0.5-2.5,1.4-3.5l0,0l6.4-5.5c0.3-0.3,0.9-0.3,1.2,0.1c0.3,0.3,0.3,0.9-0.1,1.2l-6.4,5.5c-0.6,0.6-0.9,1.4-0.9,2.3   c0,0.9,0.3,1.7,0.9,2.3c1.3,1.3,3.3,1.3,4.6,0l11.6-10.6c1.9-1.9,1.9-4.9,0-6.8c-0.9-0.9-2.1-1.4-3.4-1.4c-1.3,0-2.5,0.5-3.4,1.4   L40.2,15.9c-1.2,1.2-1.9,2.8-1.9,4.6c0,1.7,0.7,3.4,1.9,4.6c1.2,1.2,2.8,1.9,4.6,1.9c1.7,0,3.4-0.7,4.6-1.9l11.8-11   c0.3-0.3,0.9-0.3,1.2,0c0.3,0.3,0.3,0.9,0,1.2l-11.8,11C49,27.8,46.9,28.6,44.7,28.6z" />
                <path class="st0"
                    d="M29.2,30.2h-8.9c-1.2,0-2.1-1-2.1-2.1v-9.6c0-1.2,1-2.1,2.1-2.1h8.9c1.2,0,2.1,1,2.1,2.1v9.6  C31.3,29.3,30.3,30.2,29.2,30.2z" />
                <line class="st3" x1="54.5" y1="25.1" x2="54.5" y2="19.3" />
            </svg>
        </div>
        <div class="file-name"></div>
    </div>
  </div>
      `,n=document.createElement("template");n.innerHTML=t,e.appendChild(n.content.cloneNode(!0)),l(this,s,{componentWrapper:e.querySelector(".jb-file-input-web-component"),placeholderWrapper:e.querySelector(".placeholder-wrapper"),virtualInput:m(this,p,F).call(this),placeholderTitle:e.querySelector(".placeholder-title"),fileNameWrapper:e.querySelector(".file-wrapper .file-name")})}initProp(){this.setStatus("empty"),l(this,o,null),l(this,d,!1)}registerEventListener(){i(this,s).placeholderWrapper.addEventListener("click",this.openFileSelector.bind(this))}openFileSelector(){i(this,s).virtualInput.click()}static get observedAttributes(){return["required","placeholder-title","accept"]}attributeChangedCallback(e,t,n){this.onAttributeChange(e,n)}onAttributeChange(e,t){switch(e){case"required":t==""||t=="true"?(l(this,d,!0),i(this,c).ariaRequired="true"):(l(this,d,!1),i(this,c).ariaRequired="false");break;case"placeholder-title":i(this,s).placeholderTitle.innerHTML=t,i(this,c).ariaPlaceholder=t;break;case"accept":this.acceptTypes=t}}setStatus(e){i(this,s).componentWrapper.setAttribute("status",e),l(this,y,e)}showValidationError(e){i(this,s).componentWrapper.classList.add("--has-error")}clearValidationError(){i(this,s).componentWrapper.classList.remove("--has-error")}resetValue(){l(this,o,null),this.setStatus("empty"),i(this,s).virtualInput.value=""}_triggerOnChangeEvent(){const e=new Event("change");this.dispatchEvent(e)}checkValidity(){const e=i(this,u).checkValiditySync({showError:!1});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}reportValidity(){const e=i(this,u).checkValiditySync({showError:!0});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}get validationMessage(){return i(this,c).validationMessage}},o=new WeakMap,s=new WeakMap,d=new WeakMap,c=new WeakMap,y=new WeakMap,f=new WeakMap,u=new WeakMap,v=new WeakMap,p=new WeakSet,F=function(){const e=document.createElement("input");return e.type="file",e.accept=this.acceptTypes,e.addEventListener("change",t=>m(this,p,I).call(this,t)),e},I=function(e){const t=e.target;if(t.files&&t.files.length>0){const n=t.files[0];l(this,o,n),i(this,s).fileNameWrapper.innerHTML=n.name,this.setStatus("selected"),this._triggerOnChangeEvent()}i(this,u).checkValiditySync({showError:!0})},W=function(){const e=[];if(i(this,d)){const t=V.get(E,"requiredMessage");e.push({validator:({file:n})=>n!==null,message:t,stateType:"valueMissing"})}return e},R=function(e){if(e.isAllValid)i(this,c).setValidity({},"");else{const t={};let n="";e.validationList.forEach(b=>{b.isValid||(b.validation.stateType&&(t[b.validation.stateType]=!0),n==""&&(n=b.message))}),i(this,c).setValidity(t,n)}},T);customElements.get("jb-file-input")||window.customElements.define("jb-file-input",O);let z=h.forwardRef((r,e)=>{let t=h.useRef(null);return h.useImperativeHandle(e,()=>t?t.current:void 0,[t]),h.useEffect(()=>{t.current&&r.acceptTypes&&(t.current.acceptTypes=r.acceptTypes)},[r.acceptTypes]),h.useEffect(()=>{t.current&&r.placeholderTitle&&t.current.setAttribute("placeholder-title",r.placeholderTitle)},[r.placeholderTitle]),h.useEffect(()=>{t.current&&r.required&&t.current.setAttribute("required",r.required?"true":"false")},[r.required]),j(t,"load",r.onLoad,!0),j(t,"init",r.onInit,!0),j(t,"change",r.onChange,!0),H.createElement("jb-file-input",{ref:t,class:r.className})});z.displayName="JBFileInput";const U={title:"Components/form elements/JBFileInput",component:z},w={args:{}},g={args:{required:!0,placeholderTitle:"click and open select file then hit the cancel for test"}};var q,C,L;w.parameters={...w.parameters,docs:{...(q=w.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {}
}`,...(L=(C=w.parameters)==null?void 0:C.docs)==null?void 0:L.source}}};var M,S,A;g.parameters={...g.parameters,docs:{...(M=g.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    required: true,
    placeholderTitle: "click and open select file then hit the cancel for test"
  }
}`,...(A=(S=g.parameters)==null?void 0:S.docs)==null?void 0:A.source}}};const X=["Normal","Required"];export{w as Normal,g as Required,X as __namedExportsOrder,U as default};
