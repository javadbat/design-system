var V=Object.defineProperty;var k=e=>{throw TypeError(e)};var P=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var h=(e,t,n)=>P(e,typeof t!="symbol"?t+"":t,n),y=(e,t,n)=>t.has(e)||k("Cannot "+n);var u=(e,t,n)=>(y(e,t,"read from private field"),n?n.call(e):t.get(e)),g=(e,t,n)=>t.has(e)?k("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),w=(e,t,n,o)=>(y(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),C=(e,t,n)=>(y(e,t,"access private method"),n);import{R as i,r as l}from"./index-0yr9KlQE.js";import{r as v}from"./index-Dsu68ezD.js";var a=class{constructor(e,t){h(this,"lightness");h(this,"chroma");h(this,"hue");h(this,"variableName");this.variableName=t,this.lightness=e.lightness,this.chroma=e.chroma,this.hue=e.hue}get value(){return`oklch(${this.lightness} ${this.chroma} ${this.hue})`}};function r(e){return new a({lightness:6*(3+1.3*e)*.01,chroma:.001*(14+.09*e),hue:258.36},`--jb-neutral-${e}`)}function T(e){return new a({lightness:e.lightness-.1,chroma:e.chroma-.05,hue:e.hue},`${e.variableName}-pressed`)}function W(e){const t=Math.min(e.lightness+.12*(1-e.lightness),.985),n=e.chroma*(1-.15*(t-e.lightness));return new a({lightness:t,chroma:Number(n.toFixed(3)),hue:e.hue},`${e.variableName}-l`)}function z(e){const t=Math.max(e.lightness-.12*e.lightness,.02),n=e.chroma*(1-.15*(t-e.lightness));return new a({lightness:t,chroma:n,hue:e.hue},`${e.variableName}-d`)}function R(e){const t=Math.min(e.lightness+.65*(1-e.lightness),.93),n=.55*e.chroma*(1-.08*(t-e.lightness)),o=e.hue>=70&&e.hue<=162?5:-3,m=e.hue+o;return new a({lightness:t,chroma:Number(n.toFixed(3)),hue:m},`${e.variableName}-subtle`)}function _(e){const t=Math.max(e.lightness-.35,.22),n=Math.min(1.6*e.chroma,.28);return new a({lightness:Number(t.toFixed(3)),chroma:Number(n.toFixed(3)),hue:e.hue},`${e.variableName}-contrast`)}function p(e){return{main:e,hover:(t=e,new a({lightness:t.lightness+.07,chroma:t.chroma+.07,hue:t.hue},`${t.variableName}-hover`)),pressed:T(e),light:W(e),dark:z(e),subtle:R(e),contrast:_(e)};var t}const F=new a({lightness:.6,chroma:.26,hue:256},"--jb-primary"),H=new a({lightness:.6,chroma:.26,hue:286},"--jb-secondary"),U=new a({lightness:.75,chroma:.18,hue:70},"--jb-yellow"),Y=new a({lightness:.68,chroma:.1484,hue:162.1},"--jb-green"),J=new a({lightness:.6,chroma:.22,hue:23.21},"--jb-red"),O={single:{black:new a({lightness:.14,chroma:0,hue:0},"--jb-black"),white:new a({lightness:1,chroma:0,hue:0},"--jb-white"),highlight:new a({lightness:.93,chroma:.2302,hue:125.18},"--jb-highlight")},neutral:[r(0),r(1),r(2),r(3),r(4),r(5),r(6),r(7),r(8),r(9),r(10)],primary:p(F),secondary:p(H),yellow:p(U),green:p(Y),red:p(J)};function d(e){try{const{value:t,...n}=e;window.CSS.registerProperty({...n}),(function(o,m){try{m&&(document.documentElement.style.getPropertyValue(o)||document.documentElement.style.setProperty(o,m))}catch{}})(e.name,t)}catch{}}function s(e,t){d({name:t??e.variableName,syntax:"<color>",inherits:!0,initialValue:e.value})}function K(){var e;d({name:"--jb-radius",inherits:!0,value:"1rem",initialValue:"16px",syntax:"<length-percentage>"}),d({name:"--jb-radius-xs",inherits:!0,value:"0.5rem",initialValue:"8px",syntax:"<length-percentage>"}),d({name:"--jb-radius-sm",inherits:!0,value:"0.75rem",initialValue:"12px",syntax:"<length-percentage>"}),d({name:"--jb-radius-lg",inherits:!0,value:"1.25rem",initialValue:"20px",syntax:"<length-percentage>"}),d({name:"--jb-radius-xl",inherits:!0,value:"1.5rem",initialValue:"24px",syntax:"<length-percentage>"}),(function(t){s(t.neutral[0],"--jb-neutral"),s(t.primary.main),s(t.secondary.main),s(t.single.black),s(t.single.white),s(t.single.highlight),s(t.yellow.main),s(t.green.main),s(t.red.main),s(t.red.main);for(let n=1;n<=10;n++)s(t.neutral[n])})(O),s((e=O).single.black,"--jb-text-primary"),s(e.neutral[7],"--jb-text-secondary"),s(e.single.white,"--jb-text-contrast")}var c,b,j,A,N,q=(N=class extends HTMLElement{constructor(){super();g(this,j);g(this,c,!1);g(this,b,"");h(this,"elements");h(this,"config",{autoCloseOnBackgroundClick:!1});this.initWebComponent()}get id(){const t=this.getAttribute("id")||"";return u(this,b)||t}set id(t){w(this,b,t),this.checkInitialOpenness()}get isOpen(){return u(this,c)}connectedCallback(){this.callOnLoadEvent(),this.initProp(),this.callOnInitEvent()}callOnLoadEvent(){const t=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(t)}callOnInitEvent(){const t=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(t)}initWebComponent(){const t=this.attachShadow({mode:"open"});K();const n=document.createElement("template");n.innerHTML=`<style>:host{--z-index: var(--jb-modal-z-index, 1);--border-radius:var(--jb-modal-border-radius, var(--jb-radius-xl));--back-bg-color:var(--jb-modal-back-bg-color, oklch(from var(--jb-white) l c h / 0.1));--bg-color:var(--jb-modal-bg-color, var(--jb-white))}.jb-modal-web-component{position:fixed;top:0;left:0;z-index:var(--z-index);width:100%;height:100%}.jb-modal-web-component.--closed{display:none}@media(min-width: 320px)and (max-width: 767px){.jb-modal-web-component.--closed .modal-content-wrapper{transform:translateY(100%)}}.jb-modal-web-component.--opened{display:block}@media(min-width: 320px)and (max-width: 767px){.jb-modal-web-component.--opened .modal-content-wrapper{animation-name:swipe-up;animation-duration:.3s;animation-delay:0s;animation-iteration-count:1;animation-timing-function:ease}}@keyframes swipe-up{0%{transform:translateY(100%)}100%{transform:translateY(0%)}}.jb-modal-web-component .modal-background{position:absolute;top:0;left:0;background-color:var(--back-bg-color);backdrop-filter:blur(10px);z-index:2;width:100%;height:100%}.jb-modal-web-component .modal-content-wrapper{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;display:flex;align-items:center;justify-content:center;pointer-events:none}@media(min-width: 320px)and (max-width: 767px){.jb-modal-web-component .modal-content-wrapper{bottom:0;top:initial;align-items:flex-end}}.jb-modal-web-component .modal-content-wrapper .modal-content{pointer-events:all;width:auto;height:auto;background-color:var(--bg-color);border-radius:var(--border-radius)}@media(min-width: 320px)and (max-width: 767px){.jb-modal-web-component .modal-content-wrapper .modal-content{width:100%;height:auto;max-height:calc(100% - 80px);min-height:32px;border-radius:var(--border-radius) var(--border-radius) 0 0;overflow-y:auto}}</style>

  <div class="jb-modal-web-component --closed">
    <div class="modal-background"></div>
    <div class="modal-content-wrapper">
        <div class="modal-content">
            <slot name="content"></slot>
        </div>
    </div>
  </div>
  `,t.appendChild(n.content.cloneNode(!0)),this.elements={componentWrapper:t.querySelector(".jb-modal-web-component"),background:t.querySelector(".modal-background")}}registerEventListener(){this.elements.background.addEventListener("click",this.onBackgroundClick.bind(this)),window.addEventListener("popstate",C(this,j,A).bind(this))}initProp(){this.registerEventListener()}checkInitialOpenness(){window.location.hash==`#${this.id}`&&(this.triggerUrlOpenEvent(),this.open())}triggerUrlOpenEvent(){const t=new CustomEvent("urlOpen",{bubbles:!0,composed:!0});this.dispatchEvent(t)}static get observedAttributes(){return["is-open","id"]}attributeChangedCallback(t,n,o){this.onAttributeChange(t,o)}onAttributeChange(t,n){switch(t){case"is-open":n=="true"?u(this,c)||this.open():u(this,c)&&this.close();break;case"id":this.id=n}}onBackgroundClick(){this.dispatchCloseEvent("BACKGROUND_CLICK"),this.config.autoCloseOnBackgroundClick&&this.close()}dispatchCloseEvent(t){const n=new CustomEvent("close",{detail:{eventType:t}});this.dispatchEvent(n)}close(){w(this,c,!1),this.elements.componentWrapper.classList.remove("--opened"),this.elements.componentWrapper.classList.add("--closed");const t=window.history;window.location.hash==`#${this.id}`&&t.go(-1)}open(){if(w(this,c,!0),this.elements.componentWrapper.classList.remove("--closed"),this.elements.componentWrapper.classList.add("--opened"),this.id){const t=window.history;window.location.hash!=`#${this.id}`&&t.pushState({JBModal:{}},"",`#${this.id}`)}}},c=new WeakMap,b=new WeakMap,j=new WeakSet,A=function(){this.isOpen&&(this.dispatchCloseEvent("HISTORY_BACK_EVENT"),this.config.autoCloseOnBackgroundClick&&this.close())},N);!customElements.get("jb-modal")&&window.customElements.define("jb-modal",q);let E=i.forwardRef((e,t)=>{let n=l.useRef(null),[o,m]=l.useState(0);return l.useImperativeHandle(t,()=>n?n.current:{},[n]),l.useEffect(()=>{m(o+1)},[n.current]),l.useEffect(()=>{n.current&&(e.isOpen==!0?n.current.open():n.current.close())},[e.isOpen]),l.useEffect(()=>{n.current&&(n.current.id=e.id)},[e.id]),v(n,"load",e.onLoad,!0),v(n,"init",e.onInit,!0),v(n,"close",e.onClose),v(n,"urlOpen",e.onUrlOpen),i.createElement("jb-modal",{ref:n,class:e.className?e.className:""},i.createElement("div",{slot:"content"},e.children))});E.displayName="JBModal";const D="test long string ".repeat(200);function G(){const[e,t]=l.useState(!1),[n,o]=l.useState(!1);return i.createElement("div",{className:"normal-page"},i.createElement("div",{className:"button-wrapper"},i.createElement("button",{onClick:()=>t(!0)},"open"),i.createElement(E,{isOpen:e,onClose:()=>{t(!1)}},i.createElement("div",{className:"modal-test-content"},"salam")),i.createElement("button",{onClick:()=>o(!0)},"open long  txt modal"),i.createElement(E,{isOpen:n,onClose:()=>{o(!1)}},i.createElement("div",{className:"modal-test-content"},D))))}const te={title:"Components/JBModal",component:E},f={args:{isOpen:!0}},x={render:()=>i.createElement(G,null)};var $,L,S;f.parameters={...f.parameters,docs:{...($=f.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    isOpen: true
  }
}`,...(S=(L=f.parameters)==null?void 0:L.docs)==null?void 0:S.source}}};var B,I,M;x.parameters={...x.parameters,docs:{...(B=x.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: () => <NormalP></NormalP>
}`,...(M=(I=x.parameters)==null?void 0:I.docs)==null?void 0:M.source}}};const ne=["Normal","ActionTest"];export{x as ActionTest,f as Normal,ne as __namedExportsOrder,te as default};
