var x=n=>{throw TypeError(n)};var f=(n,e,t)=>e.has(n)||x("Cannot "+t);var o=(n,e,t)=>(f(n,e,"read from private field"),t?t.call(n):e.get(n)),s=(n,e,t)=>e.has(n)?x("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),d=(n,e,t,p)=>(f(n,e,"write to private field"),p?p.call(n,t):e.set(n,t),t),a=(n,e,t)=>(f(n,e,"access private method"),t);import{a as b}from"./index-Bg4fOAbC.js";import{N as L}from"./index-bfIR6bpK.js";var l,v,u,r,k,E,i,c,C,m,h,w,g,j,y,W=(y=class extends HTMLElement{constructor(){super();s(this,r);s(this,l,!1);s(this,v,Symbol());s(this,u,!0);s(this,i);s(this,c,null);s(this,h,e=>{this.isOpen&&b()&&(this.close(),a(this,r,E).call(this,"HISTORY_BACK_EVENT"))});s(this,w,()=>{this.overflowHandler=="SLIDE"&&(this.elements.contentWrapper.style.transform="translateY(0px)")});s(this,g,()=>{if(this.overflowHandler=="SLIDE"){const e=this.elements.contentWrapper.getBoundingClientRect(),t=a(this,r,j).call(this)-e.bottom;t<0&&(this.elements.contentWrapper.style.transform=`translateY(${t}px)`)}});this.overflowHandler="NONE",this.overflowDom=null,this.initWebComponent()}get JBID(){return o(this,v)}get isOpen(){return o(this,l)}get PopoverHashPath(){return this.id?`#${this.id}`:null}connectedCallback(){this.callOnLoadEvent(),a(this,r,k).call(this),this.callOnInitEvent()}disconnectedCallback(){window.removeEventListener("popstate",o(this,h))}callOnLoadEvent(){const e=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(e)}callOnInitEvent(){const e=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(e)}initWebComponent(){const e=this.attachShadow({mode:"open"});L();const t=document.createElement("template");t.innerHTML=`<style>:host{width:max-content;display:block}@media (max-width:30rem){:host{width:100vw}}.jb-popover-web-component{z-index:var(--jb-popover-z-index,10);will-change:opacity;opacity:1;width:inherit;transition:opacity .2s;display:none;position:absolute;inset-block-start:var(--inset-block-start);inset-inline-start:0}@media (max-width:30rem){.jb-popover-web-component{inset-block-start:0;inset-inline-start:0;background-color:var(--back-bg-color);backdrop-filter:blur(5px);grid-template:"."1fr"content-wrapper"/1fr;width:100vw;height:100dvh;display:none;position:fixed;bottom:0;overflow:hidden}}.jb-popover-web-component.--opened{display:grid}@starting-style{.jb-popover-web-component{opacity:0}}.jb-popover-web-component .popover-content-wrapper{background-color:var(--bg-color);border-radius:var(--border-radius);box-sizing:border-box;will-change:transform;grid-template-columns:minmax(0,1fr);justify-content:center;align-items:center;padding:16px;transition:transform .3s;display:grid;transform:translateY(0%);box-shadow:12px 12px 16px #00000040,-8px -8px 12px #ffffff4d}@media (max-width:30rem){.jb-popover-web-component .popover-content-wrapper{border-radius:var(--border-radius) var(--border-radius) 0 0;grid-area:content-wrapper;padding:2rem 0}@starting-style{.jb-popover-web-component .popover-content-wrapper{transform:translateY(100%)}}} :host{--border-radius:var(--jb-popover-border-radius,var(--jb-radius-xl));--inset-block-start:var(--jb-popover-top,4rem);--back-bg-color:var(--jb-popover-back-bg-color,oklch(from var(--jb-black) l c h / .5));--bg-color:var(--jb-popover-bg-color,#fff)}</style>

  <div class="jb-popover-web-component">
    <div class="popover-background"></div>
    <div class="popover-content-wrapper" part="content">
        <slot></slot>
    </div>
  </div>
  `,e.appendChild(t.content.cloneNode(!0)),this.elements={componentWrapper:e.querySelector(".jb-popover-web-component"),background:e.querySelector(".popover-background"),contentWrapper:e.querySelector(".popover-content-wrapper")}}checkInitialOpenness(){window.location.hash==`#${this.id}`&&(this.triggerUrlOpenEvent(),this.open())}triggerUrlOpenEvent(){const e=new CustomEvent("urlOpen",{bubbles:!0,composed:!0});this.dispatchEvent(e)}static get observedAttributes(){return["is-open","id"]}attributeChangedCallback(e,t,p){this.onAttributeChange(e,p)}onAttributeChange(e,t){switch(e){case"is-open":t=="true"?o(this,l)||this.open():o(this,l)&&this.close();break;case"id":this.id=t}}onBackgroundClick(){a(this,r,E).call(this,"BACKGROUND_CLICK"),o(this,u)&&this.close()}close(){var e;d(this,l,!1),(e=o(this,c))==null||e.abort(),d(this,c,null),this.elements.componentWrapper.classList.remove("--opened"),this.elements.componentWrapper.classList.add("--closed"),window.history.state=="jb-popover-open"&&this.PopoverHashPath!==null&&(window.removeEventListener("popstate",o(this,h)),window.location.hash==this.PopoverHashPath&&history.go(-1))}open(){d(this,l,!0),a(this,r,m).call(this),a(this,r,C).call(this),this.elements.componentWrapper.classList.remove("--closed"),this.elements.componentWrapper.classList.add("--opened"),b()&&this.PopoverHashPath!==null&&(window.history.pushState("jb-popover-open","",this.PopoverHashPath),window.addEventListener("popstate",o(this,h),{once:!0}))}bindTarget(e){d(this,i,e),a(this,r,m).call(this)}},l=new WeakMap,v=new WeakMap,u=new WeakMap,r=new WeakSet,k=function(){this.elements.background.addEventListener("click",this.onBackgroundClick.bind(this)),this.elements.contentWrapper.addEventListener("mouseenter",o(this,g)),this.elements.contentWrapper.addEventListener("mouseleave",o(this,w))},E=function(e){const t=new CustomEvent("close",{detail:{eventType:e}});this.dispatchEvent(t)},i=new WeakMap,c=new WeakMap,C=function(){if(!o(this,i)||b())return;let e=o(this,i).getBoundingClientRect();const t=()=>{const p=o(this,i).getBoundingClientRect();e.x===p.x&&e.y===p.y||(a(this,r,m).call(this),e=p)};d(this,c,new AbortController),window.addEventListener("scroll",t,{signal:o(this,c).signal,passive:!0}),window.addEventListener("resize",t,{signal:o(this,c).signal,passive:!0})},m=function(){if(o(this,i)&&!b()){const e=o(this,i).getBoundingClientRect(),t=getComputedStyle(o(this,i)).direction;this.elements.componentWrapper.style.position="fixed",this.elements.componentWrapper.style.top=`${e.bottom}px`,this.elements.componentWrapper.style.insetInlineStart=t=="ltr"?`${e.left}px`:window.innerWidth-e.right+"px"}},h=new WeakMap,w=new WeakMap,g=new WeakMap,j=function(){return this.overflowDom?this.overflowDom.getBoundingClientRect().bottom:window.innerHeight},y);customElements.get("jb-popover")||window.customElements.define("jb-popover",W);export{W as o};
