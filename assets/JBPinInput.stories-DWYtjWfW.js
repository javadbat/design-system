var Ve=Object.defineProperty;var z=i=>{throw TypeError(i)};var Ae=(i,o,e)=>o in i?Ve(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e;var T=(i,o,e)=>Ae(i,typeof o!="symbol"?o+"":o,e),D=(i,o,e)=>o.has(i)||z("Cannot "+e);var u=(i,o,e)=>(D(i,o,"read from private field"),e?e.call(i):o.get(i)),m=(i,o,e)=>o.has(i)?z("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(i):o.set(i,e),v=(i,o,e,t)=>(D(i,o,"write to private field"),t?t.call(i,e):o.set(i,e),e),l=(i,o,e)=>(D(i,o,"access private method"),e);import{R as s,r as d}from"./index-0yr9KlQE.js";import{e as Ke}from"./jb-validation-BFHHOeHY.js";import{j as Se}from"./index-C1o-zhIV.js";import{r as b}from"./index-Dsu68ezD.js";var h,x,L,C,r,ce,W,k,f,M,j,de,y,he,me,I,be,ge,ve,fe,Ee,we,ye,je,xe,Le,N,Ce,ke,H,qe=(H=class extends HTMLElement{constructor(){super();m(this,r);T(this,"elements");m(this,h);m(this,x,!0);m(this,L,!1);m(this,C,!1);m(this,k,6);m(this,f,new Ke({clearValidationError:this.clearValidationError.bind(this),showValidationError:this.showValidationError.bind(this),getValue:()=>this.value,getValueString:()=>this.value,setValidationResult:l(this,r,Ce).bind(this),getValidations:l(this,r,ke).bind(this)}));T(this,"initialValue","");m(this,y,!1);m(this,I,"");typeof this.attachInternals=="function"&&v(this,h,this.attachInternals()),this.initWebComponent()}static get formAssociated(){return!0}get emptyChar(){return"-"}get disabled(){return u(this,L)}set disabled(e){var t,n;v(this,L,e),this.elements.inputs.forEach(p=>p.disabled=e),e?(t=u(this,h).states)==null||t.add("disabled"):(n=u(this,h).states)==null||n.delete("disabled")}set required(e){v(this,C,e),l(this,r,N).call(this,!1)}get required(){return u(this,C)}get value(){return l(this,r,ce).call(this,this.emptyChar)}set value(e){const t=l(this,r,M).call(this,e);l(this,r,W).call(this,t)}get charLength(){return u(this,k)}set charLength(e){v(this,k,e),this.initInputsDom()}get validation(){return u(this,f)}get isDirty(){return this.value!==this.initialValue}get name(){return this.getAttribute("name")||""}connectedCallback(){this.callOnLoadEvent(),this.initProp(),this.callOnInitEvent()}callOnLoadEvent(){const e=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(e)}callOnInitEvent(){const e=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(e)}initWebComponent(){const e=this.attachShadow({mode:"open",delegatesFocus:!0});Se();const t=document.createElement("template");t.innerHTML=`<style>:host(:focus),:host(:focus-visible){outline:none}.jb-pin-input-web-component .inputs-wrapper{width:var(--jb-pin-input-inputs-wrapper-width,100%);direction:ltr;justify-content:center;align-items:center;gap:8px;display:flex}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper{border:var(--jb-pin-input-wrapper-border-width,0)var(--jb-pin-input-wrapper-border-style,solid)var(--wrapper-border-color);border-radius:var(--wrapper-border-radius)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input{color:var(--pin-color);box-sizing:border-box;width:100%;min-width:8px;height:var(--jb-pin-input-pin-height,40px);text-align:center;font-family:inherit;font-size:var(--jb-pin-input-pin-font-size,24px);font-weight:var(--jb-pin-input-pin-font-weight,900);background-color:#0000;border:none}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input:focus{outline:none}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input-shape{background-color:var(--bottom-line-color);border-radius:var(--bottom-line-border-radius);width:100%;height:var(--jb-pin-input-bottom-line-height,4px);display:var(--jb-pin-input-bottom-line-display,block)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper:focus-within{border-color:var(--border-color-active);box-shadow:var(--jb-pin-input-wrapper-box-shadow,none)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper:focus-within .pin-input-shape{background-color:var(--bottom-line-color-active)}.jb-pin-input-web-component .message-box{font-size:var(--jb-pin-input-message-font-size,.7rem);color:var(--message-color);display:var(--jb-pin-input-message-box-display,block);padding:4px 0}.jb-pin-input-web-component .message-box:empty{padding:0}.jb-pin-input-web-component .message-box.error{color:var(--message-error-color)} :host{--wrapper-border-radius:var(--jb-pin-input-wrapper-border-radius,var(--jb-radius));--bottom-line-border-radius:var(--jb-pin-input-bottom-line-border-radius,var(--jb-radius));--wrapper-border-color:var(--jb-pin-input-wrapper-border-color,var(--jb-neutral));--pin-color:var(--jb-pin-input-pin-color,var(--jb-text-primary));--bottom-line-color:var(--jb-pin-input-bottom-line-color,var(--jb-neutral-8));--border-color-active:var(--jb-pin-input-wrapper-border-color-active,var(--jb-primary));--bottom-line-color-active:var(--jb-pin-input-bottom-line-color-active,var(--jb-primary));--message-color:var(--jb-pin-input-message-color,var(--jb-text-secondary));--message-error-color:var(--jb-pin-input-message-error-color,var(--jb-red))}</style>

  <div class="jb-pin-input-web-component">
    <div class="inputs-wrapper">
    </div>
    <div class="message-box" part="message"></div>
  </div>
  `,e.appendChild(t.content.cloneNode(!0)),this.elements={inputsWrapper:e.querySelector(".inputs-wrapper"),inputs:[],messageBox:e.querySelector(".message-box")}}registerEventListener(){}initProp(){this.initInputsDom(),this.registerEventListener()}static get observedAttributes(){return["autofocus","char-length","required","message","error"]}attributeChangedCallback(e,t,n){this.onAttributeChange(e,n)}onAttributeChange(e,t){switch(e){case"autofocus":t=="true"&&this.elements.inputs[0]&&this.elements.inputs[0].focus();break;case"char-length":Number.isInteger(Number(t))&&(this.charLength=Number(t));break;case"message":this.elements.messageBox.classList.contains("error")||(this.elements.messageBox.innerHTML=t);break;case"error":this.reportValidity()}}initInputsDom(){const e=this.createInputs();this.elements.inputs=e.map(t=>t.querySelector(".pin-input")),this.elements.inputsWrapper.innerHTML="",e.forEach(t=>{this.elements.inputsWrapper.appendChild(t)}),this.getAttribute("autofocus")=="true"&&this.elements.inputs[0]&&this.elements.inputs[0].focus()}createInputs(){const e=[];for(let t=0;t<this.charLength;t++){const n=this.createInput(t);e.push(n)}return e}createInput(e){const t=document.createElement("div");t.classList.add("pin-input-wrapper");const n=document.createElement("input");n.classList.add("pin-input"),n.addEventListener("keypress",l(this,r,ge).bind(this)),n.addEventListener("keyup",l(this,r,je).bind(this)),n.addEventListener("beforeinput",l(this,r,we).bind(this)),n.addEventListener("blur",l(this,r,me).bind(this)),n.addEventListener("focus",l(this,r,he).bind(this)),n.addEventListener("input",a=>l(this,r,ve).call(this,a),{passive:!0}),n.addEventListener("paste",l(this,r,de).bind(this)),n.setAttribute("inputmode","numeric"),n.setAttribute("pattern","[0-9]*");const p=document.createElement("div");return p.classList.add("pin-input-shape"),t.appendChild(n),t.appendChild(p),t.setAttribute("data-pin-index",e.toString()),t}onInputKeyDown(e){const t={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which},n=new KeyboardEvent("keydown",t);this.dispatchEvent(n)}showValidationError(e){const t=typeof e=="string"?e:e.message;this.elements.messageBox.innerHTML=t,this.elements.messageBox.classList.add("error")}clearValidationError(){const e=this.getAttribute("message")||"";this.elements.messageBox.innerHTML=e,this.elements.messageBox.classList.remove("error")}get isAutoValidationDisabled(){return this.getAttribute("disable-auto-validation")===""||this.getAttribute("disable-auto-validation")==="true"}checkValidity(){const e=u(this,f).checkValiditySync({showError:!1});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}reportValidity(){const e=u(this,f).checkValiditySync({showError:!0});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}get validationMessage(){return u(this,h).validationMessage}focus(){var t;const e=this.elements.inputs.find(n=>n.value=="");e?e.focus():(t=this.elements.inputs[this.elements.inputs.length-1])==null||t.focus()}},h=new WeakMap,x=new WeakMap,L=new WeakMap,C=new WeakMap,r=new WeakSet,ce=function(e){const t=this.elements.inputs.map(n=>n.value||e).join("");return l(this,r,M).call(this,t)},W=function(e){this.elements.inputs.forEach((t,n)=>{Number.isNaN(e[n])||e[n]===""||e[n]==this.emptyChar||e[n]==null||e[n]==null?t.value="":t.value=e[n]}),u(this,h)&&typeof u(this,h).setFormValue=="function"&&u(this,h).setFormValue(e)},k=new WeakMap,f=new WeakMap,M=function(e){let t=e;return u(this,x)&&(t=l(this,r,j).call(this,t)),t},j=function(e){let t=e;return u(this,x)&&typeof e=="string"&&(t=e.replace(/\u06F0/g,"0").replace(/\u06F1/g,"1").replace(/\u06F2/g,"2").replace(/\u06F3/g,"3").replace(/\u06F4/g,"4").replace(/\u06F5/g,"5").replace(/\u06F6/g,"6").replace(/\u06F7/g,"7").replace(/\u06F8/g,"8").replace(/\u06F9/g,"9")),t},de=function(e){e.preventDefault();let t=e.clipboardData.getData("text");const n=Number(e.target.parentElement.dataset.pinIndex),p=new RegExp(`(.*\\D|^)(?<pin>[0-9]{${this.charLength}})(\\D.*|$)`);t=l(this,r,j).call(this,t);const a=p.exec(t);let c="";if(a&&a.groups&&a.groups.pin){c=a.groups.pin,l(this,r,W).call(this,c);const g=this.value.length;this.value.length>0&&this.elements.inputs[g-1].focus()}else{const g=t.match(`[0-9]{1,${this.charLength}}`);if(g){const P=g[0],R=[...this.value],Ie=Math.min(this.charLength-n,P.length);let E;for(E=0;E<Ie;E++)R[n+E]=P[E];this.elements.inputs[E].focus(),this.value=R.join("")}}},y=new WeakMap,he=function(e){u(this,y)?v(this,y,!1):v(this,I,this.value)},me=function(e){const t=e.relatedTarget;this.elements.inputs.includes(t)||l(this,r,be).call(this)},I=new WeakMap,be=function(){l(this,r,N).call(this,!0),this.value!==u(this,I)&&l(this,r,Le).call(this)},ge=function(e){const t={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,detail:e.detail,isComposing:e.isComposing,location:e.location,metaKey:e.metaKey,view:e.view,repeat:e.repeat},n=new KeyboardEvent("keypress",t);this.dispatchEvent(n)},ve=function(e){const t=e.target,n=parseInt(t.parentElement.dataset.pinIndex);let p=n;const a=l(this,r,j).call(this,e.target.value),c=!(n+1<this.charLength);if(/[0-9]+/g.test(a)&&(p=c?this.charLength-1:n+1),n!==p){const g=this.elements.inputs[p];v(this,y,!0),g.focus()}l(this,r,Ee).call(this,e),l(this,r,N).call(this,!1).then(g=>{e.inputType!=="deleteContentBackward"&&c&&g.isAllValid&&l(this,r,fe).call(this)})},fe=function(){const e=new CustomEvent("complete",{bubbles:!0,composed:!0,cancelable:!1});this.dispatchEvent(e)},Ee=function(e){const t=new InputEvent("input",{cancelable:!1});this.dispatchEvent(t)},we=function(e){const t=e.target,n=e.data,p=l(this,r,j).call(this,n);if(/[0-9]+/g.test(p))t.value.length>0&&(t.value="");else if(e.inputType==="deleteContentBackward"){if(t.value==""){const a=parseInt(t.parentElement.dataset.pinIndex),c=a==0?0:a-1;this.elements.inputs[c].focus()}}else e.preventDefault();l(this,r,ye).call(this,e)},ye=function(e){const t=new InputEvent("beforeinput",{cancelable:!1});this.dispatchEvent(t)},je=function(e){const t=e.target,n=parseInt(t.parentElement.dataset.pinIndex);let p=n;switch(e.keyCode){case 39:p=n+1<this.charLength?n+1:this.charLength-1;break;case 37:p=n>0?n-1:0}p!==n&&this.elements.inputs[p].focus();const a={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which},c=new KeyboardEvent("keyup",a);this.dispatchEvent(c),e.keyCode==13&&l(this,r,xe).call(this)},xe=function(){const e=new CustomEvent("enter");this.dispatchEvent(e)},Le=function(){const e=new Event("change",{cancelable:!1,bubbles:!0,composed:!0});this.dispatchEvent(e)},N=function(e){if(!this.isAutoValidationDisabled)return u(this,f).checkValidity({showError:e})},Ce=function(e){if(e.isAllValid)u(this,h).setValidity({},"");else{const t={};let n="";e.validationList.forEach(p=>{p.isValid||(p.validation.stateType&&(t[p.validation.stateType]=!0),n==""&&(n=p.message))}),u(this,h).setValidity(t,n)}},ke=function(){const e=[];return this.getAttribute("error")!==null&&this.getAttribute("error").trim().length>0&&e.push({validator:void 0,message:this.getAttribute("error"),stateType:"customError"}),this.required&&e.push({validator:t=>t.length==this.charLength&&!t.includes(this.emptyChar),message:"میبایست کامل وارد شود",stateType:"valueMissing"}),e},H);customElements.get("jb-pin-input")||window.customElements.define("jb-pin-input",qe);let w=s.forwardRef((i,o)=>{var e;let t=d.useRef(null),[n,p]=d.useState(0);return d.useImperativeHandle(o,()=>t?t.current:void 0,[t]),d.useEffect(()=>{p(n+1)},[t.current]),d.useEffect(()=>{let a=e.value;(e.value==null||e.value===void 0)&&(a=""),t.current&&(t.current.value=(a==null?void 0:a.toString())||"")},[(e=i).value]),d.useEffect(()=>{t&&t.current&&(t.current.validation.list=e.validationList||[])},[e.validationList]),d.useEffect(()=>{var a;typeof e.disabled=="boolean"&&((a=t.current)==null||a.setAttribute("disabled",`${e.disabled}`))},[e.disabled]),d.useEffect(()=>{typeof e.charLength=="number"&&t.current&&(t.current.charLength=e.charLength)},[e.charLength]),d.useEffect(()=>{var a,c;e.inputmode?(a=t.current)==null||a.setAttribute("inputmode",e.inputmode):(c=t.current)==null||c.removeAttribute("inputmode")},[e.inputmode]),d.useEffect(()=>{var a;e.autofocus&&((a=t.current)==null||a.setAttribute("autofocus","true"))},[e.autofocus]),d.useEffect(()=>{t.current&&typeof e.required=="boolean"&&(t.current.required=e.required)},[t,e.required]),d.useEffect(()=>{var a,c;e.error?(a=t==null?void 0:t.current)==null||a.setAttribute("error",e.error):(c=t==null?void 0:t.current)==null||c.removeAttribute("error")},[e.error]),b(t,"change",i.onChange),b(t,"keydown",i.onKeyDown),b(t,"keyup",i.onKeyUp),b(t,"focus",i.onFocus),b(t,"blur",i.onBlur),b(t,"enter",i.onEnter),b(t,"input",i.onInput),b(t,"complete",i.onComplete),b(t,"beforeinput",i.onBeforeInput),s.createElement("jb-pin-input",{ref:t,class:i.className,label:i.label,message:i.message??""},i.children)});w.displayName="JBPinInput";function Be(){return s.createElement("div",{className:"pin-input-test-wrapper"},s.createElement("div",{className:"bottom-line-test"},s.createElement("h1",null,"pin input bottom line style test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null," --jb-pin-input-bottom-line-height:10px;"),s.createElement("p",null," --jb-pin-input-bottom-line-border-radius:0px"),s.createElement("p",null," --jb-pin-input-bottom-line-color:black;"),s.createElement("p",null,"--jb-pin-input-bottom-line-color-active:#ececec;"))),s.createElement("div",{className:"bottom-line-display"},s.createElement("h1",null,"pin input bottom line display test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null," --jb-pin-input-bottom-line-height:10px;"),s.createElement("p",null," --jb-pin-input-bottom-line-border-radius:0px"),s.createElement("p",null," --jb-pin-input-bottom-line-color:black;"),s.createElement("p",null,"--jb-pin-input-bottom-line-color-active:#ececec;"))),s.createElement("div",{className:"input-border-display"},s.createElement("h1",null,"pin input border display test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null,"--jb-pin-input-wrapper-border-width:4px;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-color:black"),s.createElement("p",null,"--jb-pin-input-bottom-line-display:none;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-radius:5px;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-color-active:#ececec;"),s.createElement("p",null,"--jb-pin-input-inputs-wrapper-width:500px;"),s.createElement("p",null,"--jb-pin-input-pin-input-wrapper-height:25px;"),s.createElement("p",null," --jb-pin-input-pin-font-size:16px;"),s.createElement("p",null,"--jb-pin-input-pin-font-weight:600;"),s.createElement("p",null,"--jb-pin-input-wrapper-box-shadow:0px 0px 1px 1px #ececec;"),s.createElement("p",null,"--jb-pin-input-error-message-margin:12px 24px;"))))}const Pe={title:"Components/form elements/JBPinInput",component:w},V={args:{label:"pin input",message:"please fill the pin",value:""}},A={args:{label:"autofocus",autofocus:!0,value:""}},K={args:{label:"8 digit pin",value:"",charLength:8}},S={args:{label:"with error",message:"simple message",error:"error message",value:""}},q={args:{label:"required",required:!0}},B={render:i=>{const o=d.useRef(null),e=[{validator:t=>t.startsWith("1"),message:"pin input must be start with 1"}];return s.createElement("div",{ref:o},s.createElement(w,{...i,ref:o,validationList:e,onComplete:t=>console.log("complete",t),required:!0,onChange:()=>{console.log("change")}}))},args:{label:"will jump on overflow"}},F={render:()=>s.createElement(Be,null)};var J,O,$;V.parameters={...V.parameters,docs:{...(J=V.parameters)==null?void 0:J.docs,source:{originalSource:`{
  args: {
    label: 'pin input',
    message: "please fill the pin",
    value: ""
  }
}`,...($=(O=V.parameters)==null?void 0:O.docs)==null?void 0:$.source}}};var _,U,G;A.parameters={...A.parameters,docs:{...(_=A.parameters)==null?void 0:_.docs,source:{originalSource:`{
  args: {
    label: 'autofocus',
    autofocus: true,
    value: ""
  }
}`,...(G=(U=A.parameters)==null?void 0:U.docs)==null?void 0:G.source}}};var Q,X,Y;K.parameters={...K.parameters,docs:{...(Q=K.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    label: '8 digit pin',
    value: "",
    charLength: 8
  }
}`,...(Y=(X=K.parameters)==null?void 0:X.docs)==null?void 0:Y.source}}};var Z,ee,te;S.parameters={...S.parameters,docs:{...(Z=S.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    label: 'with error',
    message: "simple message",
    error: "error message",
    value: ""
  }
}`,...(te=(ee=S.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var ne,re,ie;q.parameters={...q.parameters,docs:{...(ne=q.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    label: 'required',
    required: true
  }
}`,...(ie=(re=q.parameters)==null?void 0:re.docs)==null?void 0:ie.source}}};var se,ae,oe;B.parameters={...B.parameters,docs:{...(se=B.parameters)==null?void 0:se.docs,source:{originalSource:`{
  render: args => {
    const ref = useRef(null);
    const validationList = [{
      validator: value => {
        return value.startsWith("1");
      },
      message: "pin input must be start with 1"
    }];
    return <div ref={ref}>
          <JBPinInput {...args} ref={ref} validationList={validationList} onComplete={e => console.log("complete", e)} required onChange={() => {
        console.log("change");
      }} />
        </div>;
  },
  args: {
    label: "will jump on overflow"
  }
}`,...(oe=(ae=B.parameters)==null?void 0:ae.docs)==null?void 0:oe.source}}};var le,pe,ue;F.parameters={...F.parameters,docs:{...(le=F.parameters)==null?void 0:le.docs,source:{originalSource:`{
  render: () => <JBPinInputStyleTest></JBPinInputStyleTest>
}`,...(ue=(pe=F.parameters)==null?void 0:pe.docs)==null?void 0:ue.source}}};const Re=["Normal","AutoFocus","charLength","WithError","Required","WithValidation","PinInputStyle"];export{A as AutoFocus,V as Normal,F as PinInputStyle,q as Required,S as WithError,B as WithValidation,Re as __namedExportsOrder,K as charLength,Pe as default};
