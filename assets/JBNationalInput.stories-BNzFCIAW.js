var p=e=>{throw TypeError(e)};var x=(e,t,n)=>t.has(e)||p("Cannot "+n);var f=(e,t,n)=>t.has(e)?p("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var l=(e,t,n)=>(x(e,t,"access private method"),n);import{R as d,r as a}from"./index-0yr9KlQE.js";import{x as B}from"./index-BCJo01lv.js";import"./jb-validation-BFHHOeHY.js";import"./index-DERdVVTI.js";function m(e){return typeof e!="string"?"":e.replace(/[۰-۹]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-1728)})}var o,g,y,A,C,b,S=(b=class extends B{constructor(){super();f(this,o);this.initMobileInputWebComponent()}initMobileInputWebComponent(){const t=document.createElement("template");t.innerHTML="<style>.jb-input-web-component{--jb-input-input-direction: var(--jb-national-input-input-direction, ltr)}</style>",this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.validation.addValidationListGetter(l(this,o,C).bind(this)),l(this,o,y).call(this),this.addStandardValueCallback(l(this,o,g).bind(this))}},o=new WeakSet,g=function(t){let n="",r="";const u=/(?<nationalId>[\u06F0-\u06F90-9]{1,10})/g.exec(t);return n=u&&u.groups?u.groups.nationalId:"",r=m(n),{value:r,displayValue:n}},y=function(){this.elements.input.addEventListener("beforeinput",l(this,o,A).bind(this))},A=function(t){const n=t.data;/[\u06F0-\u06F90-9]{1,10}/g.test(n)||t.inputType=="deleteContentBackward"||t.preventDefault()},C=function(){return[{validator:({value:t})=>function(n){if(n.length===0)return!0;const r=m(n);if(!/^\d{10}$/.test(r))return!1;const u=+r[9],s=r.split("").slice(0,9).reduce((j,L,R)=>j+ +L*(10-R),0)%11;return s<2?u===s:u+s===11}(t),message:"کد ملی وارد شده نامعتبر است"}]},b);!customElements.get("jb-national-input")&&window.customElements.define("jb-national-input",S);function i(e,t,n,r=!1){let u=a.useCallback(s=>{e.current&&typeof n=="function"&&n(s)},[e,n]);a.useEffect(()=>{let s=e.current;return s&&s.addEventListener(t,u,{passive:r,capture:!1}),function(){s&&s.removeEventListener(t,u,{passive:r,capture:!1})}},[e,t,n,r])}function I(e,t){i(e,"enter",t.onEnter),i(e,"input",t.onInput),i(e,"beforeinput",t.onBeforeinput),i(e,"change",t.onChange),i(e,"keydown",t.onKeydown),i(e,"keyup",t.onKeyup),i(e,"focus",t.onFocus),i(e,"blur",t.onBlur)}function N(e,t){a.useEffect(()=>{let n=t.value;(t.value==null||t.value===void 0)&&(n=""),e&&e.current&&e.current&&(e.current.value=(n==null?void 0:n.toString())||"")},[t.value]),a.useEffect(()=>{var n;t.type&&((n=e==null?void 0:e.current)==null||n.setAttribute("type",t.type))},[t.type]),a.useEffect(()=>{var n,r;t.name?(n=e==null?void 0:e.current)==null||n.setAttribute("name",t.name||""):(r=e==null?void 0:e.current)==null||r.removeAttribute("name")},[t.name]),a.useEffect(()=>{e&&e.current&&(e.current.validation.list=t.validationList||[])},[t.validationList]),a.useEffect(()=>{var n;(n=e==null?void 0:e.current)==null||n.setAttribute("label",t.label||"")},[t.label]),a.useEffect(()=>{var n;typeof t.disabled=="boolean"&&((n=e==null?void 0:e.current)==null||n.setAttribute("disabled",`${t.disabled}`))},[t.disabled]),a.useEffect(()=>{var n;typeof t.required=="boolean"&&((n=e==null?void 0:e.current)==null||n.setAttribute("required",`${t.required}`))},[t.required]),a.useEffect(()=>{var n,r;t.inputmode?(n=e.current)==null||n.setAttribute("inputmode",t.inputmode):(r=e.current)==null||r.removeAttribute("inputmode")},[t.inputmode]),a.useEffect(()=>{var n;(n=e==null?void 0:e.current)==null||n.setAttribute("message",t.message||"")},[t.message]),a.useEffect(()=>{var n;(n=e==null?void 0:e.current)==null||n.setAttribute("placeholder",t.placeholder||"")},[t.placeholder]),a.useEffect(()=>{var n,r;t.error?(n=e==null?void 0:e.current)==null||n.setAttribute("error",t.error):(r=e==null?void 0:e.current)==null||r.removeAttribute("error")},[t.error])}a.forwardRef((e,t)=>{let n=a.useRef(null),[r,u]=a.useState(0);return a.useImperativeHandle(t,()=>n?n.current:{},[n]),a.useEffect(()=>{u(r+1)},[n.current]),I(n,e),N(n,e),d.createElement("jb-input",{ref:n,class:e.className},e.children)}).displayName="JBInput";let w=d.forwardRef((e,t)=>{let n=a.useRef(null),[r,u]=a.useState(0);return a.useImperativeHandle(t,()=>n?n.current:{},[n]),a.useEffect(()=>{u(r+1)},[n.current]),N(n,e),I(n,e),d.createElement("jb-national-input",{ref:n,class:e.className?e.className:""},e.children)});w.displayName="JBNationalInput";const M={title:"Components/form elements/Inputs/JBNationalInput",component:w},c={args:{label:"national id",message:"please enter your national code"}};var v,E,h;c.parameters={...c.parameters,docs:{...(v=c.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    label: 'national id',
    message: "please enter your national code"
  }
}`,...(h=(E=c.parameters)==null?void 0:E.docs)==null?void 0:h.source}}};const V=["Normal"];export{c as Normal,V as __namedExportsOrder,M as default};
