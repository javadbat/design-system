var Y=Object.defineProperty;var T=t=>{throw TypeError(t)};var Z=(t,e,a)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var f=(t,e,a)=>Z(t,typeof e!="symbol"?e+"":e,a),$=(t,e,a)=>e.has(t)||T("Cannot "+a);var s=(t,e,a)=>($(t,e,"read from private field"),a?a.call(t):e.get(t)),p=(t,e,a)=>e.has(t)?T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),d=(t,e,a,r)=>($(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),n=(t,e,a)=>($(t,e,"access private method"),a);import{R as H,r as v}from"./index-0yr9KlQE.js";import{e as _}from"./jb-validation-BFHHOeHY.js";import{n as ee,t as L}from"./index-DERdVVTI.js";import{r as m}from"./index-Dsu68ezD.js";var c=class{constructor(t,e){f(this,"lightness");f(this,"chroma");f(this,"hue");f(this,"variableName");this.variableName=e,this.lightness=t.lightness,this.chroma=t.chroma,this.hue=t.hue}get value(){return`oklch(${this.lightness} ${this.chroma} ${this.hue})`}};function b(t){return new c({lightness:6*(3+1.3*t)*.01,chroma:.001*(14+.09*t),hue:258.36},`--jb-neutral-${t}`)}function te(t){return new c({lightness:t.lightness-.1,chroma:t.chroma-.05,hue:t.hue},`${t.variableName}-pressed`)}function ae(t){const e=Math.min(t.lightness+.12*(1-t.lightness),.985),a=t.chroma*(1-.15*(e-t.lightness));return new c({lightness:e,chroma:Number(a.toFixed(3)),hue:t.hue},`${t.variableName}-l`)}function re(t){const e=Math.max(t.lightness-.12*t.lightness,.02),a=t.chroma*(1-.15*(e-t.lightness));return new c({lightness:e,chroma:a,hue:t.hue},`${t.variableName}-d`)}function ie(t){const e=Math.min(t.lightness+.65*(1-t.lightness),.93),a=.55*t.chroma*(1-.08*(e-t.lightness)),r=t.hue>=70&&t.hue<=162?5:-3,o=t.hue+r;return new c({lightness:e,chroma:Number(a.toFixed(3)),hue:o},`${t.variableName}-subtle`)}function se(t){const e=Math.max(t.lightness-.35,.22),a=Math.min(1.6*t.chroma,.28);return new c({lightness:Number(e.toFixed(3)),chroma:Number(a.toFixed(3)),hue:t.hue},`${t.variableName}-contrast`)}function k(t){return{main:t,hover:(e=t,new c({lightness:e.lightness+.07,chroma:e.chroma+.07,hue:e.hue},`${e.variableName}-hover`)),pressed:te(t),light:ae(t),dark:re(t),subtle:ie(t),contrast:se(t)};var e}const ne=new c({lightness:.6,chroma:.26,hue:256},"--jb-primary"),oe=new c({lightness:.6,chroma:.26,hue:286},"--jb-secondary"),le=new c({lightness:.75,chroma:.18,hue:70},"--jb-yellow"),ce=new c({lightness:.68,chroma:.1484,hue:162.1},"--jb-green"),he=new c({lightness:.6,chroma:.22,hue:23.21},"--jb-red"),M={single:{black:new c({lightness:.14,chroma:0,hue:0},"--jb-black"),white:new c({lightness:1,chroma:0,hue:0},"--jb-white"),highlight:new c({lightness:.93,chroma:.2302,hue:125.18},"--jb-highlight")},neutral:[b(0),b(1),b(2),b(3),b(4),b(5),b(6),b(7),b(8),b(9),b(10)],primary:k(ne),secondary:k(oe),yellow:k(le),green:k(ce),red:k(he)};function j(t){try{const{value:e,...a}=t;window.CSS.registerProperty({...a}),function(r,o){try{o&&(document.documentElement.style.getPropertyValue(r)||document.documentElement.style.setProperty(r,o))}catch{}}(t.name,e)}catch{}}function h(t,e){j({name:e??t.variableName,syntax:"<color>",inherits:!0,initialValue:t.value})}function de(){var t;j({name:"--jb-radius",inherits:!0,value:"1rem",initialValue:"16px",syntax:"<length-percentage>"}),j({name:"--jb-radius-xs",inherits:!0,value:"0.5rem",initialValue:"8px",syntax:"<length-percentage>"}),j({name:"--jb-radius-sm",inherits:!0,value:"0.75rem",initialValue:"12px",syntax:"<length-percentage>"}),j({name:"--jb-radius-lg",inherits:!0,value:"1.25rem",initialValue:"20px",syntax:"<length-percentage>"}),j({name:"--jb-radius-xl",inherits:!0,value:"1.5rem",initialValue:"24px",syntax:"<length-percentage>"}),function(e){h(e.neutral[0],"--jb-neutral"),h(e.primary.main),h(e.secondary.main),h(e.single.black),h(e.single.white),h(e.single.highlight),h(e.yellow.main),h(e.green.main),h(e.red.main),h(e.red.main);for(let a=1;a<=10;a++)h(e.neutral[a])}(M),h((t=M).single.black,"--jb-text-primary"),h(t.neutral[7],"--jb-text-secondary"),h(t.single.white,"--jb-text-contrast")}var g,E,V,A,u,x,l,i,D,S,w,C,P,q,I,R,B,F,K,U,G,J,O,Q,W,N,X,z,be=(z=class extends HTMLElement{constructor(){super();p(this,i);p(this,g,"");p(this,E,!1);p(this,V,!1);p(this,A,!1);p(this,u);f(this,"initialValue","");p(this,x);p(this,l);f(this,"autoHeight",!1);p(this,w,new _({clearValidationError:this.clearValidationError.bind(this),getValue:()=>s(this,g),getValueString:()=>this.value,getValidations:n(this,i,W).bind(this),setValidationResult:n(this,i,X).bind(this),showValidationError:this.showValidationError.bind(this)}));typeof this.attachInternals=="function"&&d(this,u,this.attachInternals()),n(this,i,D).call(this),n(this,i,C).call(this)}static get formAssociated(){return!0}get value(){return s(this,g)}set value(e){d(this,g,e),s(this,x).value=e,this.autoHeight&&n(this,i,q).call(this)}get isAutoValidationDisabled(){return s(this,E)}set isAutoValidationDisabled(e){d(this,E,e)}get disabled(){return s(this,V)}set disabled(e){var a,r;d(this,V,e),s(this,l).textarea.disabled=e,e?(a=s(this,u).states)==null||a.add("disabled"):(r=s(this,u).states)==null||r.delete("disabled")}set required(e){d(this,A,e),s(this,w).checkValiditySync({showError:!1})}get required(){return s(this,A)}get name(){return this.getAttribute("name")||""}get isDirty(){return s(this,g)!==this.initialValue}get validation(){return s(this,w)}static get observedAttributes(){return["label","message","value","placeholder","required","error"]}attributeChangedCallback(e,a,r){n(this,i,P).call(this,e,r)}showValidationError(e){var r;const a=typeof e=="string"?e:e.message;(r=s(this,u).states)==null||r.add("invalid"),s(this,l).messageBox.innerHTML=a}clearValidationError(){var a;const e=this.getAttribute("message")||"";(a=s(this,u).states)==null||a.delete("invalid"),s(this,l).messageBox.innerHTML=e}get validationMessage(){return s(this,u).validationMessage}checkValidity(){const e=s(this,w).checkValiditySync({showError:!1});if(!e.isAllValid){const a=new CustomEvent("invalid");this.dispatchEvent(a)}return e.isAllValid}reportValidity(){const e=s(this,w).checkValiditySync({showError:!0});if(!e.isAllValid){const a=new CustomEvent("invalid");this.dispatchEvent(a)}return e.isAllValid}},g=new WeakMap,E=new WeakMap,V=new WeakMap,A=new WeakMap,u=new WeakMap,x=new WeakMap,l=new WeakMap,i=new WeakSet,D=function(){const e=this.attachShadow({mode:"open",delegatesFocus:!0});de();const a=document.createElement("template");a.innerHTML=`<style>:host{--border-radius:var(--jb-textarea-border-radius , var(--jb-radius));--base-border-color:var(--jb-textarea-border-color, var(--jb-neutral-10));--border-color:var(--base-border-color);--message-color:var(--jb-textarea-message-color, var(--jb-text-secondary));--label-color: var(--jb-textarea-label-color, var(--jb-text-primary));--value-color: var(--jb-textarea-value-color, var(--jb-text-primary));--placeholder-color: var(--jb-input-placeholder-color, var(--jb-neutral-6));--base-bg-color:var(--jb-textarea-bgcolor, var(--jb-neutral-10));--input-box-bg-color: var(--base-bg-color)}:host(:state(invalid)){--message-color:var(--jb-textarea-message-error-color, var(--jb-red))}:host(:state(disabled)){--input-box-bg-color: var(--jb-textarea-bgcolor-disabled, hsl(from var(--base-bg-color) h 12% 66.1));--border-color: var(--jb-textarea-border-color-disabled, hsl(from var(--base-border-color) h 12% 66.1));--value-color:var(--jb-textarea-value-color-disabled, var(--jb-neutral-3));--label-color:var(--jb-textarea-label-color-disabled, var(--jb-neutral-3))}:host(:focus-within){--border-color:var(--jb-textarea-border-color-focus, var(--jb-neutral))}:host(:focus),:host(:focus-visible){outline:none}.jb-textarea-web-component{width:100%;margin:var(--jb-textarea-margin, 12px 0)}.jb-textarea-web-component label{width:100%;margin:4px 0px;display:block;font-size:var(--jb-textarea-label-font-size, 0.8em);color:var(--label-color)}.jb-textarea-web-component label.--hide{display:none}.jb-textarea-web-component .textarea-box{width:100%;box-sizing:border-box;border:solid var(--jb-textarea-border-width, 1px) var(--border-color);background-color:var(--input-box-bg-color);border-bottom:solid var(--jb-textarea-border-bottom-width, 3px) var(--border-color);border-radius:var(--border-radius);overflow:var(--jb-input-box-overflow, hidden);display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:auto 1fr auto;grid-template-areas:"slot-block-start slot-block-start slot-block-start" "slot-inline-start textarea slot-inline-end" "slot-block-end slot-block-end slot-block-end";transition:ease .3s all;overflow:hidden}.jb-textarea-web-component .textarea-box textarea{grid-area:textarea;border:none;width:100%;box-sizing:border-box;min-height:var(--jb-textarea-min-height, 80px);height:var(--jb-textarea-min-height, 80px);max-height:var(--jb-textarea-max-height, none);background-color:rgba(0,0,0,0);padding:6px 12px 4px 12px;display:block;font-family:inherit;font-size:var(--jb-textarea-value-font-size, 1.1em);margin:0;border-radius:0;resize:vertical;color:var(--value-color)}.jb-textarea-web-component .textarea-box textarea:focus{outline:none}.jb-textarea-web-component .textarea-box textarea::placeholder{color:var(--placeholder-color);font-size:var(--jb-textarea-placeholder-font-size, initial)}.jb-textarea-web-component .textarea-box .block-start-section-wrapper{grid-area:slot-block-start}.jb-textarea-web-component .textarea-box .block-end-section-wrapper{grid-area:slot-block-end}.jb-textarea-web-component .textarea-box .inline-start-section-wrapper{grid-area:slot-inline-start}.jb-textarea-web-component .textarea-box .inline-end-section-wrapper{grid-area:slot-inline-end}.jb-textarea-web-component .textarea-box .block-start-section-wrapper,.jb-textarea-web-component .textarea-box .block-end-section-wrapper{display:flex;height:auto;width:100%;align-items:center;justify-content:start}.jb-textarea-web-component .textarea-box .inline-start-section-wrapper,.jb-textarea-web-component .textarea-box .inline-end-section-wrapper{display:flex;height:100%;width:auto;align-items:center;justify-content:center}.jb-textarea-web-component .textarea-box ::slotted([slot=block-start-section]),.jb-textarea-web-component .textarea-box ::slotted([slot=block-end-section]){height:auto;display:flex;justify-content:start;align-items:center;width:100%;max-width:100%;overflow-x:hidden;background-color:rgba(0,0,0,0);padding:8px 16px;width:auto;box-sizing:border-box}.jb-textarea-web-component .textarea-box ::slotted([slot=inline-start-section]),.jb-textarea-web-component .textarea-box ::slotted([slot=inline-end-section]){height:100%;display:flex;justify-content:center;align-items:center;max-height:100%;overflow-y:hidden;background-color:rgba(0,0,0,0);padding:8px 16px;width:auto;box-sizing:border-box}.jb-textarea-web-component .message-box{font-size:var(--jb-textarea-message-font-size, 0.7em);padding:2px 8px;color:var(--message-color)}.jb-textarea-web-component .message-box:empty{padding:0}</style>

  <div class="jb-textarea-web-component">
    <label class="--hide" part="label"><span class="label-value"></span><span>:</span></label>
    <div class="textarea-box" part="textarea-box">
        <div class="block-start-section-wrapper" part="block-start-section-wrapper">
          <slot name="block-start-section"></slot>
        </div>
        <div class="inline-start-section-wrapper" part="inline-start-section-wrapper">
            <slot name="inline-start-section"></slot>
        </div>
        <textarea class="textarea-input" part="textarea"></textarea>
        <div class="inline-end-section-wrapper" part="inline-end-section-wrapper">
            <slot name="inline-end-section"></slot>
        </div>
        <div class="block-end-section-wrapper" part="block-end-section-wrapper">
            <slot name="block-end-section"></slot>
        </div>
    </div>
    <div class="message-box" part="message"></div>
  </div>
  `,e.appendChild(a.content.cloneNode(!0)),d(this,x,e.querySelector(".textarea-box textarea")),d(this,l,{textarea:s(this,x),label:e.querySelector("label"),labelValue:e.querySelector("label .label-value"),messageBox:e.querySelector(".message-box")}),n(this,i,S).call(this)},S=function(){s(this,l).textarea.addEventListener("change",e=>n(this,i,O).call(this,e)),s(this,l).textarea.addEventListener("beforeinput",n(this,i,I).bind(this)),s(this,l).textarea.addEventListener("input",e=>n(this,i,K).call(this,e)),s(this,l).textarea.addEventListener("keypress",n(this,i,F).bind(this)),s(this,l).textarea.addEventListener("keyup",n(this,i,G).bind(this)),s(this,l).textarea.addEventListener("keydown",n(this,i,B).bind(this))},w=new WeakMap,C=function(){this.value=this.getAttribute("value")||""},P=function(e,a){switch(e){case"label":s(this,l).labelValue.innerHTML=a,a==null||a==null||a==""?s(this,l).label.classList.add("--hide"):s(this,l).label.classList.remove("--hide");break;case"message":s(this,l).messageBox.innerHTML=a;break;case"placeholder":s(this,x).setAttribute("placeholder",a);break;case"value":this.value=a;break;case"required":this.required=a===""||a==="true";break;case"error":this.reportValidity()}},q=function(){s(this,x).style.height="4px",s(this,x).style.height=s(this,x).scrollHeight+"px"},I=function(e){n(this,i,R).call(this,e)},R=function(e){const a=ee("beforeinput",e,{cancelable:!0});return this.dispatchEvent(a),a.defaultPrevented&&e.preventDefault(),a.defaultPrevented},B=function(e){const a=L("keydown",e,{cancelable:!0});this.dispatchEvent(a)||e.preventDefault()},F=function(e){const a=L("keypress",e,{cancelable:!0});this.dispatchEvent(a)?e.key=="Enter"&&n(this,i,J).call(this,e):e.preventDefault()},K=function(e){const a=e.target.value;d(this,g,a),this.autoHeight&&n(this,i,q).call(this),n(this,i,U).call(this,e)},U=function(e){const a={bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,data:e.data,dataTransfer:e.dataTransfer,detail:e.detail,inputType:e.inputType,isComposing:e.isComposing,targetRanges:e.getTargetRanges(),view:e.view},r=new InputEvent("input",a);this.dispatchEvent(r)},G=function(e){const a=e.target.value;d(this,g,a),n(this,i,N).call(this,!1);const r=L("keyup",e,{cancelable:!0});this.dispatchEvent(r),r.defaultPrevented&&e.preventDefault()},J=function(e){const a=L("enter",e,{cancelable:!0});this.dispatchEvent(a),a.defaultPrevented&&e.preventDefault()},O=function(e){const a=e.target.value;d(this,g,a),n(this,i,N).call(this,!0),n(this,i,Q).call(this).defaultPrevented&&e.preventDefault()},Q=function(){const e=new Event("change",{bubbles:!0,cancelable:!0});return this.dispatchEvent(e),e},W=function(){const e=[];return this.getAttribute("error")!==null&&this.getAttribute("error").trim().length>0&&e.push({validator:void 0,message:this.getAttribute("error"),stateType:"customError"}),this.required&&e.push({validator:/.{1}/g,message:this.getAttribute("label")+" میبایست حتما وارد شود",stateType:"valueMissing"}),e},N=function(e){if(!this.isAutoValidationDisabled)return s(this,w).checkValidity({showError:e})},X=function(e){if(e.isAllValid)s(this,u).setValidity({},"");else{const a={};let r="";e.validationList.forEach(o=>{o.isValid||(o.validation.stateType&&(a[o.validation.stateType]=!0),r==""&&(r=o.message))}),s(this,u).setValidity(a,r)}},z);!customElements.get("jb-textarea")&&window.customElements.define("jb-textarea",be);let ve=H.forwardRef((t,e)=>{{var a;let r=v.useRef(null);return v.useImperativeHandle(e,()=>r?r.current:void 0,[r]),v.useEffect(()=>{let o=a.value||"";r.current&&(r.current.value=o)},[(a=t).value]),v.useEffect(()=>{r.current&&(r.current.validation.list=a.validationList||[])},[a.validationList]),v.useEffect(()=>{r.current&&a.disabled!==void 0&&(a.disabled?r.current.disabled=!0:r.current.disabled=!1)},[r.current,a.disabled]),v.useEffect(()=>{r.current&&a.required!==void 0&&(a.required?r.current.setAttribute("required",""):r.current.removeAttribute("required"))},[a.required]),v.useEffect(()=>{r.current&&(r.current.autoHeight=a.autoHeight||!1)},[a.autoHeight]),v.useEffect(()=>{var o,y;a.error?(o=r==null?void 0:r.current)==null||o.setAttribute("error",a.error):(y=r==null?void 0:r.current)==null||y.removeAttribute("error")},[a.error]),v.useEffect(()=>{var o,y;a.name?(o=r==null?void 0:r.current)==null||o.setAttribute("name",a.name||""):(y=r==null?void 0:r.current)==null||y.removeAttribute("name")},[a.name]),m(r,"load",t.onLoad,!0),m(r,"init",t.onInit,!0),m(r,"change",t.onChange),m(r,"keydown",t.onKeyDown),m(r,"input",t.onInput),m(r,"beforeinput",t.onBeforeInput),m(r,"keyup",t.onKeyUp),m(r,"focus",t.onFocus),m(r,"blur",t.onBlur),m(r,"enter",t.onEnter),H.createElement("jb-textarea",{placeholder:t.placeholder,class:t.className,style:t.style,ref:r,label:t.label,message:t.message},t.children)}});export{ve as u};
