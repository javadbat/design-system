var B=e=>{throw TypeError(e)};var b=(e,r,t)=>r.has(e)||B("Cannot "+t);var l=(e,r,t)=>(b(e,r,"read from private field"),t?t.call(e):r.get(e)),g=(e,r,t)=>r.has(e)?B("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),f=(e,r,t,n)=>(b(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t),u=(e,r,t)=>(b(e,r,"access private method"),t);import{R as y,r as o}from"./index-DwQS_Y10.js";import{o as R}from"./index-Ds7_9gl2.js";import{c as C}from"./index-BsliqPsk.js";import{a as Y,t as I}from"./index-_b1slotr.js";const E=new Y({fa:{cardLengthValidation:"لطفا شماره کارت را کامل وارد کنید",IBANLengthValidation:"لطفا شماره شبا را کامل وارد کنید",IBANFullValidation:"شماره شبا وارد شده نامعتبر است"},en:{cardLengthValidation:"Please enter all 16 digits of your card number.",IBANLengthValidation:"Please enter all 26 digits of your IBAN number.",IBANFullValidation:"IBAN number is invalid"}}),Z={validator:({value:e})=>e.length==16||e.length==0,message:E.get(I,"cardLengthValidation"),stateType:"tooShort"},ee={validator:({value:e})=>e.length==26||e.length==0,message:E.get(I,"IBANLengthValidation"),stateType:"tooShort"},te={validator:/(?:(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2}))?/g,message:E.get(I,"IBANFullValidation"),stateType:"typeMismatch"},re=["CARD","SHABA"];var p,c,h,s,V,N,v,A,w,S,$,L,ne=(L=class extends R{constructor(){super();g(this,s);g(this,p,this.getAttribute("input-type")||"CARD");g(this,c," ");g(this,h,/\s/g);u(this,s,V).call(this)}get paymentInputType(){return l(this,p)}set paymentInputType(t){re.includes(t)&&f(this,p,t||"CARD")}get separatorString(){return l(this,c)}set separatorString(t){f(this,c,t),f(this,h,RegExp(l(this,c).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\s/g,"\\s"),"g"));const n=this.standardValue(this.value,"SET_VALUE");this.elements.input.value=n.displayValue}static get observedAttributes(){return[...R.observedAttributes,"input-type","separator"]}attributeChangedCallback(t,n,a){["input-type","separator"].includes(t)?u(this,s,N).call(this,t,a):this.onAttributeChange(t,a)}},p=new WeakMap,c=new WeakMap,h=new WeakMap,s=new WeakSet,V=function(){const t=document.createElement("template");t.innerHTML="<style>.jb-input-web-component{--jb-input-input-direction:ltr}</style>",this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.validation.addValidationListGetter(u(this,s,$).bind(this)),u(this,s,S).call(this),this.addStandardValueCallback(u(this,s,w).bind(this))},N=function(t,n){switch(t){case"input-type":this.paymentInputType=n;break;case"separator":this.separatorString=n}},v=function(t){if(l(this,p)=="CARD"){let n=C(u(this,s,A).call(this,t)).replace(/[^0-9]/g,"");return n=n.substring(0,16),n}if(l(this,p)=="SHABA"){const n=/(?<ir>(IR|ir|Ir|I|i)?)(?<other>.{0,})/g.exec(t);if(n&&n.groups){let a=C(u(this,s,A).call(this,n.groups.other)).replace(/[^0-9]/g,"");a=a.substring(0,24);let i="";if(n.groups.ir)i=n.groups.ir.toUpperCase();else{if(!(a.length>0))return"";i="IR"}if(i.length==1){if(!(a.length>0))return i;i="IR"}return i+a}return""}return t},A=function(t){return t.replace(l(this,h),"")},w=function(t){let n="",a="";if(l(this,p)=="CARD"){a=u(this,s,v).call(this,t);const i=RegExp(`(.*)(${l(this,h).source})$`,"g");n=a.replace(/([0-9]{4})/g,`$1${l(this,c)}`).replace(i,"$1")}if(l(this,p)=="SHABA"){a=u(this,s,v).call(this,t);const i=/(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2})/g.exec(a);n=i&&i.length>0?i.slice(1).filter(m=>m!=="").join(l(this,c)):a}return{value:a,displayValue:n}},S=function(){},$=function(){return l(this,p)=="CARD"?[Z]:[ee,te]},L);customElements.get("jb-payment-input")||window.customElements.define("jb-payment-input",ne);function d(e,r,t,n=!1){let a=o.useCallback(i=>{e.current&&typeof t=="function"&&t(i)},[e,t]);o.useEffect(()=>{let i=e.current;return i&&i.addEventListener(r,a,{passive:n,capture:!1}),function(){i&&i.removeEventListener(r,a,{passive:n,capture:!1})}},[e,r,t,n])}function q(e,r){d(e,"enter",r.onEnter),d(e,"input",r.onInput),d(e,"beforeinput",r.onBeforeinput),d(e,"change",r.onChange),d(e,"keydown",r.onKeydown),d(e,"keyup",r.onKeyup),d(e,"focus",r.onFocus),d(e,"blur",r.onBlur)}function T(e,r){o.useEffect(()=>{let t=r.value;(r.value==null||r.value===void 0)&&(t=""),e&&e.current&&e.current&&(e.current.value=(t==null?void 0:t.toString())||"")},[r.value]),o.useEffect(()=>{e&&e.current&&(e.current.validation.list=r.validationList||[])},[r.validationList]),o.useEffect(()=>{var t,n;typeof r.disabled=="boolean"&&r.disabled?(t=e==null?void 0:e.current)==null||t.setAttribute("disabled",""):(n=e==null?void 0:e.current)==null||n.removeAttribute("disabled")},[r.disabled]),o.useEffect(()=>{var t,n,a;typeof r.required=="string"&&((t=e==null?void 0:e.current)==null||t.setAttribute("required",r.required)),typeof r.required=="boolean"&&(r.required?(n=e==null?void 0:e.current)==null||n.setAttribute("required",""):(a=e==null?void 0:e.current)==null||a.removeAttribute("required"))},[r.required])}o.forwardRef((e,r)=>{let t=o.useRef(null);o.useImperativeHandle(r,()=>t?t.current:{},[t]);let{onBeforeinput:n,onBlur:a,onChange:i,onEnter:m,onFocus:j,onInput:x,onKeydown:K,onKeyup:k,size:D,autocomplete:F,disabled:H,error:P,inputmode:z,label:J,message:M,name:U,placeholder:G,required:_,type:O,validationList:Q,value:W,...X}=e;return q(t,{onBeforeinput:n,onBlur:a,onChange:i,onEnter:m,onFocus:j,onInput:x,onKeydown:K,onKeyup:k}),T(t,{disabled:H,required:_,validationList:Q,value:W}),y.createElement("jb-input",{ref:t,label:J,message:M,name:U,placeholder:G,size:D,type:O,error:P,inputmode:z,autocomplete:F,...X},e.children)}).displayName="JBInput";let ae=y.forwardRef((e,r)=>{let t=o.useRef(null);return o.useImperativeHandle(r,()=>t?t.current:{},[t]),T(t,e),q(t,e),o.useEffect(()=>{t.current.setAttribute("input-type",e.inputType)},[e.inputType]),o.useEffect(()=>{e.separator&&typeof e.separator=="string"&&e.separator!==""&&(t.current.separatorString=e.separator)},[e.separator]),y.createElement("jb-payment-input",{placeholder:e.placeholder?e.placeholder:"",ref:t,class:e.className?e.className:"",label:e.label?e.label:"",message:e.message?e.message:""},e.children)});ae.displayName="JBPaymentInput";export{ae as p};
