import{r as n,R as l}from"./index-D4lIrffr.js";import{T as o,L as f}from"./jb-date-input-BmlQE4c8.js";function c(e,s,t,a=!1){let r=n.useCallback(u=>{e.current&&typeof t=="function"&&t(u)},[e,t]);n.useEffect(()=>{let u=e.current;return u&&u.addEventListener(s,r,{passive:a,capture:!1}),function(){u&&u.removeEventListener(s,r,{passive:a,capture:!1})}},[e,s,t,a])}function v(e){let[s,t]=n.useState(o),a=n.useRef(null);return n.useEffect(()=>{a.current&&setTimeout(()=>{e.ref.current.setSelectionRange(a.current.selectionStart,a.current.selectionEnd),a.current=null},0)},[s,a.current]),c(e.ref,"beforeinput",function(r){a.current=f({dateInputType:e.dateInputType,selection:{start:e.ref.current.selectionStart,end:e.ref.current.selectionEnd},value:s,showPersianNumber:e.showPersianNumber,event:{inputType:r.inputType,data:r.data}}),r.preventDefault(),t(a.current.value),e.ref.current.setSelectionRange(a.current.selectionStart,a.current.selectionEnd)}),{value:s,setValue:t,onChange:()=>{}}}let d=n.forwardRef((e,s)=>{let t=n.useRef(null);n.useImperativeHandle(s,()=>t?t.current:{},[t]);let a=n.useRef([]);return n.useEffect(()=>{var r,u;e.format&&(e.format!==((r=t.current)==null?void 0:r.valueFormat)&&((u=t.current)==null||u.setAttribute("format",e.format)),a.current.length>0&&(a.current.forEach(i=>{i()}),a.current=[]))},[e.format]),n.useEffect(()=>{var r,u;e.max&&(e.format&&e.format!==((r=t.current)==null?void 0:r.valueFormat)?a.current.push(()=>{var i;e.max&&((i=t.current)==null||i.setMaxDate(e.max))}):(u=t.current)==null||u.setMaxDate(e.max))},[e.max]),n.useEffect(()=>{var r,u;e.name?(r=t==null?void 0:t.current)==null||r.setAttribute("name",e.name||""):(u=t==null?void 0:t.current)==null||u.removeAttribute("name")},[e.name]),n.useEffect(()=>{var r,u;e.min&&(e.format&&e.format!==((r=t.current)==null?void 0:r.valueFormat)?a.current.push(()=>{var i;e.min&&((i=t.current)==null||i.setMinDate(e.min))}):(u=t.current)==null||u.setMinDate(e.min))},[e.min]),n.useEffect(()=>{t.current&&e.value&&(t.current.value=e.value)},[e.value]),n.useEffect(()=>{t.current&&t.current.setAttribute("message",e.message||"")},[e.message]),n.useEffect(()=>{t.current&&Array.isArray(e.jalaliMonthList)&&t.current.setMonthList("JALALI",e.jalaliMonthList)},[e.jalaliMonthList]),n.useEffect(()=>{t.current&&Array.isArray(e.gregorianMonthList)&&t.current.setMonthList("GREGORIAN",e.gregorianMonthList)},[e.gregorianMonthList]),n.useEffect(()=>{t.current&&e.placeholder!==void 0&&(t.current.placeholder=e.placeholder)},[e.placeholder]),n.useEffect(()=>{t.current&&e.overflowHandler!==void 0&&(t.current.elements.popover.overflowHandler=e.overflowHandler)},[e.overflowHandler]),n.useEffect(()=>{t.current&&e.overflowRef!==void 0&&(t.current.elements.popover.overflowDom=e.overflowRef.current)},[e.overflowRef]),n.useEffect(()=>{t.current&&typeof e.style=="string"&&t.current.setAttribute("style",e.style)},[e.style]),n.useEffect(()=>{t.current&&Array.isArray(e.validationList)&&(t.current.validation.list=e.validationList)},[e.validationList]),n.useEffect(()=>{t.current&&e.direction&&t.current.setAttribute("direction",e.direction)},[e.direction]),n.useEffect(()=>{t.current&&(e.required?t.current.required=!0:t.current.required=!1)},[e.required,t.current]),n.useEffect(()=>{var r;typeof e.calendarDefaultDateView=="object"&&e.calendarDefaultDateView.year&&e.calendarDefaultDateView.month&&((r=t.current)==null||r.setCalendarDefaultDateView(e.calendarDefaultDateView.year,e.calendarDefaultDateView.month,e.calendarDefaultDateView.dateType))},[e.calendarDefaultDateView]),n.useEffect(()=>{var r,u;e.showPersianNumber?(r=t.current)==null||r.setAttribute("show-persian-number","true"):(u=t.current)==null||u.removeAttribute("show-persian-number")},[e.showPersianNumber]),n.useEffect(()=>{var r;typeof e.disabled=="boolean"&&((r=t==null?void 0:t.current)==null||r.setAttribute("disabled",`${e.disabled}`))},[e.disabled]),n.useEffect(()=>{var r,u;e.error?(r=t==null?void 0:t.current)==null||r.setAttribute("error",e.error):(u=t==null?void 0:t.current)==null||u.removeAttribute("error")},[e.error]),c(t,"load",e.onLoad,!0),c(t,"init",e.onInit,!0),c(t,"invalid",e.onInvalid,!0),c(t,"change",e.onChange,!0),c(t,"beforeinput",e.onBeforeInput,!1),c(t,"input",e.onInput,!0),c(t,"keyup",e.onKeyUp,!0),c(t,"keydown",e.onKeyDown,!1),c(t,"keypress",e.onKeyPress,!0),c(t,"select",e.onSelect,!0),c(t,"focus",e.onFocus,!0),c(t,"blur",e.onBlur,!0),l.createElement("jb-date-input",{class:e.className?e.className:"",label:e.label,"value-type":e.valueType?e.valueType:"GREGORIAN",ref:t,"input-type":e.inputType?e.inputType:"JALALI"},e.children)});d.displayName="JBDateInput";export{d,v as s};
