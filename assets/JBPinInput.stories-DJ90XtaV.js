var H=i=>{throw TypeError(i)};var D=(i,e,t)=>e.has(i)||H("Cannot "+t);var p=(i,e,t)=>(D(i,e,"read from private field"),t?t.call(i):e.get(i)),h=(i,e,t)=>e.has(i)?H("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),g=(i,e,t,n)=>(D(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),a=(i,e,t)=>(D(i,e,"access private method"),t);import{R as s,r as d}from"./index-DwQS_Y10.js";import{e as Se}from"./jb-validation-DPnsTO1v.js";import{N as qe}from"./index-bfIR6bpK.js";import{r as b}from"./index-BJ5IkxrY.js";var L,f,P,he,$;const Ne=new($=class{constructor(){h(this,f);h(this,L,{localeChange:[]});a(this,f,P).call(this),a(this,f,he).call(this)}setLocale(i){this.locale=i,this.callListeners("localeChange")}addEventListener(i,e){p(this,L)[i].push(e)}callListeners(i){p(this,L)[i].forEach(e=>e())}},L=new WeakMap,f=new WeakSet,P=function(){var i;(((i=document==null?void 0:document.documentElement)==null?void 0:i.lang)||"en")==="fa"?this.locale=new Intl.Locale("fa",{calendar:"persian",numeric:!1,region:"IR"}):this.locale=new Intl.Locale("en",{calendar:"gregory",region:"US"})},he=function(){new MutationObserver(i=>{i.forEach(e=>{e.attributeName=="lang"&&(a(this,f,P).call(this),this.callListeners("localeChange"))})}).observe(document.documentElement,{attributeFilter:["lang"],childList:!1,subtree:!1,attributes:!0})},$);function Be(i,e){return i.locale.language==="fa"?e?`لطفاً ${e} خود را وارد نمایید`:"لطفاً این قسمت را پر کنید":e?`Please enter your ${e}`:"Please complete this field"}var m,x,C,k,r,me,M,I,v,R,j,be,y,ge,ve,V,fe,Ee,we,ye,je,Le,xe,Ce,ke,Ie,T,Ve,Ae,J,Fe=(J=class extends HTMLElement{constructor(){super();h(this,r);h(this,m);h(this,x,!0);h(this,C,!1);h(this,k,!1);h(this,I,6);h(this,v,new Se({clearValidationError:this.clearValidationError.bind(this),showValidationError:this.showValidationError.bind(this),getValue:()=>this.value,getValueString:()=>this.value,setValidationResult:a(this,r,Ve).bind(this),getValidations:a(this,r,Ae).bind(this)}));h(this,y,!1);h(this,V,"");this.initialValue="",typeof this.attachInternals=="function"&&g(this,m,this.attachInternals()),this.initWebComponent()}static get formAssociated(){return!0}get emptyChar(){return"-"}get disabled(){return p(this,C)}set disabled(e){var t,n;g(this,C,e),this.elements.inputs.forEach(l=>l.disabled=e),e?(t=p(this,m).states)==null||t.add("disabled"):(n=p(this,m).states)==null||n.delete("disabled")}set required(e){g(this,k,e),a(this,r,T).call(this,!1)}get required(){return p(this,k)}get value(){return a(this,r,me).call(this,this.emptyChar)}set value(e){const t=a(this,r,R).call(this,e);a(this,r,M).call(this,t)}get charLength(){return p(this,I)}set charLength(e){g(this,I,e),this.initInputsDom()}get validation(){return p(this,v)}get isDirty(){return this.value!==this.initialValue}get name(){return this.getAttribute("name")||""}connectedCallback(){this.callOnLoadEvent(),this.initProp(),this.callOnInitEvent()}callOnLoadEvent(){const e=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(e)}callOnInitEvent(){const e=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(e)}initWebComponent(){const e=this.attachShadow({mode:"open",delegatesFocus:!0});qe();const t=document.createElement("template");t.innerHTML=`<style>:host(:focus),:host(:focus-visible){outline:none}.jb-pin-input-web-component .inputs-wrapper{width:var(--jb-pin-input-inputs-wrapper-width,100%);direction:ltr;justify-content:center;align-items:center;gap:8px;display:flex}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper{border:var(--jb-pin-input-wrapper-border-width,0) var(--jb-pin-input-wrapper-border-style,solid) var(--wrapper-border-color);border-radius:var(--wrapper-border-radius)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input{color:var(--pin-color);box-sizing:border-box;width:100%;min-width:8px;height:var(--jb-pin-input-pin-height,40px);text-align:center;font-family:inherit;font-size:var(--jb-pin-input-pin-font-size,24px);font-weight:var(--jb-pin-input-pin-font-weight,900);background-color:#0000;border:none}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input:focus{outline:none}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input-shape{background-color:var(--bottom-line-color);border-radius:var(--bottom-line-border-radius);width:100%;height:var(--jb-pin-input-bottom-line-height,4px);display:var(--jb-pin-input-bottom-line-display,block)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper:focus-within{border-color:var(--border-color-active);box-shadow:var(--jb-pin-input-wrapper-box-shadow,none)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper:focus-within .pin-input-shape{background-color:var(--bottom-line-color-active)}.jb-pin-input-web-component .message-box{font-size:var(--jb-pin-input-message-font-size,.7rem);color:var(--message-color);display:var(--jb-pin-input-message-box-display,block);padding:4px 0}.jb-pin-input-web-component .message-box:empty{padding:0}.jb-pin-input-web-component .message-box.error{color:var(--message-error-color)} :host{--wrapper-border-radius:var(--jb-pin-input-wrapper-border-radius,var(--jb-radius));--bottom-line-border-radius:var(--jb-pin-input-bottom-line-border-radius,var(--jb-radius));--wrapper-border-color:var(--jb-pin-input-wrapper-border-color,var(--jb-neutral));--pin-color:var(--jb-pin-input-pin-color,var(--jb-text-primary));--bottom-line-color:var(--jb-pin-input-bottom-line-color,var(--jb-neutral-8));--border-color-active:var(--jb-pin-input-wrapper-border-color-active,var(--jb-primary));--bottom-line-color-active:var(--jb-pin-input-bottom-line-color-active,var(--jb-primary));--message-color:var(--jb-pin-input-message-color,var(--jb-text-secondary));--message-error-color:var(--jb-pin-input-message-error-color,var(--jb-red))}</style>

  <div class="jb-pin-input-web-component">
    <div class="inputs-wrapper">
    </div>
    <div class="message-box" part="message"></div>
  </div>
  `,e.appendChild(t.content.cloneNode(!0)),this.elements={inputsWrapper:e.querySelector(".inputs-wrapper"),inputs:[],messageBox:e.querySelector(".message-box")}}registerEventListener(){}initProp(){this.initInputsDom(),this.registerEventListener()}static get observedAttributes(){return["autofocus","char-length","required","message","error"]}attributeChangedCallback(e,t,n){this.onAttributeChange(e,n)}onAttributeChange(e,t){switch(e){case"autofocus":t=="true"&&this.elements.inputs[0]&&this.elements.inputs[0].focus();break;case"char-length":Number.isInteger(Number(t))&&(this.charLength=Number(t));break;case"message":this.elements.messageBox.classList.contains("error")||(this.elements.messageBox.innerHTML=t);break;case"error":this.reportValidity()}}initInputsDom(){const e=this.createInputs();this.elements.inputs=e.map(t=>t.querySelector(".pin-input")),this.elements.inputsWrapper.innerHTML="",e.forEach(t=>{this.elements.inputsWrapper.appendChild(t)}),this.getAttribute("autofocus")=="true"&&this.elements.inputs[0]&&this.elements.inputs[0].focus()}createInputs(){const e=[];for(let t=0;t<this.charLength;t++){const n=this.createInput(t);e.push(n)}return e}createInput(e){const t=document.createElement("div");t.classList.add("pin-input-wrapper");const n=document.createElement("input");n.classList.add("pin-input"),n.addEventListener("keypress",a(this,r,Ee).bind(this)),n.addEventListener("keyup",a(this,r,Ce).bind(this)),n.addEventListener("beforeinput",a(this,r,Le).bind(this)),n.addEventListener("blur",a(this,r,ve).bind(this)),n.addEventListener("focus",a(this,r,ge).bind(this)),n.addEventListener("input",u=>a(this,r,we).call(this,u),{passive:!0}),n.addEventListener("paste",a(this,r,be).bind(this)),n.setAttribute("inputmode","numeric"),n.setAttribute("pattern","[0-9]*");const l=document.createElement("div");return l.classList.add("pin-input-shape"),t.appendChild(n),t.appendChild(l),t.setAttribute("data-pin-index",e.toString()),t}onInputKeyDown(e){const t={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which},n=new KeyboardEvent("keydown",t);this.dispatchEvent(n)}showValidationError(e){const t=typeof e=="string"?e:e.message;this.elements.messageBox.innerHTML=t,this.elements.messageBox.classList.add("error")}clearValidationError(){const e=this.getAttribute("message")||"";this.elements.messageBox.innerHTML=e,this.elements.messageBox.classList.remove("error")}get isAutoValidationDisabled(){return this.getAttribute("disable-auto-validation")===""||this.getAttribute("disable-auto-validation")==="true"}checkValidity(){const e=p(this,v).checkValiditySync({showError:!1});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}reportValidity(){const e=p(this,v).checkValiditySync({showError:!0});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}get validationMessage(){return p(this,m).validationMessage}focus(){var t;const e=this.elements.inputs.find(n=>n.value=="");e?e.focus():(t=this.elements.inputs[this.elements.inputs.length-1])==null||t.focus()}},m=new WeakMap,x=new WeakMap,C=new WeakMap,k=new WeakMap,r=new WeakSet,me=function(e){const t=this.elements.inputs.map(n=>n.value||e).join("");return a(this,r,R).call(this,t)},M=function(e){this.elements.inputs.forEach((t,n)=>{Number.isNaN(e[n])||e[n]===""||e[n]==this.emptyChar||e[n]==null||e[n]==null?t.value="":t.value=e[n]}),p(this,m)&&typeof p(this,m).setFormValue=="function"&&p(this,m).setFormValue(e)},I=new WeakMap,v=new WeakMap,R=function(e){let t=e;return p(this,x)&&(t=a(this,r,j).call(this,t)),t},j=function(e){let t=e;return p(this,x)&&typeof e=="string"&&(t=e.replace(/\u06F0/g,"0").replace(/\u06F1/g,"1").replace(/\u06F2/g,"2").replace(/\u06F3/g,"3").replace(/\u06F4/g,"4").replace(/\u06F5/g,"5").replace(/\u06F6/g,"6").replace(/\u06F7/g,"7").replace(/\u06F8/g,"8").replace(/\u06F9/g,"9")),t},be=function(e){e.preventDefault();let t=e.clipboardData.getData("text");const n=Number(e.target.parentElement.dataset.pinIndex),l=new RegExp(`(.*\\D|^)(?<pin>[0-9]{${this.charLength}})(\\D.*|$)`);t=a(this,r,j).call(this,t);const u=l.exec(t);let o="";if(u&&u.groups&&u.groups.pin){o=u.groups.pin,a(this,r,M).call(this,o);const c=this.value.length;this.value.length>0&&this.elements.inputs[c-1].focus()}else{const c=t.match(`[0-9]{1,${this.charLength}}`);if(c){const W=c[0],z=[...this.value],Ke=Math.min(this.charLength-n,W.length);let E;for(E=0;E<Ke;E++)z[n+E]=W[E];this.elements.inputs[E].focus(),this.value=z.join("")}}},y=new WeakMap,ge=function(e){p(this,y)?g(this,y,!1):g(this,V,this.value)},ve=function(e){const t=e.relatedTarget;this.elements.inputs.includes(t)||a(this,r,fe).call(this)},V=new WeakMap,fe=function(){a(this,r,T).call(this,!0),this.value!==p(this,V)&&a(this,r,Ie).call(this)},Ee=function(e){const t={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,detail:e.detail,isComposing:e.isComposing,location:e.location,metaKey:e.metaKey,view:e.view,repeat:e.repeat},n=new KeyboardEvent("keypress",t);this.dispatchEvent(n)},we=function(e){const t=e.target,n=parseInt(t.parentElement.dataset.pinIndex);let l=n;const u=a(this,r,j).call(this,e.target.value),o=!(n+1<this.charLength);if(/[0-9]+/g.test(u)&&(l=o?this.charLength-1:n+1),n!==l){const c=this.elements.inputs[l];g(this,y,!0),c.focus()}a(this,r,je).call(this,e),a(this,r,T).call(this,!1).then(c=>{e.inputType!=="deleteContentBackward"&&o&&c.isAllValid&&a(this,r,ye).call(this)})},ye=function(){const e=new CustomEvent("complete",{bubbles:!0,composed:!0,cancelable:!1});this.dispatchEvent(e)},je=function(e){const t=new InputEvent("input",{cancelable:!1});this.dispatchEvent(t)},Le=function(e){const t=e.target,n=e.data,l=a(this,r,j).call(this,n);if(/[0-9]+/g.test(l))t.value.length>0&&(t.value="");else if(e.inputType==="deleteContentBackward"){if(t.value==""){const u=parseInt(t.parentElement.dataset.pinIndex),o=u==0?0:u-1;this.elements.inputs[o].focus()}}else e.preventDefault();a(this,r,xe).call(this,e)},xe=function(e){const t=new InputEvent("beforeinput",{cancelable:!1});this.dispatchEvent(t)},Ce=function(e){const t=e.target,n=parseInt(t.parentElement.dataset.pinIndex);let l=n;switch(e.keyCode){case 39:l=n+1<this.charLength?n+1:this.charLength-1;break;case 37:l=n>0?n-1:0}l!==n&&this.elements.inputs[l].focus();const u={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which},o=new KeyboardEvent("keyup",u);this.dispatchEvent(o),e.keyCode==13&&a(this,r,ke).call(this)},ke=function(){const e=new CustomEvent("enter");this.dispatchEvent(e)},Ie=function(){const e=new Event("change",{cancelable:!1,bubbles:!0,composed:!0});this.dispatchEvent(e)},T=function(e){if(!this.isAutoValidationDisabled)return p(this,v).checkValidity({showError:e})},Ve=function(e){if(e.isAllValid)p(this,m).setValidity({},"");else{const t={};let n="";e.validationList.forEach(l=>{l.isValid||(l.validation.stateType&&(t[l.validation.stateType]=!0),n==""&&(n=l.message))}),p(this,m).setValidity(t,n)}},Ae=function(){const e=[];return this.getAttribute("error")!==null&&this.getAttribute("error").trim().length>0&&e.push({validator:void 0,message:this.getAttribute("error"),stateType:"customError"}),this.required&&e.push({validator:t=>t.length==this.charLength&&!t.includes(this.emptyChar),message:Be(Ne,null),stateType:"valueMissing"}),e},J);customElements.get("jb-pin-input")||window.customElements.define("jb-pin-input",Fe);let w=s.forwardRef((i,e)=>{var t;let n=d.useRef(null),[l,u]=d.useState(0);return d.useImperativeHandle(e,()=>n?n.current:void 0,[n]),d.useEffect(()=>{u(l+1)},[n.current]),d.useEffect(()=>{let o=t.value;(t.value==null||t.value===void 0)&&(o=""),n.current&&(n.current.value=(o==null?void 0:o.toString())||"")},[(t=i).value]),d.useEffect(()=>{n&&n.current&&(n.current.validation.list=t.validationList||[])},[t.validationList]),d.useEffect(()=>{var o;typeof t.disabled=="boolean"&&((o=n.current)==null||o.setAttribute("disabled",`${t.disabled}`))},[t.disabled]),d.useEffect(()=>{typeof t.charLength=="number"&&n.current&&(n.current.charLength=t.charLength)},[t.charLength]),d.useEffect(()=>{var o,c;t.inputmode?(o=n.current)==null||o.setAttribute("inputmode",t.inputmode):(c=n.current)==null||c.removeAttribute("inputmode")},[t.inputmode]),d.useEffect(()=>{var o;t.autofocus&&((o=n.current)==null||o.setAttribute("autofocus","true"))},[t.autofocus]),d.useEffect(()=>{n.current&&typeof t.required=="boolean"&&(n.current.required=t.required)},[n,t.required]),d.useEffect(()=>{var o,c;t.error?(o=n==null?void 0:n.current)==null||o.setAttribute("error",t.error):(c=n==null?void 0:n.current)==null||c.removeAttribute("error")},[t.error]),b(n,"change",i.onChange),b(n,"keydown",i.onKeyDown),b(n,"keyup",i.onKeyUp),b(n,"focus",i.onFocus),b(n,"blur",i.onBlur),b(n,"enter",i.onEnter),b(n,"input",i.onInput),b(n,"complete",i.onComplete),b(n,"beforeinput",i.onBeforeInput),s.createElement("jb-pin-input",{ref:n,class:i.className,label:i.label,message:i.message??""},i.children)});w.displayName="JBPinInput";function Te(){return s.createElement("div",{className:"pin-input-test-wrapper"},s.createElement("div",{className:"bottom-line-test"},s.createElement("h1",null,"pin input bottom line style test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null," --jb-pin-input-bottom-line-height:10px;"),s.createElement("p",null," --jb-pin-input-bottom-line-border-radius:0px"),s.createElement("p",null," --jb-pin-input-bottom-line-color:black;"),s.createElement("p",null,"--jb-pin-input-bottom-line-color-active:#ececec;"))),s.createElement("div",{className:"bottom-line-display"},s.createElement("h1",null,"pin input bottom line display test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null," --jb-pin-input-bottom-line-height:10px;"),s.createElement("p",null," --jb-pin-input-bottom-line-border-radius:0px"),s.createElement("p",null," --jb-pin-input-bottom-line-color:black;"),s.createElement("p",null,"--jb-pin-input-bottom-line-color-active:#ececec;"))),s.createElement("div",{className:"input-border-display"},s.createElement("h1",null,"pin input border display test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null,"--jb-pin-input-wrapper-border-width:4px;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-color:black"),s.createElement("p",null,"--jb-pin-input-bottom-line-display:none;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-radius:5px;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-color-active:#ececec;"),s.createElement("p",null,"--jb-pin-input-inputs-wrapper-width:500px;"),s.createElement("p",null,"--jb-pin-input-pin-input-wrapper-height:25px;"),s.createElement("p",null," --jb-pin-input-pin-font-size:16px;"),s.createElement("p",null,"--jb-pin-input-pin-font-weight:600;"),s.createElement("p",null,"--jb-pin-input-wrapper-box-shadow:0px 0px 1px 1px #ececec;"),s.createElement("p",null,"--jb-pin-input-error-message-margin:12px 24px;"))))}const ze={title:"Components/form elements/JBPinInput",component:w},A={args:{label:"pin input",message:"please fill the pin",value:""}},K={args:{label:"autofocus",autofocus:!0,value:""}},S={args:{label:"8 digit pin",value:"",charLength:8}},q={args:{label:"with error",message:"simple message",error:"error message",value:""}},N={args:{label:"required",required:!0}},B={render:i=>{const e=d.useRef(null),t=[{validator:n=>n.startsWith("1"),message:"pin input must be start with 1"}];return s.createElement("div",{ref:e},s.createElement(w,{...i,ref:e,validationList:t,onComplete:n=>console.log("complete",n),required:!0,onChange:()=>{console.log("change")}}))},args:{label:"will jump on overflow"}},F={render:()=>s.createElement(Te,null)};var O,U,_;A.parameters={...A.parameters,docs:{...(O=A.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    label: 'pin input',
    message: "please fill the pin",
    value: ""
  }
}`,...(_=(U=A.parameters)==null?void 0:U.docs)==null?void 0:_.source}}};var G,Q,X;K.parameters={...K.parameters,docs:{...(G=K.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    label: 'autofocus',
    autofocus: true,
    value: ""
  }
}`,...(X=(Q=K.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};var Y,Z,ee;S.parameters={...S.parameters,docs:{...(Y=S.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    label: '8 digit pin',
    value: "",
    charLength: 8
  }
}`,...(ee=(Z=S.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};var te,ne,re;q.parameters={...q.parameters,docs:{...(te=q.parameters)==null?void 0:te.docs,source:{originalSource:`{
  args: {
    label: 'with error',
    message: "simple message",
    error: "error message",
    value: ""
  }
}`,...(re=(ne=q.parameters)==null?void 0:ne.docs)==null?void 0:re.source}}};var ie,se,ae;N.parameters={...N.parameters,docs:{...(ie=N.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    label: 'required',
    required: true
  }
}`,...(ae=(se=N.parameters)==null?void 0:se.docs)==null?void 0:ae.source}}};var oe,le,pe;B.parameters={...B.parameters,docs:{...(oe=B.parameters)==null?void 0:oe.docs,source:{originalSource:`{
  render: args => {
    const ref = useRef(null);
    const validationList = [{
      validator: value => {
        return value.startsWith("1");
      },
      message: "pin input must be start with 1"
    }];
    return <div ref={ref}>
          <JBPinInput {...args} ref={ref} validationList={validationList} onComplete={e => console.log("complete", e)} required onChange={() => {
        console.log("change");
      }} />
        </div>;
  },
  args: {
    label: "will jump on overflow"
  }
}`,...(pe=(le=B.parameters)==null?void 0:le.docs)==null?void 0:pe.source}}};var ue,ce,de;F.parameters={...F.parameters,docs:{...(ue=F.parameters)==null?void 0:ue.docs,source:{originalSource:`{
  render: () => <JBPinInputStyleTest></JBPinInputStyleTest>
}`,...(de=(ce=F.parameters)==null?void 0:ce.docs)==null?void 0:de.source}}};const He=["Normal","AutoFocus","charLength","WithError","Required","WithValidation","PinInputStyle"];export{K as AutoFocus,A as Normal,F as PinInputStyle,N as Required,q as WithError,B as WithValidation,He as __namedExportsOrder,S as charLength,ze as default};
