var qe=Object.defineProperty;var H=r=>{throw TypeError(r)};var Be=(r,e,t)=>e in r?qe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var A=(r,e,t)=>Be(r,typeof e!="symbol"?e+"":e,t),P=(r,e,t)=>e.has(r)||H("Cannot "+t);var p=(r,e,t)=>(P(r,e,"read from private field"),t?t.call(r):e.get(r)),h=(r,e,t)=>e.has(r)?H("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),g=(r,e,t,n)=>(P(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),a=(r,e,t)=>(P(r,e,"access private method"),t);import{R as s,r as d}from"./index-DhY--VwN.js";import{e as Fe}from"./jb-validation-BFHHOeHY.js";import{j as Ne}from"./index-C1o-zhIV.js";import{r as b}from"./index-DyzajnmT.js";var L,f,M,me,J;const Te=new(J=class{constructor(){h(this,f);A(this,"locale");h(this,L,{localeChange:[]});a(this,f,M).call(this),a(this,f,me).call(this)}setLocale(r){this.locale=r,this.callListeners("localeChange")}addEventListener(r,e){p(this,L)[r].push(e)}callListeners(r){p(this,L)[r].forEach(e=>e())}},L=new WeakMap,f=new WeakSet,M=function(){var r;(((r=document==null?void 0:document.documentElement)==null?void 0:r.lang)||"en")==="fa"?this.locale=new Intl.Locale("fa",{calendar:"persian",numeric:!1,region:"IR"}):this.locale=new Intl.Locale("en",{calendar:"gregory",region:"US"})},me=function(){new MutationObserver(r=>{r.forEach(e=>{e.attributeName=="lang"&&(a(this,f,M).call(this),this.callListeners("localeChange"))})}).observe(document.documentElement,{attributeFilter:["lang"],childList:!1,subtree:!1,attributes:!0})},J);var m,x,C,k,i,be,R,I,v,W,j,ge,y,ve,fe,V,Ee,we,ye,je,Le,xe,Ce,ke,Ie,Ve,D,Ae,Ke,O,De=(O=class extends HTMLElement{constructor(){super();h(this,i);A(this,"elements");h(this,m);h(this,x,!0);h(this,C,!1);h(this,k,!1);h(this,I,6);h(this,v,new Fe({clearValidationError:this.clearValidationError.bind(this),showValidationError:this.showValidationError.bind(this),getValue:()=>this.value,getValueString:()=>this.value,setValidationResult:a(this,i,Ae).bind(this),getValidations:a(this,i,Ke).bind(this)}));A(this,"initialValue","");h(this,y,!1);h(this,V,"");typeof this.attachInternals=="function"&&g(this,m,this.attachInternals()),this.initWebComponent()}static get formAssociated(){return!0}get emptyChar(){return"-"}get disabled(){return p(this,C)}set disabled(e){var t,n;g(this,C,e),this.elements.inputs.forEach(o=>o.disabled=e),e?(t=p(this,m).states)==null||t.add("disabled"):(n=p(this,m).states)==null||n.delete("disabled")}set required(e){g(this,k,e),a(this,i,D).call(this,!1)}get required(){return p(this,k)}get value(){return a(this,i,be).call(this,this.emptyChar)}set value(e){const t=a(this,i,W).call(this,e);a(this,i,R).call(this,t)}get charLength(){return p(this,I)}set charLength(e){g(this,I,e),this.initInputsDom()}get validation(){return p(this,v)}get isDirty(){return this.value!==this.initialValue}get name(){return this.getAttribute("name")||""}connectedCallback(){this.callOnLoadEvent(),this.initProp(),this.callOnInitEvent()}callOnLoadEvent(){const e=new CustomEvent("load",{bubbles:!0,composed:!0});this.dispatchEvent(e)}callOnInitEvent(){const e=new CustomEvent("init",{bubbles:!0,composed:!0});this.dispatchEvent(e)}initWebComponent(){const e=this.attachShadow({mode:"open",delegatesFocus:!0});Ne();const t=document.createElement("template");t.innerHTML=`<style>:host(:focus),:host(:focus-visible){outline:none}.jb-pin-input-web-component .inputs-wrapper{width:var(--jb-pin-input-inputs-wrapper-width,100%);direction:ltr;justify-content:center;align-items:center;gap:8px;display:flex}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper{border:var(--jb-pin-input-wrapper-border-width,0)var(--jb-pin-input-wrapper-border-style,solid)var(--wrapper-border-color);border-radius:var(--wrapper-border-radius)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input{color:var(--pin-color);box-sizing:border-box;width:100%;min-width:8px;height:var(--jb-pin-input-pin-height,40px);text-align:center;font-family:inherit;font-size:var(--jb-pin-input-pin-font-size,24px);font-weight:var(--jb-pin-input-pin-font-weight,900);background-color:#0000;border:none}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input:focus{outline:none}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper .pin-input-shape{background-color:var(--bottom-line-color);border-radius:var(--bottom-line-border-radius);width:100%;height:var(--jb-pin-input-bottom-line-height,4px);display:var(--jb-pin-input-bottom-line-display,block)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper:focus-within{border-color:var(--border-color-active);box-shadow:var(--jb-pin-input-wrapper-box-shadow,none)}.jb-pin-input-web-component .inputs-wrapper .pin-input-wrapper:focus-within .pin-input-shape{background-color:var(--bottom-line-color-active)}.jb-pin-input-web-component .message-box{font-size:var(--jb-pin-input-message-font-size,.7rem);color:var(--message-color);display:var(--jb-pin-input-message-box-display,block);padding:4px 0}.jb-pin-input-web-component .message-box:empty{padding:0}.jb-pin-input-web-component .message-box.error{color:var(--message-error-color)} :host{--wrapper-border-radius:var(--jb-pin-input-wrapper-border-radius,var(--jb-radius));--bottom-line-border-radius:var(--jb-pin-input-bottom-line-border-radius,var(--jb-radius));--wrapper-border-color:var(--jb-pin-input-wrapper-border-color,var(--jb-neutral));--pin-color:var(--jb-pin-input-pin-color,var(--jb-text-primary));--bottom-line-color:var(--jb-pin-input-bottom-line-color,var(--jb-neutral-8));--border-color-active:var(--jb-pin-input-wrapper-border-color-active,var(--jb-primary));--bottom-line-color-active:var(--jb-pin-input-bottom-line-color-active,var(--jb-primary));--message-color:var(--jb-pin-input-message-color,var(--jb-text-secondary));--message-error-color:var(--jb-pin-input-message-error-color,var(--jb-red))}</style>

  <div class="jb-pin-input-web-component">
    <div class="inputs-wrapper">
    </div>
    <div class="message-box" part="message"></div>
  </div>
  `,e.appendChild(t.content.cloneNode(!0)),this.elements={inputsWrapper:e.querySelector(".inputs-wrapper"),inputs:[],messageBox:e.querySelector(".message-box")}}registerEventListener(){}initProp(){this.initInputsDom(),this.registerEventListener()}static get observedAttributes(){return["autofocus","char-length","required","message","error"]}attributeChangedCallback(e,t,n){this.onAttributeChange(e,n)}onAttributeChange(e,t){switch(e){case"autofocus":t=="true"&&this.elements.inputs[0]&&this.elements.inputs[0].focus();break;case"char-length":Number.isInteger(Number(t))&&(this.charLength=Number(t));break;case"message":this.elements.messageBox.classList.contains("error")||(this.elements.messageBox.innerHTML=t);break;case"error":this.reportValidity()}}initInputsDom(){const e=this.createInputs();this.elements.inputs=e.map(t=>t.querySelector(".pin-input")),this.elements.inputsWrapper.innerHTML="",e.forEach(t=>{this.elements.inputsWrapper.appendChild(t)}),this.getAttribute("autofocus")=="true"&&this.elements.inputs[0]&&this.elements.inputs[0].focus()}createInputs(){const e=[];for(let t=0;t<this.charLength;t++){const n=this.createInput(t);e.push(n)}return e}createInput(e){const t=document.createElement("div");t.classList.add("pin-input-wrapper");const n=document.createElement("input");n.classList.add("pin-input"),n.addEventListener("keypress",a(this,i,we).bind(this)),n.addEventListener("keyup",a(this,i,ke).bind(this)),n.addEventListener("beforeinput",a(this,i,xe).bind(this)),n.addEventListener("blur",a(this,i,fe).bind(this)),n.addEventListener("focus",a(this,i,ve).bind(this)),n.addEventListener("input",u=>a(this,i,ye).call(this,u),{passive:!0}),n.addEventListener("paste",a(this,i,ge).bind(this)),n.setAttribute("inputmode","numeric"),n.setAttribute("pattern","[0-9]*");const o=document.createElement("div");return o.classList.add("pin-input-shape"),t.appendChild(n),t.appendChild(o),t.setAttribute("data-pin-index",e.toString()),t}onInputKeyDown(e){const t={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which},n=new KeyboardEvent("keydown",t);this.dispatchEvent(n)}showValidationError(e){const t=typeof e=="string"?e:e.message;this.elements.messageBox.innerHTML=t,this.elements.messageBox.classList.add("error")}clearValidationError(){const e=this.getAttribute("message")||"";this.elements.messageBox.innerHTML=e,this.elements.messageBox.classList.remove("error")}get isAutoValidationDisabled(){return this.getAttribute("disable-auto-validation")===""||this.getAttribute("disable-auto-validation")==="true"}checkValidity(){const e=p(this,v).checkValiditySync({showError:!1});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}reportValidity(){const e=p(this,v).checkValiditySync({showError:!0});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}get validationMessage(){return p(this,m).validationMessage}focus(){var t;const e=this.elements.inputs.find(n=>n.value=="");e?e.focus():(t=this.elements.inputs[this.elements.inputs.length-1])==null||t.focus()}},m=new WeakMap,x=new WeakMap,C=new WeakMap,k=new WeakMap,i=new WeakSet,be=function(e){const t=this.elements.inputs.map(n=>n.value||e).join("");return a(this,i,W).call(this,t)},R=function(e){this.elements.inputs.forEach((t,n)=>{Number.isNaN(e[n])||e[n]===""||e[n]==this.emptyChar||e[n]==null||e[n]==null?t.value="":t.value=e[n]}),p(this,m)&&typeof p(this,m).setFormValue=="function"&&p(this,m).setFormValue(e)},I=new WeakMap,v=new WeakMap,W=function(e){let t=e;return p(this,x)&&(t=a(this,i,j).call(this,t)),t},j=function(e){let t=e;return p(this,x)&&typeof e=="string"&&(t=e.replace(/\u06F0/g,"0").replace(/\u06F1/g,"1").replace(/\u06F2/g,"2").replace(/\u06F3/g,"3").replace(/\u06F4/g,"4").replace(/\u06F5/g,"5").replace(/\u06F6/g,"6").replace(/\u06F7/g,"7").replace(/\u06F8/g,"8").replace(/\u06F9/g,"9")),t},ge=function(e){e.preventDefault();let t=e.clipboardData.getData("text");const n=Number(e.target.parentElement.dataset.pinIndex),o=new RegExp(`(.*\\D|^)(?<pin>[0-9]{${this.charLength}})(\\D.*|$)`);t=a(this,i,j).call(this,t);const u=o.exec(t);let l="";if(u&&u.groups&&u.groups.pin){l=u.groups.pin,a(this,i,R).call(this,l);const c=this.value.length;this.value.length>0&&this.elements.inputs[c-1].focus()}else{const c=t.match(`[0-9]{1,${this.charLength}}`);if(c){const z=c[0],$=[...this.value],Se=Math.min(this.charLength-n,z.length);let E;for(E=0;E<Se;E++)$[n+E]=z[E];this.elements.inputs[E].focus(),this.value=$.join("")}}},y=new WeakMap,ve=function(e){p(this,y)?g(this,y,!1):g(this,V,this.value)},fe=function(e){const t=e.relatedTarget;this.elements.inputs.includes(t)||a(this,i,Ee).call(this)},V=new WeakMap,Ee=function(){a(this,i,D).call(this,!0),this.value!==p(this,V)&&a(this,i,Ve).call(this)},we=function(e){const t={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,detail:e.detail,isComposing:e.isComposing,location:e.location,metaKey:e.metaKey,view:e.view,repeat:e.repeat},n=new KeyboardEvent("keypress",t);this.dispatchEvent(n)},ye=function(e){const t=e.target,n=parseInt(t.parentElement.dataset.pinIndex);let o=n;const u=a(this,i,j).call(this,e.target.value),l=!(n+1<this.charLength);if(/[0-9]+/g.test(u)&&(o=l?this.charLength-1:n+1),n!==o){const c=this.elements.inputs[o];g(this,y,!0),c.focus()}a(this,i,Le).call(this,e),a(this,i,D).call(this,!1).then(c=>{e.inputType!=="deleteContentBackward"&&l&&c.isAllValid&&a(this,i,je).call(this)})},je=function(){const e=new CustomEvent("complete",{bubbles:!0,composed:!0,cancelable:!1});this.dispatchEvent(e)},Le=function(e){const t=new InputEvent("input",{cancelable:!1});this.dispatchEvent(t)},xe=function(e){const t=e.target,n=e.data,o=a(this,i,j).call(this,n);if(/[0-9]+/g.test(o))t.value.length>0&&(t.value="");else if(e.inputType==="deleteContentBackward"){if(t.value==""){const u=parseInt(t.parentElement.dataset.pinIndex),l=u==0?0:u-1;this.elements.inputs[l].focus()}}else e.preventDefault();a(this,i,Ce).call(this,e)},Ce=function(e){const t=new InputEvent("beforeinput",{cancelable:!1});this.dispatchEvent(t)},ke=function(e){const t=e.target,n=parseInt(t.parentElement.dataset.pinIndex);let o=n;switch(e.keyCode){case 39:o=n+1<this.charLength?n+1:this.charLength-1;break;case 37:o=n>0?n-1:0}o!==n&&this.elements.inputs[o].focus();const u={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which},l=new KeyboardEvent("keyup",u);this.dispatchEvent(l),e.keyCode==13&&a(this,i,Ie).call(this)},Ie=function(){const e=new CustomEvent("enter");this.dispatchEvent(e)},Ve=function(){const e=new Event("change",{cancelable:!1,bubbles:!0,composed:!0});this.dispatchEvent(e)},D=function(e){if(!this.isAutoValidationDisabled)return p(this,v).checkValidity({showError:e})},Ae=function(e){if(e.isAllValid)p(this,m).setValidity({},"");else{const t={};let n="";e.validationList.forEach(o=>{o.isValid||(o.validation.stateType&&(t[o.validation.stateType]=!0),n==""&&(n=o.message))}),p(this,m).setValidity(t,n)}},Ke=function(){const e=[];var t,n;return this.getAttribute("error")!==null&&this.getAttribute("error").trim().length>0&&e.push({validator:void 0,message:this.getAttribute("error"),stateType:"customError"}),this.required&&e.push({validator:o=>o.length==this.charLength&&!o.includes(this.emptyChar),message:(t=Te,n=null,t.locale.language==="fa"?n?`لطفاً ${n} خود را وارد نمایید`:"لطفاً این قسمت را پر کنید":n?`Please enter your ${n}`:"Please complete this field"),stateType:"valueMissing"}),e},O);customElements.get("jb-pin-input")||window.customElements.define("jb-pin-input",De);let w=s.forwardRef((r,e)=>{var t;let n=d.useRef(null),[o,u]=d.useState(0);return d.useImperativeHandle(e,()=>n?n.current:void 0,[n]),d.useEffect(()=>{u(o+1)},[n.current]),d.useEffect(()=>{let l=t.value;(t.value==null||t.value===void 0)&&(l=""),n.current&&(n.current.value=(l==null?void 0:l.toString())||"")},[(t=r).value]),d.useEffect(()=>{n&&n.current&&(n.current.validation.list=t.validationList||[])},[t.validationList]),d.useEffect(()=>{var l;typeof t.disabled=="boolean"&&((l=n.current)==null||l.setAttribute("disabled",`${t.disabled}`))},[t.disabled]),d.useEffect(()=>{typeof t.charLength=="number"&&n.current&&(n.current.charLength=t.charLength)},[t.charLength]),d.useEffect(()=>{var l,c;t.inputmode?(l=n.current)==null||l.setAttribute("inputmode",t.inputmode):(c=n.current)==null||c.removeAttribute("inputmode")},[t.inputmode]),d.useEffect(()=>{var l;t.autofocus&&((l=n.current)==null||l.setAttribute("autofocus","true"))},[t.autofocus]),d.useEffect(()=>{n.current&&typeof t.required=="boolean"&&(n.current.required=t.required)},[n,t.required]),d.useEffect(()=>{var l,c;t.error?(l=n==null?void 0:n.current)==null||l.setAttribute("error",t.error):(c=n==null?void 0:n.current)==null||c.removeAttribute("error")},[t.error]),b(n,"change",r.onChange),b(n,"keydown",r.onKeyDown),b(n,"keyup",r.onKeyUp),b(n,"focus",r.onFocus),b(n,"blur",r.onBlur),b(n,"enter",r.onEnter),b(n,"input",r.onInput),b(n,"complete",r.onComplete),b(n,"beforeinput",r.onBeforeInput),s.createElement("jb-pin-input",{ref:n,class:r.className,label:r.label,message:r.message??""},r.children)});w.displayName="JBPinInput";function Pe(){return s.createElement("div",{className:"pin-input-test-wrapper"},s.createElement("div",{className:"bottom-line-test"},s.createElement("h1",null,"pin input bottom line style test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null," --jb-pin-input-bottom-line-height:10px;"),s.createElement("p",null," --jb-pin-input-bottom-line-border-radius:0px"),s.createElement("p",null," --jb-pin-input-bottom-line-color:black;"),s.createElement("p",null,"--jb-pin-input-bottom-line-color-active:#ececec;"))),s.createElement("div",{className:"bottom-line-display"},s.createElement("h1",null,"pin input bottom line display test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null," --jb-pin-input-bottom-line-height:10px;"),s.createElement("p",null," --jb-pin-input-bottom-line-border-radius:0px"),s.createElement("p",null," --jb-pin-input-bottom-line-color:black;"),s.createElement("p",null,"--jb-pin-input-bottom-line-color-active:#ececec;"))),s.createElement("div",{className:"input-border-display"},s.createElement("h1",null,"pin input border display test"),s.createElement(w,null),s.createElement("div",null,s.createElement("h3",null,"customize pin input"),s.createElement("p",null,"--jb-pin-input-wrapper-border-width:4px;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-color:black"),s.createElement("p",null,"--jb-pin-input-bottom-line-display:none;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-radius:5px;"),s.createElement("p",null,"--jb-pin-input-wrapper-border-color-active:#ececec;"),s.createElement("p",null,"--jb-pin-input-inputs-wrapper-width:500px;"),s.createElement("p",null,"--jb-pin-input-pin-input-wrapper-height:25px;"),s.createElement("p",null," --jb-pin-input-pin-font-size:16px;"),s.createElement("p",null,"--jb-pin-input-pin-font-weight:600;"),s.createElement("p",null,"--jb-pin-input-wrapper-box-shadow:0px 0px 1px 1px #ececec;"),s.createElement("p",null,"--jb-pin-input-error-message-margin:12px 24px;"))))}const He={title:"Components/form elements/JBPinInput",component:w},K={args:{label:"pin input",message:"please fill the pin",value:""}},S={args:{label:"autofocus",autofocus:!0,value:""}},q={args:{label:"8 digit pin",value:"",charLength:8}},B={args:{label:"with error",message:"simple message",error:"error message",value:""}},F={args:{label:"required",required:!0}},N={render:r=>{const e=d.useRef(null),t=[{validator:n=>n.startsWith("1"),message:"pin input must be start with 1"}];return s.createElement("div",{ref:e},s.createElement(w,{...r,ref:e,validationList:t,onComplete:n=>console.log("complete",n),required:!0,onChange:()=>{console.log("change")}}))},args:{label:"will jump on overflow"}},T={render:()=>s.createElement(Pe,null)};var U,_,G;K.parameters={...K.parameters,docs:{...(U=K.parameters)==null?void 0:U.docs,source:{originalSource:`{
  args: {
    label: 'pin input',
    message: "please fill the pin",
    value: ""
  }
}`,...(G=(_=K.parameters)==null?void 0:_.docs)==null?void 0:G.source}}};var Q,X,Y;S.parameters={...S.parameters,docs:{...(Q=S.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    label: 'autofocus',
    autofocus: true,
    value: ""
  }
}`,...(Y=(X=S.parameters)==null?void 0:X.docs)==null?void 0:Y.source}}};var Z,ee,te;q.parameters={...q.parameters,docs:{...(Z=q.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    label: '8 digit pin',
    value: "",
    charLength: 8
  }
}`,...(te=(ee=q.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var ne,re,ie;B.parameters={...B.parameters,docs:{...(ne=B.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    label: 'with error',
    message: "simple message",
    error: "error message",
    value: ""
  }
}`,...(ie=(re=B.parameters)==null?void 0:re.docs)==null?void 0:ie.source}}};var se,ae,oe;F.parameters={...F.parameters,docs:{...(se=F.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    label: 'required',
    required: true
  }
}`,...(oe=(ae=F.parameters)==null?void 0:ae.docs)==null?void 0:oe.source}}};var le,pe,ue;N.parameters={...N.parameters,docs:{...(le=N.parameters)==null?void 0:le.docs,source:{originalSource:`{
  render: args => {
    const ref = useRef(null);
    const validationList = [{
      validator: value => {
        return value.startsWith("1");
      },
      message: "pin input must be start with 1"
    }];
    return <div ref={ref}>
          <JBPinInput {...args} ref={ref} validationList={validationList} onComplete={e => console.log("complete", e)} required onChange={() => {
        console.log("change");
      }} />
        </div>;
  },
  args: {
    label: "will jump on overflow"
  }
}`,...(ue=(pe=N.parameters)==null?void 0:pe.docs)==null?void 0:ue.source}}};var ce,de,he;T.parameters={...T.parameters,docs:{...(ce=T.parameters)==null?void 0:ce.docs,source:{originalSource:`{
  render: () => <JBPinInputStyleTest></JBPinInputStyleTest>
}`,...(he=(de=T.parameters)==null?void 0:de.docs)==null?void 0:he.source}}};const Je=["Normal","AutoFocus","charLength","WithError","Required","WithValidation","PinInputStyle"];export{S as AutoFocus,K as Normal,T as PinInputStyle,F as Required,B as WithError,N as WithValidation,Je as __namedExportsOrder,q as charLength,He as default};
