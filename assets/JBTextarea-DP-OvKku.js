var ie=Object.defineProperty;var R=t=>{throw TypeError(t)};var se=(t,e,a)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var x=(t,e,a)=>se(t,typeof e!="symbol"?e+"":e,a),z=(t,e,a)=>e.has(t)||R("Cannot "+a);var i=(t,e,a)=>(z(t,e,"read from private field"),a?a.call(t):e.get(t)),b=(t,e,a)=>e.has(t)?R("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),m=(t,e,a,r)=>(z(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),n=(t,e,a)=>(z(t,e,"access private method"),a);import{R as I,r as w}from"./index-D4lIrffr.js";import{e as ne}from"./jb-validation-BFHHOeHY.js";import{r as p}from"./index-B65NTg4l.js";var u=class{constructor(t,e){x(this,"lightness");x(this,"chroma");x(this,"hue");x(this,"variableName");this.variableName=e,this.lightness=t.lightness,this.chroma=t.chroma,this.hue=t.hue}get value(){return`oklch(${this.lightness} ${this.chroma} ${this.hue})`}};function c(t){return new u({lightness:6*(3+1.3*t)*.01,chroma:.001*(14+.09*t),hue:258.36},`--jb-neutral-${t}`)}function C(t){return new u({lightness:t.lightness+.07,chroma:t.chroma+.07,hue:t.hue},`${t.variableName}-hover`)}function K(t){return new u({lightness:t.lightness-.1,chroma:t.chroma-.05,hue:t.hue},`${t.variableName}-pressed`)}function N(t){const e=Math.min(t.lightness+.12*(1-t.lightness),.985),a=t.chroma*(1-.15*(e-t.lightness));return new u({lightness:e,chroma:Number(a.toFixed(3)),hue:t.hue},`${t.variableName}-l`)}function A(t){const e=Math.max(t.lightness-.12*t.lightness,.02),a=t.chroma*(1-.15*(e-t.lightness));return new u({lightness:e,chroma:a,hue:t.hue},`${t.variableName}-d`)}function T(t){const e=Math.min(t.lightness+.65*(1-t.lightness),.93),a=.55*t.chroma*(1-.08*(e-t.lightness)),r=t.hue>=70&&t.hue<=162?5:-3,h=t.hue+r;return new u({lightness:e,chroma:Number(a.toFixed(3)),hue:h},`${t.variableName}-subtle`)}function L(t){const e=Math.max(t.lightness-.35,.22),a=Math.min(1.6*t.chroma,.28);return new u({lightness:Number(e.toFixed(3)),chroma:Number(a.toFixed(3)),hue:t.hue},`${t.variableName}-contrast`)}const f=new u({lightness:.6,chroma:.26,hue:256},"--jb-primary"),j=new u({lightness:.6,chroma:.26,hue:286},"--jb-secondary"),V=new u({lightness:.75,chroma:.18,hue:70},"--jb-yellow"),E=new u({lightness:.68,chroma:.1484,hue:162.1},"--jb-green"),k=new u({lightness:.6,chroma:.22,hue:23.21},"--jb-red"),F={single:{black:new u({lightness:.14,chroma:0,hue:0},"--jb-black"),white:new u({lightness:1,chroma:0,hue:0},"--jb-white"),highlight:new u({lightness:.93,chroma:.2302,hue:125.18},"--jb-highlight")},neutral:[c(0),c(1),c(2),c(3),c(4),c(5),c(6),c(7),c(8),c(9),c(10)],primary:{main:f,hover:C(f),pressed:K(f),light:N(f),dark:A(f),subtle:T(f),contrast:L(f)},secondary:{main:j,hover:C(j),pressed:K(j),light:N(j),dark:A(j),subtle:T(j),contrast:L(j)},yellow:{main:V,hover:C(V),pressed:K(V),light:N(V),dark:A(V),subtle:T(V),contrast:L(V)},green:{main:E,hover:C(E),pressed:K(E),light:N(E),dark:A(E),subtle:T(E),contrast:L(E)},red:{main:k,hover:C(k),pressed:K(k),light:N(k),dark:A(k),subtle:T(k),contrast:L(k)}};function l(t){try{const{value:e,...a}=t;window.CSS.registerProperty({...a}),function(r,h){try{h&&(document.documentElement.style.getPropertyValue(r)||document.documentElement.style.setProperty(r,h))}catch{}}(t.name,e)}catch{}}function le(){var t;l({name:"--jb-radius",inherits:!0,value:"1rem",initialValue:"16px",syntax:"<length-percentage>"}),l({name:"--jb-radius-xs",inherits:!0,value:"0.5rem",initialValue:"8px",syntax:"<length-percentage>"}),l({name:"--jb-radius-sm",inherits:!0,value:"0.75rem",initialValue:"12px",syntax:"<length-percentage>"}),l({name:"--jb-radius-lg",inherits:!0,value:"1.25rem",initialValue:"20px",syntax:"<length-percentage>"}),l({name:"--jb-radius-xl",inherits:!0,value:"1.5rem",initialValue:"24px",syntax:"<length-percentage>"}),function(e){l({name:e.primary.main.variableName,syntax:"<color>",inherits:!0,initialValue:e.primary.main.value}),l({name:e.secondary.main.variableName,syntax:"<color>",inherits:!0,initialValue:e.secondary.main.value}),l({name:"--jb-neutral",syntax:"<color>",inherits:!0,initialValue:e.neutral[0].value}),l({name:e.single.black.variableName,syntax:"<color>",inherits:!0,initialValue:e.single.black.value}),l({name:e.single.white.variableName,syntax:"<color>",inherits:!0,initialValue:e.single.white.value}),l({name:e.single.highlight.variableName,syntax:"<color>",inherits:!0,initialValue:e.single.highlight.value}),l({name:e.yellow.main.variableName,syntax:"<color>",inherits:!0,initialValue:e.yellow.main.value}),l({name:e.green.main.variableName,syntax:"<color>",inherits:!0,initialValue:e.green.main.value}),l({name:e.red.main.variableName,syntax:"<color>",inherits:!0,initialValue:e.red.main.value}),l({name:"--jb-neutral",syntax:"<color>",inherits:!0,initialValue:e.neutral[0].value});for(let a=1;a<=10;a++)l({name:e.neutral[a].variableName,syntax:"<color>",inherits:!0,initialValue:e.neutral[a].value})}(F),l({name:"--jb-text-primary",syntax:"<color>",inherits:!0,initialValue:(t=F).single.black.value}),l({name:"--jb-text-secondary",syntax:"<color>",inherits:!0,initialValue:t.neutral[7].value}),l({name:"--jb-text-contrast",syntax:"<color>",inherits:!0,initialValue:t.single.white.value})}var v,q,H,M,d,g,o,s,B,U,y,G,J,S,O,Q,W,X,Y,Z,_,ee,te,ae,D,re,P,oe=(P=class extends HTMLElement{constructor(){super();b(this,s);b(this,v,"");b(this,q,!1);b(this,H,!1);b(this,M,!1);b(this,d);x(this,"initialValue","");b(this,g);b(this,o);x(this,"autoHeight",!1);b(this,y,new ne({clearValidationError:this.clearValidationError.bind(this),getValue:()=>i(this,v),getValueString:()=>this.value,getValidations:n(this,s,ae).bind(this),setValidationResult:n(this,s,re).bind(this),showValidationError:this.showValidationError.bind(this)}));typeof this.attachInternals=="function"&&m(this,d,this.attachInternals()),n(this,s,B).call(this),n(this,s,G).call(this)}static get formAssociated(){return!0}get value(){return i(this,v)}set value(e){m(this,v,e),i(this,g).value=e,this.autoHeight&&n(this,s,S).call(this)}get isAutoValidationDisabled(){return i(this,q)}set isAutoValidationDisabled(e){m(this,q,e)}get disabled(){return i(this,H)}set disabled(e){var a,r;m(this,H,e),i(this,o).textarea.disabled=e,e?(a=i(this,d).states)==null||a.add("disabled"):(r=i(this,d).states)==null||r.delete("disabled")}set required(e){m(this,M,e),i(this,y).checkValiditySync({showError:!1})}get required(){return i(this,M)}get name(){return this.getAttribute("name")||""}get isDirty(){return i(this,v)!==this.initialValue}get validation(){return i(this,y)}static get observedAttributes(){return["label","message","value","placeholder","required","error"]}attributeChangedCallback(e,a,r){n(this,s,J).call(this,e,r)}showValidationError(e){var r;const a=typeof e=="string"?e:e.message;(r=i(this,d).states)==null||r.add("invalid"),i(this,o).messageBox.innerHTML=a}clearValidationError(){var a;const e=this.getAttribute("message")||"";(a=i(this,d).states)==null||a.delete("invalid"),i(this,o).messageBox.innerHTML=e}get validationMessage(){return i(this,d).validationMessage}checkValidity(){const e=i(this,y).checkValiditySync({showError:!1});if(!e.isAllValid){const a=new CustomEvent("invalid");this.dispatchEvent(a)}return e.isAllValid}reportValidity(){const e=i(this,y).checkValiditySync({showError:!0});if(!e.isAllValid){const a=new CustomEvent("invalid");this.dispatchEvent(a)}return e.isAllValid}},v=new WeakMap,q=new WeakMap,H=new WeakMap,M=new WeakMap,d=new WeakMap,g=new WeakMap,o=new WeakMap,s=new WeakSet,B=function(){const e=this.attachShadow({mode:"open",delegatesFocus:!0});le();const a=document.createElement("template");a.innerHTML=`<style>:host{--border-radius:var(--jb-textarea-border-radius , var(--jb-radius));--border-color:var(--jb-textarea-border-color, var(--jb-neutral-10));--message-color:var(--jb-textarea-message-color, var(--jb-text-secondary));--label-color: var(--jb-textarea-label-color, var(--jb-text-primary));--value-color: var(--jb-textarea-value-color, var(--jb-text-primary));--placeholder-color: var(--jb-input-placeholder-color, var(--jb-neutral-6));--input-box-bg-color:var(--jb-textarea-bgcolor, var(--jb-neutral-10))}:host(:state(invalid)){--message-color:var(--jb-textarea-message-error-color, var(--jb-red))}:host(:focus-within){--border-color:var(--jb-textarea-border-color-focus, var(--jb-neutral))}:host(:focus),:host(:focus-visible){outline:none}.jb-textarea-web-component{width:100%;margin:var(--jb-textarea-margin, 12px 0)}.jb-textarea-web-component label{width:100%;margin:4px 0px;display:block;font-size:var(--jb-textarea-label-font-size, 0.8em);color:var(--label-color)}.jb-textarea-web-component label.--hide{display:none}.jb-textarea-web-component .textarea-box{width:100%;box-sizing:border-box;border:solid var(--jb-textarea-border-width, 1px) var(--border-color);background-color:var(--input-box-bg-color);border-bottom:solid var(--jb-textarea-border-bottom-width, 3px) var(--border-color);border-radius:var(--border-radius);display:block;transition:ease .3s all;overflow:hidden;display:flex;justify-content:space-between}.jb-textarea-web-component .textarea-box textarea{border:none;width:100%;box-sizing:border-box;min-height:var(--jb-textarea-min-height, 80px);height:var(--jb-textarea-min-height, 80px);max-height:var(--jb-textarea-max-height, none);background-color:rgba(0,0,0,0);padding:6px 12px 4px 12px;display:block;font-family:inherit;font-size:var(--jb-textarea-value-font-size, 1.1em);margin:0;border-radius:0;resize:vertical;color:var(--value-color)}.jb-textarea-web-component .textarea-box textarea:focus{outline:none}.jb-textarea-web-component .textarea-box textarea::placeholder{color:var(--placeholder-color);font-size:var(--jb-textarea-placeholder-font-size, initial)}.jb-textarea-web-component .message-box{font-size:var(--jb-textarea-message-font-size, 0.7em);padding:2px 8px;color:var(--message-color)}.jb-textarea-web-component .message-box:empty{padding:0}</style>
<div class="jb-textarea-web-component">
    <label class="--hide"><span class="label-value"></span><span>:</span></label>
    <div class="textarea-box">
        <textarea class="textarea-input"></textarea>
    </div>
    <div class="message-box"></div>
</div>`,e.appendChild(a.content.cloneNode(!0)),m(this,g,e.querySelector(".textarea-box textarea")),m(this,o,{textarea:i(this,g),label:e.querySelector("label"),labelValue:e.querySelector("label .label-value"),messageBox:e.querySelector(".message-box")}),n(this,s,U).call(this)},U=function(){i(this,o).textarea.addEventListener("change",e=>n(this,s,ee).call(this,e)),i(this,o).textarea.addEventListener("beforeinput",n(this,s,O).bind(this)),i(this,o).textarea.addEventListener("input",e=>n(this,s,Y).call(this,e)),i(this,o).textarea.addEventListener("keypress",n(this,s,X).bind(this)),i(this,o).textarea.addEventListener("keyup",n(this,s,_).bind(this)),i(this,o).textarea.addEventListener("keydown",n(this,s,W).bind(this))},y=new WeakMap,G=function(){this.value=this.getAttribute("value")||""},J=function(e,a){switch(e){case"label":i(this,o).labelValue.innerHTML=a,a==null||a==null||a==""?i(this,o).label.classList.add("--hide"):i(this,o).label.classList.remove("--hide");break;case"message":i(this,o).messageBox.innerHTML=a;break;case"placeholder":i(this,g).setAttribute("placeholder",a);break;case"value":this.value=a;break;case"required":this.required=a===""||a==="true";break;case"error":this.reportValidity()}},S=function(){i(this,g).style.height="4px",i(this,g).style.height=i(this,g).scrollHeight+"px"},O=function(e){n(this,s,Q).call(this,e)},Q=function(e){const a={bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,data:e.data,isComposing:e.isComposing,inputType:e.inputType,dataTransfer:e.dataTransfer,view:e.view,detail:e.detail,targetRanges:e.getTargetRanges()},r=new InputEvent("beforeinput",a);return this.dispatchEvent(r),r.defaultPrevented&&e.preventDefault(),r.defaultPrevented},W=function(e){const a={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which,cancelable:!0,location:e.location,detail:e.detail,bubbles:e.bubbles,composed:e.composed,isComposing:e.isComposing,metaKey:e.metaKey,repeat:e.repeat,view:e.view},r=new KeyboardEvent("keydown",a);this.dispatchEvent(r)||e.preventDefault()},X=function(e){const a={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which,cancelable:!0,location:e.location,detail:e.detail,bubbles:e.bubbles,composed:e.composed,isComposing:e.isComposing,metaKey:e.metaKey,repeat:e.repeat,view:e.view},r=new KeyboardEvent("keypress",a);this.dispatchEvent(r)||e.preventDefault()},Y=function(e){this.autoHeight&&n(this,s,S).call(this),n(this,s,Z).call(this,e)},Z=function(e){const a={bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,data:e.data,dataTransfer:e.dataTransfer,detail:e.detail,inputType:e.inputType,isComposing:e.isComposing,targetRanges:e.getTargetRanges(),view:e.view},r=new InputEvent("input",a);this.dispatchEvent(r)},_=function(e){const a=e.target.value;m(this,v,a),n(this,s,D).call(this,!1);const r={key:e.key,keyCode:e.keyCode,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,charCode:e.charCode,which:e.which,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,detail:e.detail,isComposing:e.isComposing,location:e.location,metaKey:e.metaKey,repeat:e.repeat,view:e.view},h=new KeyboardEvent("keyup",r);this.dispatchEvent(h)},ee=function(e){const a=e.target.value;m(this,v,a),n(this,s,D).call(this,!0),n(this,s,te).call(this).defaultPrevented&&e.preventDefault()},te=function(){const e=new Event("change",{bubbles:!0,cancelable:!0});return this.dispatchEvent(e),e},ae=function(){const e=[];return this.getAttribute("error")!==null&&this.getAttribute("error").trim().length>0&&e.push({validator:void 0,message:this.getAttribute("error"),stateType:"customError"}),this.required&&e.push({validator:/.{1}/g,message:this.getAttribute("label")+" میبایست حتما وارد شود",stateType:"valueMissing"}),e},D=function(e){if(!this.isAutoValidationDisabled)return i(this,y).checkValidity({showError:e})},re=function(e){if(e.isAllValid)i(this,d).setValidity({},"");else{const a={};let r="";e.validationList.forEach(h=>{h.isValid||(h.validation.stateType&&(a[h.validation.stateType]=!0),r==""&&(r=h.message))}),i(this,d).setValidity(a,r)}},P);!customElements.get("jb-textarea")&&window.customElements.define("jb-textarea",oe);let be=I.forwardRef((t,e)=>{{var a;let r=w.useRef(null);return w.useImperativeHandle(e,()=>r?r.current:void 0,[r]),w.useEffect(()=>{let h=a.value||"";r.current&&(r.current.value=h)},[(a=t).value]),w.useEffect(()=>{r.current&&(r.current.validation.list=a.validationList||[])},[a.validationList]),w.useEffect(()=>{r.current&&a.required!==void 0&&(a.required?r.current.setAttribute("required",""):r.current.removeAttribute("required"))},[a.required]),w.useEffect(()=>{r.current&&(r.current.autoHeight=a.autoHeight||!1)},[a.autoHeight]),w.useEffect(()=>{var h,$;a.error?(h=r==null?void 0:r.current)==null||h.setAttribute("error",a.error):($=r==null?void 0:r.current)==null||$.removeAttribute("error")},[a.error]),p(r,"load",t.onLoad,!0),p(r,"init",t.onInit,!0),p(r,"change",t.onChange),p(r,"keydown",t.onKeyDown),p(r,"input",t.onInput),p(r,"keyup",t.onKeyUp),p(r,"focus",t.onFocus),p(r,"blur",t.onBlur),I.createElement("jb-textarea",{placeholder:t.placeholder,class:t.className,style:t.style,ref:r,label:t.label,message:t.message,name:t.name})}});export{be as n};
