var ae=Object.defineProperty;var $=o=>{throw TypeError(o)};var oe=(o,s,e)=>s in o?ae(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var k=(o,s,e)=>oe(o,typeof s!="symbol"?s+"":s,e),q=(o,s,e)=>s.has(o)||$("Cannot "+e);var r=(o,s,e)=>(q(o,s,"read from private field"),e?e.call(o):s.get(o)),p=(o,s,e)=>s.has(o)?$("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(o):s.set(o,e),c=(o,s,e,t)=>(q(o,s,"write to private field"),t?t.call(o,e):s.set(o,e),e),l=(o,s,e)=>(q(o,s,"access private method"),e);import{R,r as u}from"./index-DhY--VwN.js";import{e as ne}from"./jb-validation-BFHHOeHY.js";import{j as le}from"./index-DA-aheCX.js";import{a as se,t as f}from"./index-NH_qbYOC.js";import{r as L}from"./index-BMrwitbN.js";const C=new se({fa:{requiredMessage:"شما حتما باید یک تصویر را انتخاب کنید",maxSizeExceed:(o,s)=>`حجم فایل شما (${s}) بیشتر از حجم مجاز (${o}) است`,chooseImage:"انتخاب تصویر",reselectImage:"انتخاب مجدد تصویر",preparing:"در حال آماده سازی",uploading:"در حال آپلود"},en:{requiredMessage:"You must select a image",maxSizeExceed:(o,s)=>`Your file Size (${s}), Exceed maximum limit (${o})`,chooseImage:"Choose Image",reselectImage:"Reselect Image",preparing:"Preparing Image For Display",uploading:"Uploading"}});var A,S,h,d,I,b,w,m,H,M,V,g,y,i,P,E,N,U,Z,O,W,Y,J,G,K,Q,T,X,z,v,_,ee,te,re,ie,F,j,de=(j=class extends HTMLElement{constructor(){super();p(this,i);p(this,A,!1);p(this,S,null);p(this,h);p(this,d);p(this,I,"image/jpeg,image/jpg,image/png,image/svg+xml");p(this,b,null);p(this,w,null);p(this,m,null);p(this,H,null);k(this,"imageBase64Value",null);p(this,M,!1);p(this,V,!1);p(this,g);p(this,y,new ne({showValidationError:this.showValidationError.bind(this),clearValidationError:this.clearValidationError.bind(this),getValue:()=>({file:r(this,m),value:r(this,w)}),getValidations:l(this,i,ee).bind(this),setValidationResult:l(this,i,te).bind(this),getValueString:()=>this.fileName}));k(this,"initialValue",null);p(this,E,!1);k(this,"config",{uploadUrl:"",downloadUrl:""});k(this,"bridge",{uploader:function(e){return new Promise(t=>{t(e)})},downloader:function(e){return new Promise((t,a)=>{typeof e=="string"&&fetch(e).then(n=>n.blob()).then(n=>{const x=new window.FileReader;x.readAsDataURL(n),x.onload=function(){const B=x.result;t(B)}}).catch(a),e instanceof File&&j.ExtractBase64ImageFromFile(e).then(n=>{t(n)})})}});typeof this.attachInternals=="function"&&c(this,g,this.attachInternals()),l(this,i,P).call(this),l(this,i,N).call(this),l(this,i,U).call(this)}static get formAssociated(){return!0}get value(){return r(this,w)}set value(e){l(this,i,F).call(this,e)}get isAutoValidationDisabled(){return r(this,A)}set isAutoValidationDisabled(e){c(this,A,e)}get selectedImageType(){return r(this,m).type}get status(){return r(this,S)}get multiple(){return r(this,E)}set multiple(e){c(this,E,e),r(this,E)?r(this,h).setAttribute("multiple","multiple"):r(this,h).removeAttribute("multiple")}get acceptTypes(){return r(this,I)}set acceptTypes(e){c(this,I,e),r(this,h)&&(r(this,h).accept=e)}get file(){return r(this,m)}get maxFileSize(){return r(this,b)}set maxFileSize(e){e==null?c(this,b,null):isNaN(e)||typeof e!="number"||c(this,b,e)}get disabled(){return r(this,M)}set disabled(e){var t,a;c(this,M,e),e?(t=r(this,g).states)==null||t.add("disabled"):(a=r(this,g).states)==null||a.delete("disabled")}set required(e){c(this,V,e),r(this,y).checkValidity({showError:!1})}get required(){return r(this,V)}get validation(){return r(this,y)}get name(){return this.getAttribute("name")||""}get isDirty(){return r(this,w)!==this.initialValue}get fileName(){return r(this,m).name}openImageSelector(){r(this,h).click()}static get observedAttributes(){return["required","label","multiple","message"]}attributeChangedCallback(e,t,a){l(this,i,O).call(this,e,a)}async selectImageByFile(e){const t=await this.validation.checkValidity({showError:!0,value:{file:e,value:null}});this.maxFileSize&&e.size>this.maxFileSize&&l(this,i,G).call(this,e),t.isAllValid&&(l(this,i,J).call(this,e),l(this,i,K).call(this,e))}static ExtractBase64ImageFromFile(e){return new Promise((t,a)=>{const n=new FileReader;n.onload=x=>{var D;const B=(D=x.target)==null?void 0:D.result;B?t(B):a(x)},n.readAsDataURL(e)})}onProgressImageUpload(e){c(this,H,e)}showValidationError(e){const t=typeof e=="string"?e:e.message;r(this,d).webComponent.classList.add("--has-error"),r(this,w)?l(this,i,_).call(this,t):(r(this,d).placeHolderMessageBox.innerHTML=t,r(this,d).placeHolderMessageBox.classList.add("error"))}clearValidationError(){r(this,d).webComponent.classList.remove("--has-error"),r(this,d).placeHolderMessageBox.innerHTML=this.getAttribute("message")||"",r(this,d).placeHolderMessageBox.classList.remove("error")}checkValidity(){const e=r(this,y).checkValiditySync({showError:!1});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}reportValidity(){const e=r(this,y).checkValiditySync({showError:!0});if(!e.isAllValid){const t=new CustomEvent("invalid");this.dispatchEvent(t)}return e.isAllValid}get validationMessage(){return r(this,g).validationMessage}},A=new WeakMap,S=new WeakMap,h=new WeakMap,d=new WeakMap,I=new WeakMap,b=new WeakMap,w=new WeakMap,m=new WeakMap,H=new WeakMap,M=new WeakMap,V=new WeakMap,g=new WeakMap,y=new WeakMap,i=new WeakSet,P=function(){const e=this.attachShadow({mode:"open",delegatesFocus:!0});le();const t=`<style>:host{width:var(--jb-image-input-width,100%);height:var(--jb-image-input-height,100%)}.jb-image-input-web-component{background-color:var(--bg-color);border-radius:var(--border-radius);box-sizing:border-box;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:relative;overflow:hidden}.jb-image-input-web-component[status=empty] .placeholder-wrapper{display:flex}.jb-image-input-web-component .placeholder-wrapper{cursor:pointer;background-color:var(--jb-image-input-placeholder-bg-color,transparent);width:100%;height:100%;display:none}.jb-image-input-web-component .placeholder-wrapper .default-placeholder{flex-direction:column;justify-content:center;align-items:center;gap:.25rem;width:100%;height:100%;padding:.5rem;display:flex}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .icon-wrapper svg{width:64px;height:64px;fill:var(--placeholder-neutral-color)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .icon-wrapper svg .cls-1{fill:var(--placeholder-primary-color)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .placeholder-title{color:var(--placeholder-title-color);font-variation-settings:"wght" 600}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box{font-size:var(--jb-image-input-message-font-size,.7rem);color:var(--message-color);display:var(--jb-image-input-message-box-display,block);padding:2px 8px}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box:empty{padding:0}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box.error{color:var(--message-error-color)}.jb-image-input-web-component[status=uploading] .upload-loading-wrapper{display:flex}.jb-image-input-web-component .upload-loading-wrapper{display:none}.jb-image-input-web-component[status=uploaded] .download-loading-wrapper{display:flex}.jb-image-input-web-component .download-loading-wrapper{display:none}.jb-image-input-web-component[status=downloaded] .image-wrapper{display:block}.jb-image-input-web-component[status=downloaded] .image-wrapper img{object-fit:contain;width:100%;height:100%}.jb-image-input-web-component .image-wrapper{object-fit:contain;width:100%;height:100%;display:none;position:relative}.jb-image-input-web-component .image-wrapper:hover .image-overlay{opacity:1}.jb-image-input-web-component .image-wrapper .image-overlay{cursor:pointer;opacity:0;background-color:var(--overlay-bg-color);backdrop-filter:blur(8px);z-index:1;border-radius:var(--border-radius);flex-wrap:wrap;justify-content:center;align-items:center;gap:1rem;width:100%;height:100%;transition:all .3s;display:flex;position:absolute;top:0;left:0;overflow:hidden}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button{color:var(--delete-button-color);border-radius:var(--button-border-radius);background-color:#0000;justify-content:center;align-items:center;width:2.5rem;height:2.5rem;display:flex}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button:hover{background-color:var(--delete-button-bg-color)}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button #DeleteIcon{object-fit:contain;stroke-width:1.5px;stroke:var(--delete-icon-color);width:80%;height:80%}.jb-image-input-web-component .image-wrapper .image-overlay .download-button{color:var(--download-button-color);border-radius:var(--button-border-radius);stroke:var(--download-button-color);background-color:#0000;justify-content:center;align-items:center;width:2.5rem;height:2.5rem;display:flex}.jb-image-input-web-component .image-wrapper .image-overlay .download-button:hover{background-color:var(--download-button--bg-color-hover);stroke:var(--download-button-color-hover)}.jb-image-input-web-component .image-wrapper .image-overlay .download-button #DownloadIcon{object-fit:contain;stroke-width:1.5px;width:80%;height:80%}.jb-image-input-web-component .image-wrapper .image-overlay .reselect-button{color:var(--reselect-button-color);background-color:#0000;border-radius:1rem;padding:.25rem .5rem}.jb-image-input-web-component .error-overlay{background-color:var(--error-overlay-bg-color);backdrop-filter:blur(8px);z-index:1;border-radius:var(--border-radius);justify-content:center;align-items:center;width:100%;height:100%;transition:all .3s;display:none;position:absolute;top:0;left:0;overflow:hidden}.jb-image-input-web-component .error-overlay .error-content{justify-content:center;align-items:center;gap:1rem;display:flex}.jb-image-input-web-component .error-overlay .error-content .error-icon{fill:var(--error-overlay-icon-color);width:4rem;height:4rem}.jb-image-input-web-component .error-overlay .error-content .error-message{color:var(--error-overlay-color);outline:var(--error-overlay-outline);font-size:1.3rem} :host{--border-radius:var(--jb-image-input-border-radius,var(--jb-radius-xl));--button-border-radius:var(--jb-image-input-button-border-radius,var(--jb-radius));--bg-color:var(--jb-image-input-bg-color,var(--jb-neutral-10));--placeholder-neutral-color:var(--jb-image-input-placeholder-p-color,var(--jb-neutral));--placeholder-primary-color:var(--jb-image-input-placeholder-sec-color,var(--jb-primary));--placeholder-title-color:var(--jb-image-input-placeholder-title-color,var(--jb-neutral));--message-color:var(--jb-image-input-message-color,var(--jb-text-secondary));--message-error-color:var(--jb-image-input-message-error-color,var(--jb-red));--overlay-bg-color:oklch(from var(--jb-neutral)l c h/calc(alpha - .5));--delete-button-color:var(--jb-red);--delete-button-bg-color:var(--jb-white);--delete-icon-color:var(--jb-red);--download-button-color:var(--jb-white);--download-button--bg-color-hover:var(--jb-white);--download-button-color-hover:var(--jb-neutral);--reselect-button-color:var(--jb-white);--error-overlay-bg-color:oklch(from var(--jb-red)l c h/calc(alpha - .5));--error-overlay-color:var(--jb-white);--error-overlay-icon-color:var(--jb-white);--error-overlay-outline:var(--jb-black)}</style>

  <div class="jb-image-input-web-component">
  <div class="placeholder-wrapper">
    <slot name="placeholder">
      <div class="default-placeholder">
        <div class="icon-wrapper">
          <svg viewBox="0 0 59.19 47.06">
            <g id="Layer_2" data-name="Layer 2">
              <g id="Layer_1-2" data-name="Layer 1">
                <g>
                  <path class="cls-1"
                    d="M27.45,14.85A5.65,5.65,0,1,0,21.8,20.5,5.66,5.66,0,0,0,27.45,14.85ZM21.8,17.5a2.65,2.65,0,1,1,2.65-2.65A2.65,2.65,0,0,1,21.8,17.5Z" />
                  <path class="cls-2"
                    d="M58.7,31.38c.46-5.51.87-11.91-.15-18.18-.75-4.61-2.74-7.85-5.92-9.62C48.77,1.43,44.45,1,40.26.6L39.43.52a97.08,97.08,0,0,0-25.09.65A30.45,30.45,0,0,0,8.68,2.51,12.08,12.08,0,0,0,3.27,6.08C1.16,8.63.7,11.94.45,14.83A88.28,88.28,0,0,0,0,25.12c0,1.38.09,3,.23,4.59.26,3.1.84,7.08,3,10.38,2.87,4.4,7.65,5.44,11,5.83a130.41,130.41,0,0,0,14.84,1.14h.32a101.76,101.76,0,0,0,14.85-1.22C48.06,45.28,52,44.43,54.74,42a10.24,10.24,0,0,0,2.86-4.45,1.43,1.43,0,0,0,.08-.24A26.47,26.47,0,0,0,58.7,31.38ZM43.8,42.87a102.62,102.62,0,0,1-14.72,1.19,128.34,128.34,0,0,1-14.5-1.12c-3.91-.46-6.49-1.6-8.2-3.65l8.08-8.08a2.62,2.62,0,0,1,3.57,0c.68.72,6.72,7.06,7.72,8a1.5,1.5,0,1,0,2-2.23C27,36.22,22,31,20.18,29.09a5.54,5.54,0,0,0-7.83,0L4.8,36.63a23.31,23.31,0,0,1-1.56-7.18C3.11,27.93,3.06,26.37,3,25a85.56,85.56,0,0,1,.41-9.94C3.66,12.54,4,9.88,5.58,8A9.2,9.2,0,0,1,9.7,5.33h0A27.68,27.68,0,0,1,14.8,4.14,95.81,95.81,0,0,1,29.42,3a93.76,93.76,0,0,1,9.7.51l.85.08c3.88.38,7.88.77,11.2,2.62C53.51,7.51,55,10,55.59,13.68c1,5.93.57,12.11.12,17.44-.08.95-.18,1.88-.32,2.78L40.93,19.42A5.5,5.5,0,0,0,37,17.79h0a5.5,5.5,0,0,0-3.92,1.62l-8.88,8.88a1.5,1.5,0,0,0,2.12,2.12l8.88-8.88a2.53,2.53,0,0,1,1.8-.74h0a2.52,2.52,0,0,1,1.8.75L54.49,37.25a7,7,0,0,1-1.74,2.49C50.48,41.76,46.94,42.41,43.8,42.87Z" />
                </g>
              </g>
            </g>
          </svg>
        </div>
        <div class="placeholder-title">${C.get(f,"chooseImage")}</div>
        <div class="message-box" part="message"></div>
      </div>
      
    </slot>

  </div>
  <div class="upload-loading-wrapper">
    <span>${C.get(f,"uploading")}</span>
  </div>
  <div class="download-loading-wrapper">
    <span>${C.get(f,"preparing")}</span>
  </div>
  <div class="image-wrapper">
    <img src="">
    <div class="image-overlay">
      <div class="reselect-button">${C.get(f,"reselectImage")}</div>
      <div class="download-button">
        <svg id="DownloadIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path id="S1" d="M15.0382 12.5084L12.1222 15.4364L9.20621 12.5084"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path id="S3" d="M12.1222 15.4361L12.1222 3.39508"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path id="S2" d="M16.7549 8.12799H17.6879C19.7229 8.12799 21.3719 9.77699 21.3719 11.813V16.697C21.3719 18.727 19.7269 20.372 17.6969 20.372L6.55695 20.372C4.52195 20.372 2.87195 18.722 2.87195 16.687V11.802C2.87195 9.77299 4.51795 8.12799 6.54695 8.12799L7.48895 8.12799" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="delete-button">
        <svg id="DeleteIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path id="BinBody" d="M19.325 9.4682C19.325 9.4682 18.782 16.2032 18.467 19.0402C18.317 20.3952 17.48 21.1892 16.109 21.2142C13.5 21.2612 10.888 21.2642 8.28003 21.2092C6.96103 21.1822 6.13803 20.3782 5.99103 19.0472C5.67403 16.1852 5.13403 9.4682 5.13403 9.4682" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path id="BinLine" d="M20.7082 6.23969H3.75024" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path id="BinHead" d="M17.4406 6.23967C16.6556 6.23967 15.9796 5.68467 15.8256 4.91567L15.5826 3.69967C15.4326 3.13867 14.9246 2.75067 14.3456 2.75067H10.1126C9.53358 2.75067 9.02558 3.13867 8.87558 3.69967L8.63258 4.91567C8.47858 5.68467 7.80258 6.23967 7.01758 6.23967" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
  </div>
  <div class="error-overlay">
    <!-- this container used to show flashed error and disappear after -->
     <div class="error-content">
          <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 14.75C11.59 14.75 11.25 14.41 11.25 14V9C11.25 8.59 11.59 8.25 12 8.25C12.41 8.25 12.75 8.59 12.75 9V14C12.75 14.41 12.41 14.75 12 14.75Z" />
            <path d="M12 18C11.94 18 11.87 17.99 11.8 17.98C11.74 17.97 11.68 17.95 11.62 17.92C11.56 17.9 11.5 17.87 11.44 17.83C11.39 17.79 11.34 17.75 11.29 17.71C11.11 17.52 11 17.26 11 17C11 16.74 11.11 16.48 11.29 16.29C11.34 16.25 11.39 16.21 11.44 16.17C11.5 16.13 11.56 16.1 11.62 16.08C11.68 16.05 11.74 16.03 11.8 16.02C11.93 15.99 12.07 15.99 12.19 16.02C12.26 16.03 12.32 16.05 12.38 16.08C12.44 16.1 12.5 16.13 12.56 16.17C12.61 16.21 12.66 16.25 12.71 16.29C12.89 16.48 13 16.74 13 17C13 17.26 12.89 17.52 12.71 17.71C12.66 17.75 12.61 17.79 12.56 17.83C12.5 17.87 12.44 17.9 12.38 17.92C12.32 17.95 12.26 17.97 12.19 17.98C12.13 17.99 12.06 18 12 18Z" />
            <path d="M18.06 22.16H5.94001C3.99001 22.16 2.50001 21.45 1.74001 20.17C0.990006 18.89 1.09001 17.24 2.04001 15.53L8.10001 4.63C9.10001 2.83 10.48 1.84 12 1.84C13.52 1.84 14.9 2.83 15.9 4.63L21.96 15.54C22.91 17.25 23.02 18.89 22.26 20.18C21.5 21.45 20.01 22.16 18.06 22.16ZM12 3.34C11.06 3.34 10.14 4.06 9.41001 5.36L3.36001 16.27C2.68001 17.49 2.57001 18.61 3.04001 19.42C3.51001 20.23 4.55001 20.67 5.95001 20.67H18.07C19.47 20.67 20.5 20.23 20.98 19.42C21.46 18.61 21.34 17.5 20.66 16.27L14.59 5.36C13.86 4.06 12.94 3.34 12 3.34Z" />
            </svg>
            <span class="error-message"></span>            
     </div>
  </div>
</div>
`,a=document.createElement("template");a.innerHTML=t,e.appendChild(a.content.cloneNode(!0)),c(this,d,{webComponent:e.querySelector(".jb-image-input-web-component"),placeHolderWrapper:e.querySelector(".placeholder-wrapper"),placeHolderTitle:e.querySelector(".placeholder-title"),placeHolderMessageBox:e.querySelector(".message-box"),image:e.querySelector(".image-wrapper img"),overlay:{container:e.querySelector(".image-overlay"),deleteButton:e.querySelector(".image-overlay .delete-button"),downloadButton:e.querySelector(".image-overlay .download-button")},errorOverlay:{container:e.querySelector(".error-overlay"),message:e.querySelector(".error-overlay .error-message")}})},E=new WeakMap,N=function(){this.acceptTypes="image/jpeg,image/jpg,image/png,image/svg+xml",l(this,i,v).call(this,"empty"),l(this,i,Z).call(this)},U=function(){r(this,d).placeHolderWrapper.addEventListener("click",this.openImageSelector.bind(this)),r(this,d).image.addEventListener("click",this.openImageSelector.bind(this)),r(this,d).overlay.container.addEventListener("click",this.openImageSelector.bind(this)),r(this,d).overlay.deleteButton.addEventListener("click",l(this,i,re).bind(this)),r(this,d).overlay.downloadButton.addEventListener("click",l(this,i,ie).bind(this))},Z=function(){c(this,h,document.createElement("input")),r(this,h).type="file",r(this,h).accept=this.acceptTypes,r(this,h).addEventListener("change",e=>l(this,i,Y).call(this,e))},O=function(e,t){switch(e){case"required":this.required=(t||t==="")&&t!=="false";break;case"label":r(this,g).ariaLabel=t,r(this,d).placeHolderTitle&&(r(this,d).placeHolderTitle.innerHTML=t);break;case"multiple":this.multiple=t==="true";break;case"message":r(this,d).placeHolderMessageBox.innerHTML=t,r(this,g).ariaDescription=t}},W=function(e){const t=new CustomEvent("imageSelected",{detail:{files:e}});this.dispatchEvent(t)},Y=function(e){const t=e.target.files;if(t&&(t==null?void 0:t.length)>0){l(this,i,W).call(this,t);const a=t[0];r(this,h).value=null,this.selectImageByFile(a)}},J=function(e){c(this,m,e),l(this,i,T).call(this)},G=function(e){const t=new CustomEvent("maxSizeExceed",{detail:{file:e},cancelable:!1});this.dispatchEvent(t)},K=function(e){l(this,i,v).call(this,"uploading"),this.bridge.uploader(e,this.config,this.onProgressImageUpload.bind(this)).then(t=>l(this,i,Q).call(this,t)).catch(()=>l(this,i,X).call(this))},Q=function(e){const t=this.value;l(this,i,v).call(this,"uploaded"),this.value=e,l(this,i,T).call(this).defaultPrevented&&(this.value=t)},T=function(){const e=new Event("change",{bubbles:!0,composed:!0,cancelable:!1});return this.dispatchEvent(e),e},X=function(){this.value?l(this,i,v).call(this,"downloaded"):l(this,i,v).call(this,"empty"),r(this,h).value=""},z=function(e){l(this,i,v).call(this,"downloaded"),this.imageBase64Value=e,r(this,d).image.setAttribute("src",e)},v=function(e){r(this,d).webComponent.setAttribute("status",e),c(this,S,e)},_=function(e){r(this,d).errorOverlay.message.innerHTML=e,r(this,d).errorOverlay.container.style.display="flex",setTimeout(()=>{r(this,d).errorOverlay.message.innerHTML="",r(this,d).errorOverlay.container.style.display="none"},2e3)},ee=function(){const e=[];if(this.required){const t=this.getAttribute("required").length>0?this.getAttribute("required"):C.get(f,"requiredMessage");e.push({validator:({file:a,value:n})=>a!==null||n!=null,message:t,stateType:"valueMissing"})}return r(this,b)&&e.push({validator:({file:t})=>{if(t==null)return!0;if(t.size>=r(this,b)){const a=new Intl.NumberFormat(f.locale,{style:"unit",unit:"byte",notation:"compact",unitDisplay:"narrow"});return C.get(f,"maxSizeExceed")(a.format(r(this,b)),a.format(t.size))}return!0},message:"",stateType:"rangeOverflow"}),e},te=function(e){if(e.isAllValid)r(this,g).setValidity({},"");else{const t={};let a="";e.validationList.forEach(n=>{n.isValid||(n.validation.stateType&&(t[n.validation.stateType]=!0),a==""&&(a=n.message))}),r(this,g).setValidity(t,a)}},re=function(e){e.stopPropagation(),l(this,i,F).call(this,null),l(this,i,T).call(this)},ie=function(e){e.stopPropagation();const t=r(this,d).image.getAttribute("src"),a=t.match(/[^:/]\w+(?=;|,)/)[0],n=document.createElement("a");n.href=t,n.download="Image."+a,n.click()},F=function(e){c(this,w,e),e!=null?e instanceof File?(c(this,m,e),j.ExtractBase64ImageFromFile(e).then(l(this,i,z).bind(this))):this.bridge.downloader(e,this.config).then(l(this,i,z).bind(this)):(c(this,m,null),l(this,i,v).call(this,"empty"))},j);customElements.get("jb-image-input")||window.customElements.define("jb-image-input",de);let ce=R.forwardRef((o,s)=>{var e;let t=u.useRef(null);return u.useImperativeHandle(s,()=>t?t.current:void 0,[t]),u.useEffect(()=>{e.config&&t.current&&(t.current.config=e.config)},[(e=o).config]),u.useEffect(()=>{e.bridge&&t.current&&(t.current.bridge=e.bridge)},[e.bridge]),u.useEffect(()=>{e.validationList&&t.current&&(t.current.validation.list=e.validationList)},[e.validationList]),u.useEffect(()=>{var a,n;e.multiple?(a=t.current)==null||a.setAttribute("multiple","true"):(n=t.current)==null||n.removeAttribute("multiple")},[e.multiple]),u.useEffect(()=>{e.value!==void 0&&t.current&&(t.current.value=e.value)},[e.value]),u.useEffect(()=>{var a;e.file&&((a=t.current)==null||a.selectImageByFile(e.file))},[e.file]),u.useEffect(()=>{e.acceptTypes&&t.current&&(t.current.acceptTypes=e.acceptTypes)},[e.acceptTypes]),u.useEffect(()=>{e.maxFileSize!==void 0&&t.current&&(t.current.maxFileSize=e.maxFileSize)},[e.maxFileSize]),u.useEffect(()=>{var a,n;e.name?(a=t==null?void 0:t.current)==null||a.setAttribute("name",e.name||""):(n=t==null?void 0:t.current)==null||n.removeAttribute("name")},[e.name]),u.useEffect(()=>{var a,n;e.label?(a=t==null?void 0:t.current)==null||a.setAttribute("label",e.label||""):(n=t==null?void 0:t.current)==null||n.removeAttribute("label")},[e.label]),u.useEffect(()=>{var a,n;e.message?(a=t==null?void 0:t.current)==null||a.setAttribute("message",e.message||""):(n=t==null?void 0:t.current)==null||n.removeAttribute("message")},[e.message]),u.useEffect(()=>{var a,n;e.required?(a=t==null?void 0:t.current)==null||a.setAttribute("required","true"):(n=t==null?void 0:t.current)==null||n.removeAttribute("required")},[e.required]),L(t,"load",o.onLoad,!0),L(t,"init",o.onInit,!0),L(t,"change",o.onChange),L(t,"imageSelected",o.onImageSelected),L(t,"maxSizeExceed",o.onMaxSizeExceed),R.createElement("jb-image-input",{ref:t,class:o.className||"","upload-type":o.uploadType||"AUTO"},o.children)});ce.displayName="JBImageInput";export{ce as u};
