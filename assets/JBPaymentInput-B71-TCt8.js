var I=e=>{throw TypeError(e)};var m=(e,r,t)=>r.has(e)||I("Cannot "+t);var l=(e,r,t)=>(m(e,r,"read from private field"),t?t.call(e):r.get(e)),h=(e,r,t)=>r.has(e)?I("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),g=(e,r,t,n)=>(m(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t),o=(e,r,t)=>(m(e,r,"access private method"),t);import{R as b,r as i}from"./index-DhY--VwN.js";import{o as R}from"./index-DJCiLNcr.js";import{c as B}from"./index-A7vBPebI.js";import{a as j,t as v}from"./index-NH_qbYOC.js";const E=new j({fa:{cardLengthValidation:"لطفا شماره کارت را کامل وارد کنید",IBANLengthValidation:"لطفا شماره شبا را کامل وارد کنید",IBANFullValidation:"شماره شبا وارد شده نامعتبر است"},en:{cardLengthValidation:"Please enter all 16 digits of your card number.",IBANLengthValidation:"Please enter all 26 digits of your IBAN number.",IBANFullValidation:"IBAN number is invalid"}}),x={validator:({value:e})=>e.length==16||e.length==0,message:E.get(v,"cardLengthValidation"),stateType:"tooShort"},k={validator:({value:e})=>e.length==26||e.length==0,message:E.get(v,"IBANLengthValidation"),stateType:"tooShort"},D={validator:/(?:(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2}))?/g,message:E.get(v,"IBANFullValidation"),stateType:"typeMismatch"},H=["CARD","SHABA"];var p,d,f,u,C,N,y,A,L,S,$,V,F=(V=class extends R{constructor(){super();h(this,u);h(this,p,this.getAttribute("input-type")||"CARD");h(this,d," ");h(this,f,/\s/g);o(this,u,C).call(this)}get paymentInputType(){return l(this,p)}set paymentInputType(t){H.includes(t)&&g(this,p,t||"CARD")}get separatorString(){return l(this,d)}set separatorString(t){g(this,d,t),g(this,f,RegExp(l(this,d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\s/g,"\\s"),"g"));const n=this.standardValue(this.value,"SET_VALUE");this.elements.input.value=n.displayValue}static get observedAttributes(){return[...R.observedAttributes,"input-type","separator"]}attributeChangedCallback(t,n,a){["input-type","separator"].includes(t)?o(this,u,N).call(this,t,a):this.onAttributeChange(t,a)}},p=new WeakMap,d=new WeakMap,f=new WeakMap,u=new WeakSet,C=function(){const t=document.createElement("template");t.innerHTML="<style>.jb-input-web-component{--jb-input-input-direction:ltr}</style>",this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.validation.addValidationListGetter(o(this,u,$).bind(this)),o(this,u,S).call(this),this.addStandardValueCallback(o(this,u,L).bind(this))},N=function(t,n){switch(t){case"input-type":this.paymentInputType=n;break;case"separator":this.separatorString=n}},y=function(t){if(l(this,p)=="CARD"){let n=B(o(this,u,A).call(this,t)).replace(/[^0-9]/g,"");return n=n.substring(0,16),n}if(l(this,p)=="SHABA"){const n=/(?<ir>(IR|ir|Ir|I|i)?)(?<other>.{0,})/g.exec(t);if(n&&n.groups){let a=B(o(this,u,A).call(this,n.groups.other)).replace(/[^0-9]/g,"");a=a.substring(0,24);let s="";if(n.groups.ir)s=n.groups.ir.toUpperCase();else{if(!(a.length>0))return"";s="IR"}if(s.length==1){if(!(a.length>0))return s;s="IR"}return s+a}return""}return t},A=function(t){return t.replace(l(this,f),"")},L=function(t){let n="",a="";if(l(this,p)=="CARD"){a=o(this,u,y).call(this,t);const s=RegExp(`(.*)(${l(this,f).source})$`,"g");n=a.replace(/([0-9]{4})/g,`$1${l(this,d)}`).replace(s,"$1")}if(l(this,p)=="SHABA"){a=o(this,u,y).call(this,t);const s=/(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2})/g.exec(a);n=s&&s.length>0?s.slice(1).filter(q=>q!=="").join(l(this,d)):a}return{value:a,displayValue:n}},S=function(){},$=function(){return l(this,p)=="CARD"?[x]:[k,D]},V);customElements.get("jb-payment-input")||window.customElements.define("jb-payment-input",F);function c(e,r,t,n=!1){let a=i.useCallback(s=>{e.current&&typeof t=="function"&&t(s)},[e,t]);i.useEffect(()=>{let s=e.current;return s&&s.addEventListener(r,a,{passive:n,capture:!1}),function(){s&&s.removeEventListener(r,a,{passive:n,capture:!1})}},[e,r,t,n])}function w(e,r){c(e,"enter",r.onEnter),c(e,"input",r.onInput),c(e,"beforeinput",r.onBeforeinput),c(e,"change",r.onChange),c(e,"keydown",r.onKeydown),c(e,"keyup",r.onKeyup),c(e,"focus",r.onFocus),c(e,"blur",r.onBlur)}function T(e,r){i.useEffect(()=>{let t=r.value;(r.value==null||r.value===void 0)&&(t=""),e&&e.current&&e.current&&(e.current.value=(t==null?void 0:t.toString())||"")},[r.value]),i.useEffect(()=>{var t;r.type&&((t=e==null?void 0:e.current)==null||t.setAttribute("type",r.type))},[r.type]),i.useEffect(()=>{var t,n;r.name?(t=e==null?void 0:e.current)==null||t.setAttribute("name",r.name||""):(n=e==null?void 0:e.current)==null||n.removeAttribute("name")},[r.name]),i.useEffect(()=>{e&&e.current&&(e.current.validation.list=r.validationList||[])},[r.validationList]),i.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("label",r.label||"")},[r.label]),i.useEffect(()=>{var t,n;typeof r.disabled=="boolean"&&r.disabled?(t=e==null?void 0:e.current)==null||t.setAttribute("disabled",""):(n=e==null?void 0:e.current)==null||n.removeAttribute("disabled")},[r.disabled]),i.useEffect(()=>{var t,n,a;typeof r.required=="string"&&((t=e==null?void 0:e.current)==null||t.setAttribute("required",r.required)),typeof r.required=="boolean"&&(r.required?(n=e==null?void 0:e.current)==null||n.setAttribute("required",""):(a=e==null?void 0:e.current)==null||a.removeAttribute("required"))},[r.required]),i.useEffect(()=>{var t,n;r.inputmode?(t=e.current)==null||t.setAttribute("inputmode",r.inputmode):(n=e.current)==null||n.removeAttribute("inputmode")},[r.inputmode]),i.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("message",r.message||"")},[r.message]),i.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("placeholder",r.placeholder||"")},[r.placeholder]),i.useEffect(()=>{var t,n;r.error?(t=e==null?void 0:e.current)==null||t.setAttribute("error",r.error):(n=e==null?void 0:e.current)==null||n.removeAttribute("error")},[r.error])}i.forwardRef((e,r)=>{let t=i.useRef(null),[n,a]=i.useState(0);return i.useImperativeHandle(r,()=>t?t.current:{},[t]),i.useEffect(()=>{a(n+1)},[t.current]),w(t,e),T(t,e),b.createElement("jb-input",{ref:t,class:e.className},e.children)}).displayName="JBInput";let P=b.forwardRef((e,r)=>{let t=i.useRef(null);return i.useImperativeHandle(r,()=>t?t.current:{},[t]),T(t,e),w(t,e),i.useEffect(()=>{t.current.setAttribute("input-type",e.inputType)},[e.inputType]),i.useEffect(()=>{e.separator&&typeof e.separator=="string"&&e.separator!==""&&(t.current.separatorString=e.separator)},[e.separator]),b.createElement("jb-payment-input",{placeholder:e.placeholder?e.placeholder:"",ref:t,class:e.className?e.className:"",label:e.label?e.label:"",message:e.message?e.message:""},e.children)});P.displayName="JBPaymentInput";export{P as p};
