var A=e=>{throw TypeError(e)};var b=(e,r,t)=>r.has(e)||A("Cannot "+t);var l=(e,r,t)=>(b(e,r,"read from private field"),t?t.call(e):r.get(e)),h=(e,r,t)=>r.has(e)?A("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),m=(e,r,t,s)=>(b(e,r,"write to private field"),s?s.call(e,t):r.set(e,t),t),o=(e,r,t)=>(b(e,r,"access private method"),t);import{R as g,r as i}from"./index-0yr9KlQE.js";import{o as E}from"./index-Bo5DBbl0.js";import{c as R}from"./index-BHpGtycm.js";const L={validator:({value:e})=>e.length==16||e.length==0,message:"لطفا شماره کارت را کامل وارد کنید"},T={validator:({value:e})=>e.length==26||e.length==0,message:"لطفا شماره شبا را کامل وارد کنید"},k={validator:/(?:(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2}))?/g,message:"شماره شبا وارد شده نامعتبر است"},D=["CARD","SHABA"];var p,d,f,u,C,S,y,v,w,$,q,I,H=(I=class extends E{constructor(){super();h(this,u);h(this,p,this.getAttribute("input-type")||"CARD");h(this,d," ");h(this,f,/\s/g);o(this,u,C).call(this)}get paymentInputType(){return l(this,p)}set paymentInputType(t){D.includes(t)&&m(this,p,t||"CARD")}get separatorString(){return l(this,d)}set separatorString(t){m(this,d,t),m(this,f,RegExp(l(this,d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\s/g,"\\s"),"g"));const s=this.standardValue(this.value,"SET_VALUE");this.elements.input.value=s.displayValue}static get observedAttributes(){return[...E.observedAttributes,"input-type","separator"]}attributeChangedCallback(t,s,n){["input-type","separator"].includes(t)?o(this,u,S).call(this,t,n):this.onAttributeChange(t,n)}},p=new WeakMap,d=new WeakMap,f=new WeakMap,u=new WeakSet,C=function(){const t=document.createElement("template");t.innerHTML="<style>.jb-input-web-component{--jb-input-input-direction:ltr}</style>",this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.validation.addValidationListGetter(o(this,u,q).bind(this)),o(this,u,$).call(this),this.addStandardValueCallback(o(this,u,w).bind(this))},S=function(t,s){switch(t){case"input-type":this.paymentInputType=s;break;case"separator":this.separatorString=s}},y=function(t){if(l(this,p)=="CARD"){let s=R(o(this,u,v).call(this,t)).replace(/[^0-9]/g,"");return s=s.substring(0,16),s}if(l(this,p)=="SHABA"){const s=/(?<ir>(IR|ir|Ir|I|i)?)(?<other>.{0,})/g.exec(t);if(s&&s.groups){let n=R(o(this,u,v).call(this,s.groups.other)).replace(/[^0-9]/g,"");n=n.substring(0,24);let a="";if(s.groups.ir)a=s.groups.ir.toUpperCase();else{if(!(n.length>0))return"";a="IR"}if(a.length==1){if(!(n.length>0))return a;a="IR"}return a+n}return""}return t},v=function(t){return t.replace(l(this,f),"")},w=function(t){let s="",n="";if(l(this,p)=="CARD"){n=o(this,u,y).call(this,t);const a=RegExp(`(.*)(${l(this,f).source})$`,"g");s=n.replace(/([0-9]{4})/g,`$1${l(this,d)}`).replace(a,"$1")}if(l(this,p)=="SHABA"){n=o(this,u,y).call(this,t);const a=/(IR[0-9]{0,2})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,4})([0-9]{0,2})/g.exec(n);s=a&&a.length>0?a.slice(1).filter(B=>B!=="").join(l(this,d)):n}return{value:n,displayValue:s}},$=function(){},q=function(){return l(this,p)=="CARD"?[L]:[T,k]},I);customElements.get("jb-payment-input")||window.customElements.define("jb-payment-input",H);function c(e,r,t,s=!1){let n=i.useCallback(a=>{e.current&&typeof t=="function"&&t(a)},[e,t]);i.useEffect(()=>{let a=e.current;return a&&a.addEventListener(r,n,{passive:s,capture:!1}),function(){a&&a.removeEventListener(r,n,{passive:s,capture:!1})}},[e,r,t,s])}function j(e,r){c(e,"enter",r.onEnter),c(e,"input",r.onInput),c(e,"beforeinput",r.onBeforeinput),c(e,"change",r.onChange),c(e,"keydown",r.onKeydown),c(e,"keyup",r.onKeyup),c(e,"focus",r.onFocus),c(e,"blur",r.onBlur)}function x(e,r){i.useEffect(()=>{let t=r.value;(r.value==null||r.value===void 0)&&(t=""),e&&e.current&&e.current&&(e.current.value=(t==null?void 0:t.toString())||"")},[r.value]),i.useEffect(()=>{var t;r.type&&((t=e==null?void 0:e.current)==null||t.setAttribute("type",r.type))},[r.type]),i.useEffect(()=>{var t,s;r.name?(t=e==null?void 0:e.current)==null||t.setAttribute("name",r.name||""):(s=e==null?void 0:e.current)==null||s.removeAttribute("name")},[r.name]),i.useEffect(()=>{e&&e.current&&(e.current.validation.list=r.validationList||[])},[r.validationList]),i.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("label",r.label||"")},[r.label]),i.useEffect(()=>{var t,s;typeof r.disabled=="boolean"&&r.disabled?(t=e==null?void 0:e.current)==null||t.setAttribute("disabled",""):(s=e==null?void 0:e.current)==null||s.removeAttribute("disabled")},[r.disabled]),i.useEffect(()=>{var t,s,n;typeof r.required=="string"&&((t=e==null?void 0:e.current)==null||t.setAttribute("required",r.required)),typeof r.required=="boolean"&&(r.required?(s=e==null?void 0:e.current)==null||s.setAttribute("required",""):(n=e==null?void 0:e.current)==null||n.removeAttribute("required"))},[r.required]),i.useEffect(()=>{var t,s;r.inputmode?(t=e.current)==null||t.setAttribute("inputmode",r.inputmode):(s=e.current)==null||s.removeAttribute("inputmode")},[r.inputmode]),i.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("message",r.message||"")},[r.message]),i.useEffect(()=>{var t;(t=e==null?void 0:e.current)==null||t.setAttribute("placeholder",r.placeholder||"")},[r.placeholder]),i.useEffect(()=>{var t,s;r.error?(t=e==null?void 0:e.current)==null||t.setAttribute("error",r.error):(s=e==null?void 0:e.current)==null||s.removeAttribute("error")},[r.error])}i.forwardRef((e,r)=>{let t=i.useRef(null),[s,n]=i.useState(0);return i.useImperativeHandle(r,()=>t?t.current:{},[t]),i.useEffect(()=>{n(s+1)},[t.current]),j(t,e),x(t,e),g.createElement("jb-input",{ref:t,class:e.className},e.children)}).displayName="JBInput";let N=g.forwardRef((e,r)=>{let t=i.useRef(null);return i.useImperativeHandle(r,()=>t?t.current:{},[t]),x(t,e),j(t,e),i.useEffect(()=>{t.current.setAttribute("input-type",e.inputType)},[e.inputType]),i.useEffect(()=>{e.separator&&typeof e.separator=="string"&&e.separator!==""&&(t.current.separatorString=e.separator)},[e.separator]),g.createElement("jb-payment-input",{placeholder:e.placeholder?e.placeholder:"",ref:t,class:e.className?e.className:"",label:e.label?e.label:"",message:e.message?e.message:""},e.children)});N.displayName="JBPaymentInput";export{N as p};
