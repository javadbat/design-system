"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[804],{"../../web-component/jb-core/react/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_q:()=>r});var react=__webpack_require__("./node_modules/react/index.js");function r(n,u,c,l=!1){let o=(0,react.useCallback)((e=>{n.current&&"function"==typeof c&&c(e)}),[n,c]);(0,react.useEffect)((()=>{let e=n.current;return e&&e.addEventListener(u,o,{passive:l,capture:!1}),function(){e&&e.removeEventListener(u,o,{passive:l,capture:!1})}}),[n,u,c,l])}},"../../web-component/jb-image-input/react/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>JBImageInput_l});var react=__webpack_require__("./node_modules/react/index.js"),jb_validation=__webpack_require__("../../web-component/jb-validation/index.js");function t(e,t,i,a){if("a"===i&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?a:"a"===i?a.call(e):a?a.value:t.get(e)}function i(e,t,i,a,n){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?n.call(e,i):n?n.value=i:t.set(e,i),i}var a,n,r,o,s,l,d,c,p,h,m,u,g,f,w,b,v,y,j,C,k,x,M,E,L,V,S,A,T,B,H,I,F,W,q,z,P=class j extends HTMLElement{static get formAssociated(){return!0}get value(){return t(this,c,"f")}set value(e){t(this,a,"m",z).call(this,e)}get isAutoValidationDisabled(){return t(this,n,"f")}set isAutoValidationDisabled(e){i(this,n,e,"f")}get selectedImageType(){return t(this,p,"f").type}get status(){return t(this,r,"f")}get multiple(){return t(this,b,"f")}set multiple(e){i(this,b,e,"f"),t(this,b,"f")?t(this,o,"f").setAttribute("multiple","multiple"):t(this,o,"f").removeAttribute("multiple")}get acceptTypes(){return t(this,l,"f")}set acceptTypes(e){i(this,l,e,"f"),t(this,o,"f")&&(t(this,o,"f").accept=e)}get file(){return t(this,p,"f")}get maxFileSize(){return t(this,d,"f")}set maxFileSize(e){null==e?i(this,d,null,"f"):isNaN(e)||"number"!=typeof e||i(this,d,e,"f")}get disabled(){return t(this,m,"f")}set disabled(e){i(this,m,e,"f"),e?t(this,g,"f").states?.add("disabled"):t(this,g,"f").states?.delete("disabled")}set required(e){i(this,u,e,"f"),t(this,f,"f").checkValidity({showError:!1})}get required(){return t(this,u,"f")}get validation(){return t(this,f,"f")}get name(){return this.getAttribute("name")||""}get isDirty(){return t(this,c,"f")!==this.initialValue}constructor(){super(),a.add(this),n.set(this,!1),r.set(this,null),o.set(this,void 0),s.set(this,void 0),l.set(this,"image/jpeg,image/jpg,image/png,image/svg+xml"),d.set(this,null),c.set(this,null),p.set(this,null),h.set(this,null),this.imageBase64Value=null,m.set(this,!1),u.set(this,!1),g.set(this,void 0),f.set(this,new jb_validation.EQ({showValidationError:this.showValidationError.bind(this),clearValidationError:this.clearValidationError.bind(this),getValue:()=>({file:t(this,p,"f"),value:t(this,c,"f")}),getValidations:t(this,a,"m",I).bind(this),setValidationResult:t(this,a,"m",F).bind(this),getValueString:()=>this.fileName})),this.initialValue=null,b.set(this,!1),this.config={uploadUrl:"",downloadUrl:""},this.bridge={uploader:function(e){return new Promise((t=>{t(e)}))},downloader:function(e){return new Promise(((t,i)=>{"string"==typeof e&&fetch(e).then((e=>e.blob())).then((e=>{const i=new window.FileReader;i.readAsDataURL(e),i.onload=function(){const e=i.result;t(e)}})).catch(i),e instanceof File&&j.ExtractBase64ImageFromFile(e).then((e=>{t(e)}))}))}},"function"==typeof this.attachInternals&&i(this,g,this.attachInternals(),"f"),t(this,a,"m",w).call(this),t(this,a,"m",v).call(this),t(this,a,"m",y).call(this)}get fileName(){return t(this,p,"f").name}openImageSelector(){t(this,o,"f").click()}static get observedAttributes(){return["required","label","multiple","message"]}attributeChangedCallback(e,i,n){t(this,a,"m",C).call(this,e,n)}async selectImageByFile(e){const i=await this.validation.checkValidity({showError:!0,value:{file:e,value:null}});!!this.maxFileSize&&e.size>this.maxFileSize&&t(this,a,"m",E).call(this,e),i.isAllValid&&(t(this,a,"m",M).call(this,e),t(this,a,"m",L).call(this,e))}static ExtractBase64ImageFromFile(e){return new Promise(((t,i)=>{const a=new FileReader;a.onload=e=>{const a=e.target?.result;a?t(a):i(e)},a.readAsDataURL(e)}))}onProgressImageUpload(e){i(this,h,e,"f")}showValidationError(e){const i="string"==typeof e?e:e.message;t(this,s,"f").webComponent.classList.add("--has-error"),t(this,c,"f")?t(this,a,"m",H).call(this,i):(t(this,s,"f").placeHolderMessageBox.innerHTML=i,t(this,s,"f").placeHolderMessageBox.classList.add("error"))}clearValidationError(){t(this,s,"f").webComponent.classList.remove("--has-error"),t(this,s,"f").placeHolderMessageBox.innerHTML=this.getAttribute("message")||"",t(this,s,"f").placeHolderMessageBox.classList.remove("error")}checkValidity(){const e=t(this,f,"f").checkValiditySync({showError:!1});if(!e.isAllValid){const e=new CustomEvent("invalid");this.dispatchEvent(e)}return e.isAllValid}reportValidity(){const e=t(this,f,"f").checkValiditySync({showError:!0});if(!e.isAllValid){const e=new CustomEvent("invalid");this.dispatchEvent(e)}return e.isAllValid}get validationMessage(){return t(this,g,"f").validationMessage}};n=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakMap,l=new WeakMap,d=new WeakMap,c=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,u=new WeakMap,g=new WeakMap,f=new WeakMap,b=new WeakMap,a=new WeakSet,w=function(){const e=this.attachShadow({mode:"open",delegatesFocus:!0}),t=document.createElement("template");t.innerHTML='<style>:host{--border-radius: var(--jb-image-input-border-radius, 1.5rem);width:var(--jb-image-input-width, 100%);height:var(--jb-image-input-height, 100%)}.jb-image-input-web-component{position:relative;background-color:var(--jb-image-input-bg-color, #f7f6f6);width:100%;height:100%;border-radius:var(--border-radius);display:flex;justify-content:center;align-items:center;overflow:hidden;box-sizing:border-box}.jb-image-input-web-component[status=empty] .placeholder-wrapper{display:flex}.jb-image-input-web-component .placeholder-wrapper{width:100%;height:100%;display:none;cursor:pointer;background-color:var(--jb-image-input-placeholder-bg-color, transparent)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:.25rem;padding:.5rem}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .icon-wrapper svg{width:64px;height:64px;fill:var(--jb-image-input-placeholder-p-color, #1e2832)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .icon-wrapper svg .cls-1{fill:var(--jb-image-input-placeholder-sec-color, #ff1229)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .placeholder-title{color:#1e2832;font-variation-settings:"wght" 600}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box{font-size:var(--jb-image-input-message-font-size, 0.7rem);padding:2px 8px;color:var(--jb-image-input-message-color, #929292);display:var(--jb-image-input-message-box-display, block)}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box:empty{padding:0}.jb-image-input-web-component .placeholder-wrapper .default-placeholder .message-box.error{color:var(--jb-image-input-message-error-color, red)}.jb-image-input-web-component[status=uploading] .upload-loading-wrapper{display:flex}.jb-image-input-web-component .upload-loading-wrapper{display:none}.jb-image-input-web-component[status=uploaded] .download-loading-wrapper{display:flex}.jb-image-input-web-component .download-loading-wrapper{display:none}.jb-image-input-web-component[status=downloaded] .image-wrapper{display:block}.jb-image-input-web-component[status=downloaded] .image-wrapper img{object-fit:contain;width:100%;height:100%}.jb-image-input-web-component .image-wrapper{position:relative;display:none;width:100%;height:100%;object-fit:contain}.jb-image-input-web-component .image-wrapper:hover .image-overlay{opacity:1}.jb-image-input-web-component .image-wrapper .image-overlay{cursor:pointer;opacity:0;transition:all .3s 0s ease;position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);backdrop-filter:blur(8px);z-index:1;overflow:hidden;border-radius:var(--border-radius);display:flex;justify-content:center;align-items:center;gap:1rem;flex-wrap:wrap}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button{background-color:rgba(0,0,0,0);color:#ff1229;border-radius:1rem;width:2.5rem;height:2.5rem;display:flex;justify-content:center;align-items:center}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button:hover{background-color:#fff}.jb-image-input-web-component .image-wrapper .image-overlay .delete-button #DeleteIcon{object-fit:contain;stroke-width:1.5;stroke:#ff1229;width:80%;height:80%}.jb-image-input-web-component .image-wrapper .image-overlay .download-button{background-color:rgba(0,0,0,0);color:#fff;border-radius:1rem;stroke:#fff;width:2.5rem;height:2.5rem;display:flex;justify-content:center;align-items:center}.jb-image-input-web-component .image-wrapper .image-overlay .download-button:hover{background-color:#fff;stroke:#000}.jb-image-input-web-component .image-wrapper .image-overlay .download-button #DownloadIcon{object-fit:contain;stroke-width:1.5;width:80%;height:80%}.jb-image-input-web-component .image-wrapper .image-overlay .reselect-button{background-color:rgba(0,0,0,0);border-radius:1rem;padding:.25rem .5rem;color:#fff}.jb-image-input-web-component .error-overlay{display:none;transition:all .3s 0s ease;position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,18,41,.5);backdrop-filter:blur(8px);z-index:1;overflow:hidden;border-radius:var(--border-radius);justify-content:center;align-items:center}.jb-image-input-web-component .error-overlay .error-content{display:flex;justify-content:center;align-items:center;gap:1rem}.jb-image-input-web-component .error-overlay .error-content .error-icon{fill:#fff;width:4rem;height:4rem}.jb-image-input-web-component .error-overlay .error-content .error-message{color:#fff;outline:#000;font-size:1.3rem}</style>\n<div class="jb-image-input-web-component">\n  <div class="placeholder-wrapper">\n    <slot name="placeholder">\n      <div class="default-placeholder">\n        <div class="icon-wrapper">\n          <svg viewBox="0 0 59.19 47.06">\n            <g id="Layer_2" data-name="Layer 2">\n              <g id="Layer_1-2" data-name="Layer 1">\n                <g>\n                  <path class="cls-1" d="M27.45,14.85A5.65,5.65,0,1,0,21.8,20.5,5.66,5.66,0,0,0,27.45,14.85ZM21.8,17.5a2.65,2.65,0,1,1,2.65-2.65A2.65,2.65,0,0,1,21.8,17.5Z"/>\n                  <path class="cls-2" d="M58.7,31.38c.46-5.51.87-11.91-.15-18.18-.75-4.61-2.74-7.85-5.92-9.62C48.77,1.43,44.45,1,40.26.6L39.43.52a97.08,97.08,0,0,0-25.09.65A30.45,30.45,0,0,0,8.68,2.51,12.08,12.08,0,0,0,3.27,6.08C1.16,8.63.7,11.94.45,14.83A88.28,88.28,0,0,0,0,25.12c0,1.38.09,3,.23,4.59.26,3.1.84,7.08,3,10.38,2.87,4.4,7.65,5.44,11,5.83a130.41,130.41,0,0,0,14.84,1.14h.32a101.76,101.76,0,0,0,14.85-1.22C48.06,45.28,52,44.43,54.74,42a10.24,10.24,0,0,0,2.86-4.45,1.43,1.43,0,0,0,.08-.24A26.47,26.47,0,0,0,58.7,31.38ZM43.8,42.87a102.62,102.62,0,0,1-14.72,1.19,128.34,128.34,0,0,1-14.5-1.12c-3.91-.46-6.49-1.6-8.2-3.65l8.08-8.08a2.62,2.62,0,0,1,3.57,0c.68.72,6.72,7.06,7.72,8a1.5,1.5,0,1,0,2-2.23C27,36.22,22,31,20.18,29.09a5.54,5.54,0,0,0-7.83,0L4.8,36.63a23.31,23.31,0,0,1-1.56-7.18C3.11,27.93,3.06,26.37,3,25a85.56,85.56,0,0,1,.41-9.94C3.66,12.54,4,9.88,5.58,8A9.2,9.2,0,0,1,9.7,5.33h0A27.68,27.68,0,0,1,14.8,4.14,95.81,95.81,0,0,1,29.42,3a93.76,93.76,0,0,1,9.7.51l.85.08c3.88.38,7.88.77,11.2,2.62C53.51,7.51,55,10,55.59,13.68c1,5.93.57,12.11.12,17.44-.08.95-.18,1.88-.32,2.78L40.93,19.42A5.5,5.5,0,0,0,37,17.79h0a5.5,5.5,0,0,0-3.92,1.62l-8.88,8.88a1.5,1.5,0,0,0,2.12,2.12l8.88-8.88a2.53,2.53,0,0,1,1.8-.74h0a2.52,2.52,0,0,1,1.8.75L54.49,37.25a7,7,0,0,1-1.74,2.49C50.48,41.76,46.94,42.41,43.8,42.87Z"/>\n                </g>\n              </g>\n            </g>\n          </svg>\n        </div>\n        <div class="placeholder-title">انتخاب تصویر</div>\n        <div class="message-box" part="message"></div>\n      </div>\n      \n    </slot>\n\n  </div>\n  <div class="upload-loading-wrapper">\n    <span>در حال آپلود</span>\n  </div>\n  <div class="download-loading-wrapper">\n    <span>در حال آماده سازی</span>\n  </div>\n  <div class="image-wrapper">\n    <img src="">\n    <div class="image-overlay">\n      <div class="reselect-button">انتخاب مجدد تصویر</div>\n      <div class="download-button">\n        <svg id="DownloadIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path id="S1" d="M15.0382 12.5084L12.1222 15.4364L9.20621 12.5084" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n          <path id="S3" d="M12.1222 15.4361L12.1222 3.39508" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n          <path id="S2" d="M16.7549 8.12799H17.6879C19.7229 8.12799 21.3719 9.77699 21.3719 11.813V16.697C21.3719 18.727 19.7269 20.372 17.6969 20.372L6.55695 20.372C4.52195 20.372 2.87195 18.722 2.87195 16.687V11.802C2.87195 9.77299 4.51795 8.12799 6.54695 8.12799L7.48895 8.12799" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n      </div>\n      <div class="delete-button">\n        <svg id="DeleteIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path id="BinBody" d="M19.325 9.4682C19.325 9.4682 18.782 16.2032 18.467 19.0402C18.317 20.3952 17.48 21.1892 16.109 21.2142C13.5 21.2612 10.888 21.2642 8.28003 21.2092C6.96103 21.1822 6.13803 20.3782 5.99103 19.0472C5.67403 16.1852 5.13403 9.4682 5.13403 9.4682" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path id="BinLine" d="M20.7082 6.23969H3.75024" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path id="BinHead" d="M17.4406 6.23967C16.6556 6.23967 15.9796 5.68467 15.8256 4.91567L15.5826 3.69967C15.4326 3.13867 14.9246 2.75067 14.3456 2.75067H10.1126C9.53358 2.75067 9.02558 3.13867 8.87558 3.69967L8.63258 4.91567C8.47858 5.68467 7.80258 6.23967 7.01758 6.23967" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n      </div>\n    </div>\n  </div>\n  <div class="error-overlay">\n    \x3c!-- this container used to show flashed error and disappear after --\x3e\n     <div class="error-content">\n          <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M12 14.75C11.59 14.75 11.25 14.41 11.25 14V9C11.25 8.59 11.59 8.25 12 8.25C12.41 8.25 12.75 8.59 12.75 9V14C12.75 14.41 12.41 14.75 12 14.75Z"/>\n            <path d="M12 18C11.94 18 11.87 17.99 11.8 17.98C11.74 17.97 11.68 17.95 11.62 17.92C11.56 17.9 11.5 17.87 11.44 17.83C11.39 17.79 11.34 17.75 11.29 17.71C11.11 17.52 11 17.26 11 17C11 16.74 11.11 16.48 11.29 16.29C11.34 16.25 11.39 16.21 11.44 16.17C11.5 16.13 11.56 16.1 11.62 16.08C11.68 16.05 11.74 16.03 11.8 16.02C11.93 15.99 12.07 15.99 12.19 16.02C12.26 16.03 12.32 16.05 12.38 16.08C12.44 16.1 12.5 16.13 12.56 16.17C12.61 16.21 12.66 16.25 12.71 16.29C12.89 16.48 13 16.74 13 17C13 17.26 12.89 17.52 12.71 17.71C12.66 17.75 12.61 17.79 12.56 17.83C12.5 17.87 12.44 17.9 12.38 17.92C12.32 17.95 12.26 17.97 12.19 17.98C12.13 17.99 12.06 18 12 18Z"/>\n            <path d="M18.06 22.16H5.94001C3.99001 22.16 2.50001 21.45 1.74001 20.17C0.990006 18.89 1.09001 17.24 2.04001 15.53L8.10001 4.63C9.10001 2.83 10.48 1.84 12 1.84C13.52 1.84 14.9 2.83 15.9 4.63L21.96 15.54C22.91 17.25 23.02 18.89 22.26 20.18C21.5 21.45 20.01 22.16 18.06 22.16ZM12 3.34C11.06 3.34 10.14 4.06 9.41001 5.36L3.36001 16.27C2.68001 17.49 2.57001 18.61 3.04001 19.42C3.51001 20.23 4.55001 20.67 5.95001 20.67H18.07C19.47 20.67 20.5 20.23 20.98 19.42C21.46 18.61 21.34 17.5 20.66 16.27L14.59 5.36C13.86 4.06 12.94 3.34 12 3.34Z"/>\n            </svg>\n            <span class="error-message"></span>            \n     </div>\n  </div>\n</div>',e.appendChild(t.content.cloneNode(!0)),i(this,s,{webComponent:e.querySelector(".jb-image-input-web-component"),placeHolderWrapper:e.querySelector(".placeholder-wrapper"),placeHolderTitle:e.querySelector(".placeholder-title"),placeHolderMessageBox:e.querySelector(".message-box"),image:e.querySelector(".image-wrapper img"),overlay:{container:e.querySelector(".image-overlay"),deleteButton:e.querySelector(".image-overlay .delete-button"),downloadButton:e.querySelector(".image-overlay .download-button")},errorOverlay:{container:e.querySelector(".error-overlay"),message:e.querySelector(".error-overlay .error-message")}},"f")},v=function(){this.acceptTypes="image/jpeg,image/jpg,image/png,image/svg+xml",t(this,a,"m",B).call(this,"empty"),t(this,a,"m",j).call(this)},y=function(){t(this,s,"f").placeHolderWrapper.addEventListener("click",this.openImageSelector.bind(this)),t(this,s,"f").image.addEventListener("click",this.openImageSelector.bind(this)),t(this,s,"f").overlay.container.addEventListener("click",this.openImageSelector.bind(this)),t(this,s,"f").overlay.deleteButton.addEventListener("click",t(this,a,"m",W).bind(this)),t(this,s,"f").overlay.downloadButton.addEventListener("click",t(this,a,"m",q).bind(this))},j=function(){i(this,o,document.createElement("input"),"f"),t(this,o,"f").type="file",t(this,o,"f").accept=this.acceptTypes,t(this,o,"f").addEventListener("change",(e=>t(this,a,"m",x).call(this,e)))},C=function(e,i){switch(e){case"required":this.required=""===i||"true"==i;break;case"label":t(this,s,"f").placeHolderTitle&&(t(this,s,"f").placeHolderTitle.innerHTML=i);break;case"multiple":this.multiple="true"===i;break;case"message":t(this,s,"f").placeHolderMessageBox.innerHTML=i}},k=function(e){const t=new CustomEvent("imageSelected",{detail:{files:e}});this.dispatchEvent(t)},x=function(e){const i=e.target.files;if(i&&i?.length>0){t(this,a,"m",k).call(this,i);const e=i[0];t(this,o,"f").value=null,this.selectImageByFile(e)}},M=function(e){i(this,p,e,"f"),t(this,a,"m",S).call(this)},E=function(e){const t=new CustomEvent("maxSizeExceed",{detail:{file:e},cancelable:!1});this.dispatchEvent(t)},L=function(e){t(this,a,"m",B).call(this,"uploading"),this.bridge.uploader(e,this.config,this.onProgressImageUpload.bind(this)).then((e=>t(this,a,"m",V).call(this,e))).catch((()=>t(this,a,"m",A).call(this)))},V=function(e){const i=this.value;t(this,a,"m",B).call(this,"uploaded"),this.value=e,t(this,a,"m",S).call(this).defaultPrevented&&(this.value=i)},S=function(){const e=new Event("change",{bubbles:!0,composed:!0,cancelable:!1});return this.dispatchEvent(e),e},A=function(){this.value?t(this,a,"m",B).call(this,"downloaded"):t(this,a,"m",B).call(this,"empty"),t(this,o,"f").value=""},T=function(e){t(this,a,"m",B).call(this,"downloaded"),this.imageBase64Value=e,t(this,s,"f").image.setAttribute("src",e)},B=function(e){t(this,s,"f").webComponent.setAttribute("status",e),i(this,r,e,"f")},H=function(e){t(this,s,"f").errorOverlay.message.innerHTML=e,t(this,s,"f").errorOverlay.container.style.display="flex",setTimeout((()=>{t(this,s,"f").errorOverlay.message.innerHTML="",t(this,s,"f").errorOverlay.container.style.display="none"}),2e3)},I=function(){const e=[];if(this.required){const t="تصویر حتما باید انتخاب شود";e.push({validator:({file:e,value:t})=>null!==e||null!=t,message:t,stateType:"valueMissing"})}return t(this,d,"f")&&e.push({validator:({file:e})=>null==e||e.size<=t(this,d,"f"),message:"حجم فایل بیشتر از حد مجاز است",stateType:"rangeOverflow"}),e},F=function(e){if(e.isAllValid)t(this,g,"f").setValidity({},"");else{const i={};let a="";e.validationList.forEach((e=>{e.isValid||(e.validation.stateType&&(i[e.validation.stateType]=!0),""==a&&(a=e.message))})),t(this,g,"f").setValidity(i,a)}},W=function(e){e.stopPropagation(),t(this,a,"m",z).call(this,null),t(this,a,"m",S).call(this)},q=function(e){e.stopPropagation();const i=t(this,s,"f").image.getAttribute("src"),a=i.match(/[^:/]\w+(?=;|,)/)[0],n=document.createElement("a");n.href=i,n.download="Image."+a,n.click()},z=function(e){i(this,c,e,"f"),null!=e?e instanceof File?(i(this,p,e,"f"),P.ExtractBase64ImageFromFile(e).then(t(this,a,"m",T).bind(this))):this.bridge.downloader(e,this.config).then(t(this,a,"m",T).bind(this)):(i(this,p,null,"f"),t(this,a,"m",B).call(this,"empty"))},!customElements.get("jb-image-input")&&window.customElements.define("jb-image-input",P);var jb_core_react=__webpack_require__("../../web-component/jb-core/react/index.js");let JBImageInput_l=react.forwardRef(((l,n)=>{let u=(0,react.useRef)(null),[m,p]=(0,react.useState)(0);return(0,react.useImperativeHandle)(n,(()=>u?u.current:{}),[u]),(0,react.useEffect)((()=>{p(m+1)}),[u.current]),(0,react.useEffect)((()=>{l.config&&u.current&&(u.current.config=l.config)}),[l.config]),(0,react.useEffect)((()=>{l.bridge&&u.current&&(u.current.bridge=l.bridge)}),[l.bridge]),(0,react.useEffect)((()=>{l.multiple?u.current?.setAttribute("multiple","true"):u.current?.removeAttribute("multiple")}),[l.multiple]),(0,react.useEffect)((()=>{void 0!==l.value&&u.current&&(u.current.value=l.value)}),[l.value]),(0,react.useEffect)((()=>{l.file&&u.current?.selectImageByFile(l.file)}),[l.file]),(0,react.useEffect)((()=>{l.acceptTypes&&u.current&&(u.current.acceptTypes=l.acceptTypes)}),[l.acceptTypes]),(0,react.useEffect)((()=>{void 0!==l.maxFileSize&&u.current&&(u.current.maxFileSize=l.maxFileSize)}),[l.maxFileSize]),(0,jb_core_react._q)(u,"load",l.onLoad,!0),(0,jb_core_react._q)(u,"init",l.onInit,!0),(0,jb_core_react._q)(u,"change",l.onChange),(0,jb_core_react._q)(u,"imageSelected",l.onImageSelected),(0,jb_core_react._q)(u,"maxSizeExceed",l.onMaxSizeExceed),react.createElement("jb-image-input",{ref:u,class:l.className||"",label:l.label,"upload-type":l.uploadType||"AUTO",required:l.required,name:l.name,message:l.message||""},l.children)}));JBImageInput_l.displayName="JBImageInput"}}]);